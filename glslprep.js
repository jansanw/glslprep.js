#!/usr/bin/env node

var fs = require('fs');
var path = require('path');

var COMPILED=!0,goog=goog||{};goog.global=this;goog.isDef=function(b){return void 0!==b};goog.exportPath_=function(b,e,d){b=b.split(".");d=d||goog.global;b[0]in d||!d.execScript||d.execScript("var "+b[0]);for(var f;b.length&&(f=b.shift());)!b.length&&goog.isDef(e)?d[f]=e:d=d[f]?d[f]:d[f]={}};
goog.define=function(b,e){var d=e;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,b)?d=goog.global.CLOSURE_UNCOMPILED_DEFINES[b]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,b)&&(d=goog.global.CLOSURE_DEFINES[b]));goog.exportPath_(b,d)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.STRICT_MODE_COMPATIBLE=!1;goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG;
goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1;goog.provide=function(b){if(!COMPILED&&goog.isProvided_(b))throw Error('Namespace "'+b+'" already declared.');goog.constructNamespace_(b)};goog.constructNamespace_=function(b,e){if(!COMPILED){delete goog.implicitNamespaces_[b];for(var d=b;(d=d.substring(0,d.lastIndexOf(".")))&&!goog.getObjectByName(d);)goog.implicitNamespaces_[d]=!0}goog.exportPath_(b,e)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(b){if(!goog.isString(b)||!b||-1==b.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+b+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=b;if(!COMPILED){if(goog.isProvided_(b))throw Error('Namespace "'+b+'" already declared.');delete goog.implicitNamespaces_[b]}};goog.module.get=function(b){return goog.module.getInternal_(b)};
goog.module.getInternal_=function(b){if(!COMPILED)return goog.isProvided_(b)?b in goog.loadedModules_?goog.loadedModules_[b]:goog.getObjectByName(b):null};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_};goog.module.declareTestMethods=function(){if(!goog.isInModuleLoader_())throw Error("goog.module.declareTestMethods must be called from within a goog.module");goog.moduleLoaderState_.declareTestMethods=!0};
goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0};
goog.setTestOnly=function(b){if(goog.DISALLOW_TEST_ONLY_CODE)throw b=b||"",Error("Importing test-only code into non-debug environment"+(b?": "+b:"."));};goog.forwardDeclare=function(b){};COMPILED||(goog.isProvided_=function(b){return b in goog.loadedModules_||!goog.implicitNamespaces_[b]&&goog.isDefAndNotNull(goog.getObjectByName(b))},goog.implicitNamespaces_={"goog.module":!0});
goog.getObjectByName=function(b,e){for(var d=b.split("."),f=e||goog.global,g;g=d.shift();)if(goog.isDefAndNotNull(f[g]))f=f[g];else return null;return f};goog.globalize=function(b,e){var d=e||goog.global,f;for(f in b)d[f]=b[f]};goog.addDependency=function(b,e,d,f){if(goog.DEPENDENCIES_ENABLED){var g;b=b.replace(/\\/g,"/");for(var m=goog.dependencies_,p=0;g=e[p];p++)m.nameToPath[g]=b,m.pathIsModule[b]=!!f;for(f=0;e=d[f];f++)b in m.requires||(m.requires[b]={}),m.requires[b][e]=!0}};
goog.ENABLE_DEBUG_LOADER=!0;goog.logToConsole_=function(b){goog.global.console&&goog.global.console.error(b)};
goog.require=function(b){if(!COMPILED){goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(b);if(goog.isProvided_(b))return goog.isInModuleLoader_()?goog.module.getInternal_(b):null;if(goog.ENABLE_DEBUG_LOADER){var e=goog.getPathFromDeps_(b);if(e)return goog.included_[e]=!0,goog.writeScripts_(),null}b="goog.require could not find: "+b;goog.logToConsole_(b);throw Error(b);}};goog.basePath="";goog.nullFunction=function(){};
goog.abstractMethod=function(){throw Error("unimplemented abstract method");};goog.addSingletonGetter=function(b){b.getInstance=function(){if(b.instance_)return b.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=b);return b.instance_=new b}};goog.instantiatedSingletons_=[];goog.LOAD_MODULE_USING_EVAL=!0;goog.SEAL_MODULE_EXPORTS=goog.DEBUG;goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var b=goog.global.document;return"undefined"!=typeof b&&"write"in b},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var b=goog.global.document.getElementsByTagName("SCRIPT"),e=b.length-1;0<=e;--e){var d=b[e].src,f=d.lastIndexOf("?"),
f=-1==f?d.length:f;if("base.js"==d.substr(f-7,7)){goog.basePath=d.substr(0,f-7);break}}},goog.importScript_=function(b,e){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(b,e)&&(goog.dependencies_.written[b]=!0)},goog.IS_OLD_IE_=!goog.global.atob&&goog.global.document&&goog.global.document.all,goog.importModule_=function(b){goog.importScript_("",'goog.retrieveAndExecModule_("'+b+'");')&&(goog.dependencies_.written[b]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(b,e){return goog.LOAD_MODULE_USING_EVAL&&
goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+b+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+b+"\n"},goog.loadQueuedModules_=function(){var b=goog.queuedModules_.length;if(0<b){var e=goog.queuedModules_;goog.queuedModules_=[];for(var d=0;d<b;d++)goog.maybeProcessDeferredPath_(e[d])}},goog.maybeProcessDeferredDep_=function(b){goog.isDeferredModule_(b)&&goog.allDepsAreAvailable_(b)&&(b=goog.getPathFromDeps_(b),
goog.maybeProcessDeferredPath_(goog.basePath+b))},goog.isDeferredModule_=function(b){return(b=goog.getPathFromDeps_(b))&&goog.dependencies_.pathIsModule[b]?goog.basePath+b in goog.dependencies_.deferred:!1},goog.allDepsAreAvailable_=function(b){if((b=goog.getPathFromDeps_(b))&&b in goog.dependencies_.requires)for(var e in goog.dependencies_.requires[b])if(!goog.isProvided_(e)&&!goog.isDeferredModule_(e))return!1;return!0},goog.maybeProcessDeferredPath_=function(b){if(b in goog.dependencies_.deferred){var e=
goog.dependencies_.deferred[b];delete goog.dependencies_.deferred[b];goog.globalEval(e)}},goog.loadModule=function(b){var e=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0,declareTestMethods:!1};var d;if(goog.isFunction(b))d=b.call(goog.global,{});else if(goog.isString(b))d=goog.loadModuleFromSource_.call(goog.global,b);else throw Error("Invalid module definition");var f=goog.moduleLoaderState_.moduleName;if(!goog.isString(f)||!f)throw Error('Invalid module name "'+f+'"');goog.moduleLoaderState_.declareLegacyNamespace?
goog.constructNamespace_(f,d):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(d);goog.loadedModules_[f]=d;if(goog.moduleLoaderState_.declareTestMethods)for(var g in d)if(0===g.indexOf("test",0)||"tearDown"==g||"setUp"==g||"setUpPage"==g||"tearDownPage"==g)goog.global[g]=d[g]}finally{goog.moduleLoaderState_=e}},goog.loadModuleFromSource_=function(b){eval(b);return{}},goog.writeScriptSrcNode_=function(b){goog.global.document.write('<script type="text/javascript" src="'+b+'">\x3c/script>')},goog.appendScriptSrcNode_=
function(b){var e=goog.global.document,d=e.createElement("script");d.type="text/javascript";d.src=b;d.defer=!1;d.async=!1;e.head.appendChild(d)},goog.writeScriptTag_=function(b,e){if(goog.inHtmlDocument_()){var d=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==d.readyState){if(/\bdeps.js$/.test(b))return!1;throw Error('Cannot write "'+b+'" after document load');}var f=goog.IS_OLD_IE_;void 0===e?f?(f=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+
")' ",d.write('<script type="text/javascript" src="'+b+'"'+f+">\x3c/script>")):goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(b):goog.writeScriptSrcNode_(b):d.write('<script type="text/javascript">'+e+"\x3c/script>");return!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(b,e){"complete"==b.readyState&&goog.lastNonModuleScriptIndex_==e&&goog.loadQueuedModules_();return!0},goog.writeScripts_=function(){function b(g){if(!(g in f.written)){if(!(g in f.visited)&&
(f.visited[g]=!0,g in f.requires))for(var m in f.requires[g])if(!goog.isProvided_(m))if(m in f.nameToPath)b(f.nameToPath[m]);else throw Error("Undefined nameToPath for "+m);g in d||(d[g]=!0,e.push(g))}}var e=[],d={},f=goog.dependencies_,g;for(g in goog.included_)f.written[g]||b(g);for(var m=0;m<e.length;m++)g=e[m],goog.dependencies_.written[g]=!0;var p=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(m=0;m<e.length;m++)if(g=e[m])f.pathIsModule[g]?goog.importModule_(goog.basePath+g):goog.importScript_(goog.basePath+
g);else throw goog.moduleLoaderState_=p,Error("Undefined script input");goog.moduleLoaderState_=p},goog.getPathFromDeps_=function(b){return b in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[b]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));goog.normalizePath_=function(b){b=b.split("/");for(var e=0;e<b.length;)"."==b[e]?b.splice(e,1):e&&".."==b[e]&&b[e-1]&&".."!=b[e-1]?b.splice(--e,2):e++;return b.join("/")};
goog.loadFileSync_=function(b){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(b);var e=new goog.global.XMLHttpRequest;e.open("get",b,!1);e.send();return e.responseText};
goog.retrieveAndExecModule_=function(b){if(!COMPILED){var e=b;b=goog.normalizePath_(b);var d=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,f=goog.loadFileSync_(b);if(null!=f)f=goog.wrapModule_(b,f),goog.IS_OLD_IE_?(goog.dependencies_.deferred[e]=f,goog.queuedModules_.push(e)):d(b,f);else throw Error("load of "+b+"failed");}};
goog.typeOf=function(b){var e=typeof b;if("object"==e)if(b){if(b instanceof Array)return"array";if(b instanceof Object)return e;var d=Object.prototype.toString.call(b);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof b.length&&"undefined"!=typeof b.splice&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof b.call&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==e&&"undefined"==typeof b.call)return"object";return e};goog.isNull=function(b){return null===b};goog.isDefAndNotNull=function(b){return null!=b};goog.isArray=function(b){return"array"==goog.typeOf(b)};goog.isArrayLike=function(b){var e=goog.typeOf(b);return"array"==e||"object"==e&&"number"==typeof b.length};goog.isDateLike=function(b){return goog.isObject(b)&&"function"==typeof b.getFullYear};goog.isString=function(b){return"string"==typeof b};
goog.isBoolean=function(b){return"boolean"==typeof b};goog.isNumber=function(b){return"number"==typeof b};goog.isFunction=function(b){return"function"==goog.typeOf(b)};goog.isObject=function(b){var e=typeof b;return"object"==e&&null!=b||"function"==e};goog.getUid=function(b){return b[goog.UID_PROPERTY_]||(b[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(b){return!!b[goog.UID_PROPERTY_]};goog.removeUid=function(b){"removeAttribute"in b&&b.removeAttribute(goog.UID_PROPERTY_);try{delete b[goog.UID_PROPERTY_]}catch(e){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(b){var e=goog.typeOf(b);if("object"==e||"array"==e){if(b.clone)return b.clone();var e="array"==e?[]:{},d;for(d in b)e[d]=goog.cloneObject(b[d]);return e}return b};goog.bindNative_=function(b,e,d){return b.call.apply(b.bind,arguments)};
goog.bindJs_=function(b,e,d){if(!b)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,f);return b.apply(e,d)}}return function(){return b.apply(e,arguments)}};goog.bind=function(b,e,d){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(b,e){var d=Array.prototype.slice.call(arguments,1);return function(){var e=d.slice();e.push.apply(e,arguments);return b.apply(this,e)}};goog.mixin=function(b,e){for(var d in e)b[d]=e[d]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(b){if(goog.global.execScript)goog.global.execScript(b,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(b);else{var e=goog.global.document,d=e.createElement("SCRIPT");d.type="text/javascript";d.defer=!1;d.appendChild(e.createTextNode(b));e.body.appendChild(d);
e.body.removeChild(d)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(b,e){var d=function(b){return goog.cssNameMapping_[b]||b},f=function(b){b=b.split("-");for(var e=[],f=0;f<b.length;f++)e.push(d(b[f]));return e.join("-")},f=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?d:f:function(b){return b};return e?b+"-"+f(e):f(b)};goog.setCssNameMapping=function(b,e){goog.cssNameMapping_=b;goog.cssNameMappingStyle_=e};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(b,e){e&&(b=b.replace(/\{\$([^}]+)}/g,function(b,f){return f in e?e[f]:b}));return b};goog.getMsgWithFallback=function(b,e){return b};goog.exportSymbol=function(b,e,d){goog.exportPath_(b,e,d)};goog.exportProperty=function(b,e,d){b[e]=d};
goog.inherits=function(b,e){function d(){}d.prototype=e.prototype;b.superClass_=e.prototype;b.prototype=new d;b.prototype.constructor=b;b.base=function(b,d,m){for(var p=Array(arguments.length-2),q=2;q<arguments.length;q++)p[q-2]=arguments[q];return e.prototype[d].apply(b,p)}};
goog.base=function(b,e,d){var f=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!f)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(f.superClass_){for(var g=Array(arguments.length-1),m=1;m<arguments.length;m++)g[m-1]=arguments[m];return f.superClass_.constructor.apply(b,g)}g=Array(arguments.length-2);for(m=2;m<arguments.length;m++)g[m-2]=arguments[m];for(var m=!1,p=b.constructor;p;p=
p.superClass_&&p.superClass_.constructor)if(p.prototype[e]===f)m=!0;else if(m)return p.prototype[e].apply(b,g);if(b[e]===f)return b.constructor.prototype[e].apply(b,g);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(b){b.call(goog.global)};COMPILED||(goog.global.COMPILED=COMPILED);
goog.defineClass=function(b,e){var d=e.constructor,f=e.statics;d&&d!=Object.prototype.constructor||(d=function(){throw Error("cannot instantiate an interface (no constructor defined).");});d=goog.defineClass.createSealingConstructor_(d,b);b&&goog.inherits(d,b);delete e.constructor;delete e.statics;goog.defineClass.applyProperties_(d.prototype,e);null!=f&&(f instanceof Function?f(d):goog.defineClass.applyProperties_(d,f));return d};goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG;
goog.defineClass.createSealingConstructor_=function(b,e){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(e&&e.prototype&&e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return b;var d=function(){var e=b.apply(this,arguments)||this;e[goog.UID_PROPERTY_]=e[goog.UID_PROPERTY_];this.constructor===d&&Object.seal(e);return e};return d}return b};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
goog.defineClass.applyProperties_=function(b,e){for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(b[d]=e[d]);for(var f=0;f<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;f++)d=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[f],Object.prototype.hasOwnProperty.call(e,d)&&(b[d]=e[d])};goog.tagUnsealableClass=function(b){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(b.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";/*

 Copyright (c) 2009 Chris Wanstrath (Ruby)
 Copyright (c) 2010 Jan Lehnardt (JavaScript)

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.

*/
var Mustache=function(){function b(b){return String(b).replace(/&(?!\w+;)|[<>"']/g,function(b){return q[b]||b})}function e(){}var d=Object.prototype.toString;Array.isArray=Array.isArray||function(b){return"[object Array]"==d.call(b)};var f=String.prototype.trim,g;if(f)g=function(b){return null==b?"":f.call(b)};else{var m,p;/\S/.test("\u00a0")?(m=/^[\s\xA0]+/,p=/[\s\xA0]+$/):(m=/^\s+/,p=/\s+$/);g=function(b){return null==b?"":b.toString().replace(m,"").replace(p,"")}}var q={"&":"&amp;","<":"&lt;",
">":"&gt;",'"':"&quot;","'":"&#39;"},u={};e.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(b,e,d,g){g||(this.context=e,this.buffer=[]);if(this.includes("",b)){b=this.render_pragmas(b);var f=this.render_section(b,e,d);!1===f&&(f=this.render_tags(b,e,d,g));if(g)return f;this.sendLines(f)}else{if(g)return b;this.send(b)}},send:function(b){""!==b&&this.buffer.push(b)},sendLines:function(b){if(b){b=b.split("\n");for(var e=0;e<
b.length;e++)this.send(b[e])}},render_pragmas:function(b){if(!this.includes("%",b))return b;var e=this,d=this.getCachedRegex("render_pragmas",function(b,e){return new RegExp(b+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+e,"g")});return b.replace(d,function(b,d,g){if(!e.pragmas_implemented[d])throw{message:"This implementation of mustache doesn't understand the '"+d+"' pragma"};e.pragmas[d]={};g&&(b=g.split("="),e.pragmas[d][b[0]]=b[1]);return""})},render_partial:function(b,e,d){b=g(b);if(!d||void 0===d[b])throw{message:"unknown_partial '"+
b+"'"};return e&&"object"==typeof e[b]?this.render(d[b],e[b],d,!0):this.render(d[b],e,d,!0)},render_section:function(b,e,d){if(!this.includes("#",b)&&!this.includes("^",b))return!1;var g=this,f=this.getCachedRegex("render_section",function(b,e){return new RegExp("^([\\s\\S]*?)"+b+"(\\^|\\#)\\s*(.+)\\s*"+e+"\n*([\\s\\S]*?)"+b+"\\/\\s*\\3\\s*"+e+"\\s*([\\s\\S]*)$","g")});return b.replace(f,function(b,f,m,q,p,y){b=f?g.render_tags(f,e,d,!0):"";y=y?g.render(y,e,d,!0):"";var u;q=g.find(q,e);"^"===m?u=!q||
Array.isArray(q)&&0===q.length?g.render(p,e,d,!0):"":"#"===m&&(u=Array.isArray(q)?g.map(q,function(b){return g.render(p,g.create_context(b),d,!0)}).join(""):g.is_object(q)?g.render(p,g.create_context(q),d,!0):"function"==typeof q?q.call(e,p,function(b){return g.render(b,e,d,!0)}):q?g.render(p,e,d,!0):"");return b+u+y})},render_tags:function(e,d,g,f){var m=this,q=function(){return m.getCachedRegex("render_tags",function(b,e){return new RegExp(b+"(=|!|>|&|\\{|%)?([^#\\^]+?)\\1?"+e+"+","g")})},p=q(),
u=function(e,f,v){switch(f){case "!":return"";case "=":return m.set_delimiters(v),p=q(),"";case ">":return m.render_partial(v,d,g);case "{":case "&":return m.find(v,d);default:return b(m.find(v,d))}};e=e.split("\n");for(var F=0;F<e.length;F++)e[F]=e[F].replace(p,u,this),f||this.send(e[F]);if(f)return e.join("\n")},set_delimiters:function(b){b=b.split(" ");this.otag=this.escape_regex(b[0]);this.ctag=this.escape_regex(b[1])},escape_regex:function(b){arguments.callee.sRE||(arguments.callee.sRE=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)",
"g"));return b.replace(arguments.callee.sRE,"\\$1")},find:function(b,e){function d(b){return!1===b||0===b||b}b=g(b);var f;if(b.match(/([a-z_]+)\./ig)){var m=this.walk_context(b,e);d(m)&&(f=m)}else d(e[b])?f=e[b]:d(this.context[b])&&(f=this.context[b]);return"function"==typeof f?f.apply(e):void 0!==f?f:""},walk_context:function(b,e){for(var d=b.split("."),g=void 0!=e[d[0]]?e:this.context,f=g[d.shift()];void 0!=f&&0<d.length;)g=f,f=f[d.shift()];return"function"==typeof f?f.apply(g):f},includes:function(b,
e){return-1!=e.indexOf(this.otag+b)},create_context:function(b){if(this.is_object(b))return b;var e=".";this.pragmas["IMPLICIT-ITERATOR"]&&(e=this.pragmas["IMPLICIT-ITERATOR"].iterator);var d={};d[e]=b;return d},is_object:function(b){return b&&"object"==typeof b},map:function(b,e){if("function"==typeof b.map)return b.map(e);for(var d=[],g=b.length,f=0;f<g;f++)d.push(e(b[f]));return d},getCachedRegex:function(b,e){var d=u[this.otag];d||(d=u[this.otag]={});var g=d[this.ctag];g||(g=d[this.ctag]={});
(d=g[b])||(d=g[b]=e(this.otag,this.ctag));return d}};return{name:"mustache.js",version:"0.5.0-dev",to_html:function(b,d,g,f){var m=new e;f&&(m.send=f);m.render(b,d||{},g,!1);if(!f)return m.buffer.join("\n")}}}();goog.string={};goog.string.Unicode={};goog.string.subs=function(b,e){for(var d=b.split("%s"),f="",g=Array.prototype.slice.call(arguments,1);g.length&&1<d.length;)f+=d.shift()+g.shift();return f+d.join("%s")};goog.object={};goog.object.forEach=function(b,e,d){for(var f in b)e.call(d,b[f],f,b)};goog.object.filter=function(b,e,d){var f={},g;for(g in b)e.call(d,b[g],g,b)&&(f[g]=b[g]);return f};goog.object.map=function(b,e,d){var f={},g;for(g in b)f[g]=e.call(d,b[g],g,b);return f};goog.object.some=function(b,e,d){for(var f in b)if(e.call(d,b[f],f,b))return!0;return!1};goog.object.every=function(b,e,d){for(var f in b)if(!e.call(d,b[f],f,b))return!1;return!0};
goog.object.getCount=function(b){var e=0,d;for(d in b)e++;return e};goog.object.getAnyKey=function(b){for(var e in b)return e};goog.object.getAnyValue=function(b){for(var e in b)return b[e]};goog.object.contains=function(b,e){return goog.object.containsValue(b,e)};goog.object.getValues=function(b){var e=[],d=0,f;for(f in b)e[d++]=b[f];return e};goog.object.getKeys=function(b){var e=[],d=0,f;for(f in b)e[d++]=f;return e};
goog.object.getValueByKeys=function(b,e){for(var d=goog.isArrayLike(e),f=d?e:arguments,d=d?0:1;d<f.length&&(b=b[f[d]],goog.isDef(b));d++);return b};goog.object.containsKey=function(b,e){return e in b};goog.object.containsValue=function(b,e){for(var d in b)if(b[d]==e)return!0;return!1};goog.object.findKey=function(b,e,d){for(var f in b)if(e.call(d,b[f],f,b))return f};goog.object.findValue=function(b,e,d){return(e=goog.object.findKey(b,e,d))&&b[e]};
goog.object.isEmpty=function(b){for(var e in b)return!1;return!0};goog.object.clear=function(b){for(var e in b)delete b[e]};goog.object.remove=function(b,e){var d;(d=e in b)&&delete b[e];return d};goog.object.add=function(b,e,d){if(e in b)throw Error('The object already contains the key "'+e+'"');goog.object.set(b,e,d)};goog.object.get=function(b,e,d){return e in b?b[e]:d};goog.object.set=function(b,e,d){b[e]=d};goog.object.setIfUndefined=function(b,e,d){return e in b?b[e]:b[e]=d};
goog.object.setWithReturnValueIfNotSet=function(b,e,d){if(e in b)return b[e];d=d();return b[e]=d};goog.object.equals=function(b,e){for(var d in b)if(!(d in e)||b[d]!==e[d])return!1;for(d in e)if(!(d in b))return!1;return!0};goog.object.clone=function(b){var e={},d;for(d in b)e[d]=b[d];return e};goog.object.unsafeClone=function(b){var e=goog.typeOf(b);if("object"==e||"array"==e){if(b.clone)return b.clone();var e="array"==e?[]:{},d;for(d in b)e[d]=goog.object.unsafeClone(b[d]);return e}return b};
goog.object.transpose=function(b){var e={},d;for(d in b)e[b[d]]=d;return e};goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");goog.object.extend=function(b,e){for(var d,f,g=1;g<arguments.length;g++){f=arguments[g];for(d in f)b[d]=f[d];for(var m=0;m<goog.object.PROTOTYPE_FIELDS_.length;m++)d=goog.object.PROTOTYPE_FIELDS_[m],Object.prototype.hasOwnProperty.call(f,d)&&(b[d]=f[d])}};
goog.object.create=function(b){var e=arguments.length;if(1==e&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(e%2)throw Error("Uneven number of arguments");for(var d={},f=0;f<e;f+=2)d[arguments[f]]=arguments[f+1];return d};goog.object.createSet=function(b){var e=arguments.length;if(1==e&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var d={},f=0;f<e;f++)d[arguments[f]]=!0;return d};
goog.object.createImmutableView=function(b){var e=b;Object.isFrozen&&!Object.isFrozen(b)&&(e=Object.create(b),Object.freeze(e));return e};goog.object.isImmutableView=function(b){return!!Object.isFrozen&&Object.isFrozen(b)};goog.dom={};goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};goog.debug={};goog.debug.Error=function(b){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var e=Error().stack;e&&(this.stack=e)}b&&(this.message=String(b));this.reportErrorToServer=!0};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.asserts={};goog.asserts.ENABLE_ASSERTS=goog.DEBUG;goog.asserts.AssertionError=function(b,e){e.unshift(b);goog.debug.Error.call(this,goog.string.subs.apply(null,e));e.shift();this.messagePattern=b};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.DEFAULT_ERROR_HANDLER=function(b){throw b;};goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER;
goog.asserts.doAssertFailure_=function(b,e,d,f){var g="Assertion failed";if(d)var g=g+(": "+d),m=f;else b&&(g+=": "+b,m=e);b=new goog.asserts.AssertionError(""+g,m||[]);goog.asserts.errorHandler_(b)};goog.asserts.setErrorHandler=function(b){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=b)};goog.asserts.assert=function(b,e,d){goog.asserts.ENABLE_ASSERTS&&!b&&goog.asserts.doAssertFailure_("",null,e,Array.prototype.slice.call(arguments,2));return b};
goog.asserts.fail=function(b,e){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(b?": "+b:""),Array.prototype.slice.call(arguments,1)))};goog.asserts.assertNumber=function(b,e,d){goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(b)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(b),b],e,Array.prototype.slice.call(arguments,2));return b};
goog.asserts.assertString=function(b,e,d){goog.asserts.ENABLE_ASSERTS&&!goog.isString(b)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(b),b],e,Array.prototype.slice.call(arguments,2));return b};goog.asserts.assertFunction=function(b,e,d){goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(b)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(b),b],e,Array.prototype.slice.call(arguments,2));return b};
goog.asserts.assertObject=function(b,e,d){goog.asserts.ENABLE_ASSERTS&&!goog.isObject(b)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(b),b],e,Array.prototype.slice.call(arguments,2));return b};goog.asserts.assertArray=function(b,e,d){goog.asserts.ENABLE_ASSERTS&&!goog.isArray(b)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(b),b],e,Array.prototype.slice.call(arguments,2));return b};
goog.asserts.assertBoolean=function(b,e,d){goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(b)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(b),b],e,Array.prototype.slice.call(arguments,2));return b};goog.asserts.assertElement=function(b,e,d){!goog.asserts.ENABLE_ASSERTS||goog.isObject(b)&&b.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(b),b],e,Array.prototype.slice.call(arguments,2));return b};
goog.asserts.assertInstanceof=function(b,e,d,f){!goog.asserts.ENABLE_ASSERTS||b instanceof e||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(e),goog.asserts.getType_(b)],d,Array.prototype.slice.call(arguments,3));return b};goog.asserts.assertObjectPrototypeIsIntact=function(){for(var b in Object.prototype)goog.asserts.fail(b+" should not be enumerable in Object.prototype.")};
goog.asserts.getType_=function(b){return b instanceof Function?b.displayName||b.name||"unknown type name":b instanceof Object?b.constructor.displayName||b.constructor.name||Object.prototype.toString.call(b):null===b?"null":typeof b};goog.array={};goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE;goog.array.ASSUME_NATIVE_FUNCTIONS=!1;goog.array.peek=function(b){return b[b.length-1]};goog.array.last=goog.array.peek;goog.array.ARRAY_PROTOTYPE_=Array.prototype;
goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.indexOf)?function(b,e,d){goog.asserts.assert(null!=b.length);return goog.array.ARRAY_PROTOTYPE_.indexOf.call(b,e,d)}:function(b,e,d){d=null==d?0:0>d?Math.max(0,b.length+d):d;if(goog.isString(b))return goog.isString(e)&&1==e.length?b.indexOf(e,d):-1;for(;d<b.length;d++)if(d in b&&b[d]===e)return d;return-1};
goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.lastIndexOf)?function(b,e,d){goog.asserts.assert(null!=b.length);return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(b,e,null==d?b.length-1:d)}:function(b,e,d){d=null==d?b.length-1:d;0>d&&(d=Math.max(0,b.length+d));if(goog.isString(b))return goog.isString(e)&&1==e.length?b.lastIndexOf(e,d):-1;for(;0<=d;d--)if(d in b&&b[d]===e)return d;return-1};
goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.forEach)?function(b,e,d){goog.asserts.assert(null!=b.length);goog.array.ARRAY_PROTOTYPE_.forEach.call(b,e,d)}:function(b,e,d){for(var f=b.length,g=goog.isString(b)?b.split(""):b,m=0;m<f;m++)m in g&&e.call(d,g[m],m,b)};goog.array.forEachRight=function(b,e,d){for(var f=b.length,g=goog.isString(b)?b.split(""):b,f=f-1;0<=f;--f)f in g&&e.call(d,g[f],f,b)};
goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.filter)?function(b,e,d){goog.asserts.assert(null!=b.length);return goog.array.ARRAY_PROTOTYPE_.filter.call(b,e,d)}:function(b,e,d){for(var f=b.length,g=[],m=0,p=goog.isString(b)?b.split(""):b,q=0;q<f;q++)if(q in p){var u=p[q];e.call(d,u,q,b)&&(g[m++]=u)}return g};
goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.map)?function(b,e,d){goog.asserts.assert(null!=b.length);return goog.array.ARRAY_PROTOTYPE_.map.call(b,e,d)}:function(b,e,d){for(var f=b.length,g=Array(f),m=goog.isString(b)?b.split(""):b,p=0;p<f;p++)p in m&&(g[p]=e.call(d,m[p],p,b));return g};
goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduce)?function(b,e,d,f){goog.asserts.assert(null!=b.length);f&&(e=goog.bind(e,f));return goog.array.ARRAY_PROTOTYPE_.reduce.call(b,e,d)}:function(b,e,d,f){var g=d;goog.array.forEach(b,function(d,p){g=e.call(f,g,d,p,b)});return g};
goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduceRight)?function(b,e,d,f){goog.asserts.assert(null!=b.length);f&&(e=goog.bind(e,f));return goog.array.ARRAY_PROTOTYPE_.reduceRight.call(b,e,d)}:function(b,e,d,f){var g=d;goog.array.forEachRight(b,function(d,p){g=e.call(f,g,d,p,b)});return g};
goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.some)?function(b,e,d){goog.asserts.assert(null!=b.length);return goog.array.ARRAY_PROTOTYPE_.some.call(b,e,d)}:function(b,e,d){for(var f=b.length,g=goog.isString(b)?b.split(""):b,m=0;m<f;m++)if(m in g&&e.call(d,g[m],m,b))return!0;return!1};
goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.every)?function(b,e,d){goog.asserts.assert(null!=b.length);return goog.array.ARRAY_PROTOTYPE_.every.call(b,e,d)}:function(b,e,d){for(var f=b.length,g=goog.isString(b)?b.split(""):b,m=0;m<f;m++)if(m in g&&!e.call(d,g[m],m,b))return!1;return!0};goog.array.count=function(b,e,d){var f=0;goog.array.forEach(b,function(b,m,p){e.call(d,b,m,p)&&++f},d);return f};
goog.array.find=function(b,e,d){e=goog.array.findIndex(b,e,d);return 0>e?null:goog.isString(b)?b.charAt(e):b[e]};goog.array.findIndex=function(b,e,d){for(var f=b.length,g=goog.isString(b)?b.split(""):b,m=0;m<f;m++)if(m in g&&e.call(d,g[m],m,b))return m;return-1};goog.array.findRight=function(b,e,d){e=goog.array.findIndexRight(b,e,d);return 0>e?null:goog.isString(b)?b.charAt(e):b[e]};
goog.array.findIndexRight=function(b,e,d){for(var f=b.length,g=goog.isString(b)?b.split(""):b,f=f-1;0<=f;f--)if(f in g&&e.call(d,g[f],f,b))return f;return-1};goog.array.contains=function(b,e){return 0<=goog.array.indexOf(b,e)};goog.array.isEmpty=function(b){return 0==b.length};goog.array.clear=function(b){if(!goog.isArray(b))for(var e=b.length-1;0<=e;e--)delete b[e];b.length=0};goog.array.insert=function(b,e){goog.array.contains(b,e)||b.push(e)};
goog.array.insertAt=function(b,e,d){goog.array.splice(b,d,0,e)};goog.array.insertArrayAt=function(b,e,d){goog.partial(goog.array.splice,b,d,0).apply(null,e)};goog.array.insertBefore=function(b,e,d){var f;2==arguments.length||0>(f=goog.array.indexOf(b,d))?b.push(e):goog.array.insertAt(b,e,f)};goog.array.remove=function(b,e){var d=goog.array.indexOf(b,e),f;(f=0<=d)&&goog.array.removeAt(b,d);return f};
goog.array.removeAt=function(b,e){goog.asserts.assert(null!=b.length);return 1==goog.array.ARRAY_PROTOTYPE_.splice.call(b,e,1).length};goog.array.removeIf=function(b,e,d){e=goog.array.findIndex(b,e,d);return 0<=e?(goog.array.removeAt(b,e),!0):!1};goog.array.removeAllIf=function(b,e,d){var f=0;goog.array.forEachRight(b,function(g,m){e.call(d,g,m,b)&&goog.array.removeAt(b,m)&&f++});return f};goog.array.concat=function(b){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};
goog.array.join=function(b){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};goog.array.toArray=function(b){var e=b.length;if(0<e){for(var d=Array(e),f=0;f<e;f++)d[f]=b[f];return d}return[]};goog.array.clone=goog.array.toArray;goog.array.extend=function(b,e){for(var d=1;d<arguments.length;d++){var f=arguments[d];if(goog.isArrayLike(f)){var g=b.length||0,m=f.length||0;b.length=g+m;for(var p=0;p<m;p++)b[g+p]=f[p]}else b.push(f)}};
goog.array.splice=function(b,e,d,f){goog.asserts.assert(null!=b.length);return goog.array.ARRAY_PROTOTYPE_.splice.apply(b,goog.array.slice(arguments,1))};goog.array.slice=function(b,e,d){goog.asserts.assert(null!=b.length);return 2>=arguments.length?goog.array.ARRAY_PROTOTYPE_.slice.call(b,e):goog.array.ARRAY_PROTOTYPE_.slice.call(b,e,d)};
goog.array.removeDuplicates=function(b,e,d){e=e||b;var f=function(b){return goog.isObject(p)?"o"+goog.getUid(p):(typeof p).charAt(0)+p};d=d||f;for(var f={},g=0,m=0;m<b.length;){var p=b[m++],q=d(p);Object.prototype.hasOwnProperty.call(f,q)||(f[q]=!0,e[g++]=p)}e.length=g};goog.array.binarySearch=function(b,e,d){return goog.array.binarySearch_(b,d||goog.array.defaultCompare,!1,e)};goog.array.binarySelect=function(b,e,d){return goog.array.binarySearch_(b,e,!0,void 0,d)};
goog.array.binarySearch_=function(b,e,d,f,g){for(var m=0,p=b.length,q;m<p;){var u=m+p>>1,y;y=d?e.call(g,b[u],u,b):e(f,b[u]);0<y?m=u+1:(p=u,q=!y)}return q?m:~m};goog.array.sort=function(b,e){b.sort(e||goog.array.defaultCompare)};goog.array.stableSort=function(b,e){for(var d=0;d<b.length;d++)b[d]={index:d,value:b[d]};var f=e||goog.array.defaultCompare;goog.array.sort(b,function(b,e){return f(b.value,e.value)||b.index-e.index});for(d=0;d<b.length;d++)b[d]=b[d].value};
goog.array.sortByKey=function(b,e,d){var f=d||goog.array.defaultCompare;goog.array.sort(b,function(b,d){return f(e(b),e(d))})};goog.array.sortObjectsByKey=function(b,e,d){goog.array.sortByKey(b,function(b){return b[e]},d)};goog.array.isSorted=function(b,e,d){e=e||goog.array.defaultCompare;for(var f=1;f<b.length;f++){var g=e(b[f-1],b[f]);if(0<g||0==g&&d)return!1}return!0};
goog.array.equals=function(b,e,d){if(!goog.isArrayLike(b)||!goog.isArrayLike(e)||b.length!=e.length)return!1;var f=b.length;d=d||goog.array.defaultCompareEquality;for(var g=0;g<f;g++)if(!d(b[g],e[g]))return!1;return!0};goog.array.compare3=function(b,e,d){d=d||goog.array.defaultCompare;for(var f=Math.min(b.length,e.length),g=0;g<f;g++){var m=d(b[g],e[g]);if(0!=m)return m}return goog.array.defaultCompare(b.length,e.length)};goog.array.defaultCompare=function(b,e){return b>e?1:b<e?-1:0};
goog.array.inverseDefaultCompare=function(b,e){return-goog.array.defaultCompare(b,e)};goog.array.defaultCompareEquality=function(b,e){return b===e};goog.array.binaryInsert=function(b,e,d){d=goog.array.binarySearch(b,e,d);return 0>d?(goog.array.insertAt(b,e,-(d+1)),!0):!1};goog.array.binaryRemove=function(b,e,d){e=goog.array.binarySearch(b,e,d);return 0<=e?goog.array.removeAt(b,e):!1};
goog.array.bucket=function(b,e,d){for(var f={},g=0;g<b.length;g++){var m=b[g],p=e.call(d,m,g,b);goog.isDef(p)&&(f[p]||(f[p]=[])).push(m)}return f};goog.array.toObject=function(b,e,d){var f={};goog.array.forEach(b,function(g,m){f[e.call(d,g,m,b)]=g});return f};goog.array.range=function(b,e,d){var f=[],g=0,m=b;d=d||1;void 0!==e&&(g=b,m=e);if(0>d*(m-g))return[];if(0<d)for(b=g;b<m;b+=d)f.push(b);else for(b=g;b>m;b+=d)f.push(b);return f};
goog.array.repeat=function(b,e){for(var d=[],f=0;f<e;f++)d[f]=b;return d};goog.array.flatten=function(b){for(var e=[],d=0;d<arguments.length;d++){var f=arguments[d];if(goog.isArray(f))for(var g=0;g<f.length;g+=8192)for(var m=goog.array.slice(f,g,g+8192),m=goog.array.flatten.apply(null,m),p=0;p<m.length;p++)e.push(m[p]);else e.push(f)}return e};
goog.array.rotate=function(b,e){goog.asserts.assert(null!=b.length);b.length&&(e%=b.length,0<e?goog.array.ARRAY_PROTOTYPE_.unshift.apply(b,b.splice(-e,e)):0>e&&goog.array.ARRAY_PROTOTYPE_.push.apply(b,b.splice(0,-e)));return b};goog.array.moveItem=function(b,e,d){goog.asserts.assert(0<=e&&e<b.length);goog.asserts.assert(0<=d&&d<b.length);e=goog.array.ARRAY_PROTOTYPE_.splice.call(b,e,1);goog.array.ARRAY_PROTOTYPE_.splice.call(b,d,0,e[0])};
goog.array.zip=function(b){if(!arguments.length)return[];for(var e=[],d=0;;d++){for(var f=[],g=0;g<arguments.length;g++){var m=arguments[g];if(d>=m.length)return e;f.push(m[d])}e.push(f)}};goog.array.shuffle=function(b,e){for(var d=e||Math.random,f=b.length-1;0<f;f--){var g=Math.floor(d()*(f+1)),m=b[f];b[f]=b[g];b[g]=m}};goog.array.copyByIndex=function(b,e){var d=[];goog.array.forEach(e,function(e){d.push(b[e])});return d};goog.node={};goog.node.flagType={STRING:"string",STRING_ARRAY:"string_array",BOOLEAN:"boolean",INTEGER:"integer"};goog.node.commandLineFlag=function(b,e,d,f){this.name=b;this.type=e;this.defaultValue=d;this.description=f;this.value=void 0};goog.node.commandLineFlag.prototype.getTypeHelp=function(){return""};goog.node.commandLineFlag.prototype.isRequired=function(){return!goog.isDef(this.defaultValue)};
goog.node.commandLineFlag.prototype.getValue=function(){return goog.isDef(this.value)?this.value:this.defaultValue};goog.node.commandLineFlag.prototype.parseValue=function(b){this.value=b};goog.node.arrayCommandLineFlag=function(b,e,d,f){goog.node.commandLineFlag.call(this,b,e,d,f);this.value=void 0};goog.inherits(goog.node.arrayCommandLineFlag,goog.node.commandLineFlag);goog.node.arrayCommandLineFlag.prototype.getTypeHelp=function(){return"repeat this option to specify a list of values"};
goog.node.arrayCommandLineFlag.prototype.parseValue=function(b){goog.isDef(this.value)||(this.value=[]);-1!=b.search(",")?this.value.push.apply(this.value,b.split(",")):this.value.push(b)};goog.node.FLAGS=function(){};goog.node.FLAGS.definedFlags_={};goog.node.FLAGS.define_string=function(b,e,d){var f=new goog.node.commandLineFlag(b,goog.node.flagType.STRING,e,d);goog.node.FLAGS.definedFlags_[b]=f;goog.node.FLAGS.__defineGetter__(b,function(){return String(f.getValue())})};
goog.node.FLAGS.define_string_array=function(b,e,d){var f=new goog.node.arrayCommandLineFlag(b,goog.node.flagType.STRING_ARRAY,e,d);goog.node.FLAGS.definedFlags_[b]=f;goog.node.FLAGS.__defineGetter__(b,function(){return f.getValue().map(String)})};goog.node.FLAGS.define_bool=function(b,e,d){var f=new goog.node.commandLineFlag(b,goog.node.flagType.BOOLEAN,e,d);goog.node.FLAGS.definedFlags_[b]=f;goog.node.FLAGS.__defineGetter__(b,function(){var b=f.getValue();return Boolean(/^[tT]rue$/.test(b))})};
goog.node.FLAGS.define_integer=function(b,e,d){var f=new goog.node.commandLineFlag(b,goog.node.flagType.INTEGER,e,d);goog.node.FLAGS.definedFlags_[b]=f;goog.node.FLAGS.__defineGetter__(b,function(){var e=f.getValue();/^\d*$/.exec(e)||(console.error("Flag "+b+" is not an integer.\n"),goog.node.FLAGS.printHelp(),process.exit(1));return parseInt(e,10)})};
goog.node.FLAGS.parseArgs=function(){var b=null;process.argv.forEach(function(e,d,m){if(!(1>=d)){"--help"==e&&(goog.node.FLAGS.printHelp(),process.exit(0));var p,q,u="--"==e.slice(0,2),y=b&&"--"==b.slice(0,2),H=e.split("=");u&&1<H.length?(p=H[0],q=H.slice(1).join("=")):b?y&&u?(q=goog.node.FLAGS.parseSingleBooleanFlag_(b),p=q.flag,q=q.flagValue,b=e):y?(p=b,q=e):(console.error("Invalid command line flag "+b+" "+e),goog.node.FLAGS.printHelp(),process.exit(1)):b=e;d==m.length-1&&b&&y&&!p&&(q=goog.node.FLAGS.parseSingleBooleanFlag_(b),
p=q.flag,q=q.flagValue);p&&q&&(p=p.slice(2),p in goog.node.FLAGS.definedFlags_?(goog.node.FLAGS.definedFlags_[p].parseValue(q),b=null):(console.error("Unknown flag "+p),goog.node.FLAGS.printHelp(),process.exit(1)))}});for(var e in goog.node.FLAGS.definedFlags_){var d=goog.node.FLAGS.definedFlags_[e];d.isRequired()&&!goog.isDef(d.value)&&(console.error("Flag "+e+" is required but not provided.\n"),goog.node.FLAGS.printHelp(),process.exit(1))}};
goog.node.FLAGS.parseSingleBooleanFlag_=function(b){b=b.slice(2);var e="true";!(b in goog.node.FLAGS.definedFlags_)&&"no"==b.slice(0,2)&&b.slice(2)in goog.node.FLAGS.definedFlags_&&(b=b.slice(2),e="false");return{flag:"--"+b,flagValue:e}};
goog.node.FLAGS.printHelp=function(){var b="Flags:\n",e;for(e in goog.node.FLAGS.definedFlags_){var d=goog.node.FLAGS.definedFlags_[e],b=b+("  --"+d.name+": "+d.description),f=d.getTypeHelp();f&&(b+="\n    "+f);b=d.isRequired()?b+"\n    (required)\n":b+("\n    (default: '"+d.defaultValue+"')\n")}process.stdout.write(b+"\n")};var glslunit={compiler:{}};glslunit.compiler.NameGenerator=function(){this.renameMap_={};this.usedKeys_={};this.nextDefinitionIndex=this.nextNameIndex=0};glslunit.compiler.NameGenerator.leadingCharacters_="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";glslunit.compiler.NameGenerator.trailingCharacters_=glslunit.compiler.NameGenerator.leadingCharacters_+"1234567890";
glslunit.compiler.NameGenerator.getShortName=function(b){var e=glslunit.compiler.NameGenerator.leadingCharacters_.length,d=glslunit.compiler.NameGenerator.trailingCharacters_.length,f=glslunit.compiler.NameGenerator.leadingCharacters_[b%e];for(b=Math.floor(b/e);0<b;)--b,f+=glslunit.compiler.NameGenerator.trailingCharacters_[b%d],b=Math.floor(b/d);return f};glslunit.compiler.NameGenerator.getShortDef=function(b){return"_"+glslunit.compiler.NameGenerator.getShortName(b)};
glslunit.compiler.NameGenerator.prototype.shortenSymbol=function(b){if(this.renameMap_[b])return this.renameMap_[b];for(var e=null;!e||e in this.usedKeys_;)e=glslunit.compiler.NameGenerator.getShortName(this.nextNameIndex++);this.usedKeys_[e]=!0;return this.renameMap_[b]=e};glslunit.compiler.NameGenerator.prototype.getNextShortDefinition=function(){return glslunit.compiler.NameGenerator.getShortDef(this.nextDefinitionIndex++)};
glslunit.compiler.NameGenerator.prototype.getShortSymbol=function(b){return this.renameMap_[b]||b};glslunit.compiler.NameGenerator.prototype.getNextNameIndex=function(){return this.nextNameIndex};glslunit.compiler.NameGenerator.prototype.clone=function(){var b=new glslunit.compiler.NameGenerator;b.renameMap_=goog.object.clone(this.renameMap_);b.usedKeys_=goog.object.clone(this.usedKeys_);b.nextNameIndex=this.nextNameIndex;b.nextDefinitionIndex=this.nextDefinitionIndex;return b};glslunit.glsl={};glslunit.glsl.parser={};
glslunit.glsl.parser.parse=function(b,e){function d(c){var a=c.charCodeAt(0),b;255>=a?(c="x",b=2):(c="u",b=4);c="\\"+c;var h=a.toString(16).toUpperCase(),a=h;b-=h.length;for(h=0;h<b;h++)a="0"+a;return c+a}function f(c){return'"'+c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,d)+'"'}function g(b){c<P||(c>P&&(P=c,za=[]),za.push(b))}function m(){var e=
"newLine@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l;l=c;/^[\n]/.test(b.charAt(c))?(a=b.charAt(c),c++):(a=null,0===k&&g("[\\n]"));null!==a&&(a="\n");null===a&&(c=l);n[e]={nextPos:c,result:a};return a}function p(){var e="EOF@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l;l=c;k++;b.length>c?(a=b.charAt(c),c++):(a=null,0===k&&g("any character"));k--;null===a?a="":(a=null,c=l);n[e]={nextPos:c,result:a};return a}function q(){var e="_@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l;k++;l=m();
null===l&&(/^[\\\n]/.test(b.charAt(c))?(l=b.charAt(c),c++):(l=null,0===k&&g("[\\\\\\n]")),null===l&&(/^[\r\t\f\x0B ]/.test(b.charAt(c))?(l=b.charAt(c),c++):(l=null,0===k&&g("[\\r\\t\\f\\x0B ]")),null===l&&(l=H())));if(null!==l)for(a=[];null!==l;)a.push(l),l=m(),null===l&&(/^[\\\n]/.test(b.charAt(c))?(l=b.charAt(c),c++):(l=null,0===k&&g("[\\\\\\n]")),null===l&&(/^[\r\t\f\x0B ]/.test(b.charAt(c))?(l=b.charAt(c),c++):(l=null,0===k&&g("[\\r\\t\\f\\x0B ]")),null===l&&(l=H())));else a=null;k--;0===k&&null===
a&&g("whitespace");n[e]={nextPos:c,result:a};return a}function u(){var e="noNewlineComment@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d,t,f;t=c;"/*"===b.substr(c,2)?(a="/*",c+=2):(a=null,0===k&&g('"/*"'));if(null!==a){l=[];d=f=c;k++;"*/"===b.substr(c,2)?(h="*/",c+=2):(h=null,0===k&&g('"*/"'));k--;null===h?h="":(h=null,c=d);null!==h?(b.length>c?(d=b.charAt(c),c++):(d=null,0===k&&g("any character")),null!==d?h=[h,d]:(h=null,c=f)):(h=null,c=f);for(;null!==h;)l.push(h),d=f=c,k++,"*/"===b.substr(c,
2)?(h="*/",c+=2):(h=null,0===k&&g('"*/"')),k--,null===h?h="":(h=null,c=d),null!==h?(b.length>c?(d=b.charAt(c),c++):(d=null,0===k&&g("any character")),null!==d?h=[h,d]:(h=null,c=f)):(h=null,c=f);null!==l?("*/"===b.substr(c,2)?(h="*/",c+=2):(h=null,0===k&&g('"*/"')),null!==h?a=[a,l,h]:(a=null,c=t)):(a=null,c=t)}else a=null,c=t;if(null===a)if(t=c,"//"===b.substr(c,2)?(a="//",c+=2):(a=null,0===k&&g('"//"')),null!==a){l=[];/^[^\n]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,0===k&&g("[^\\n]"));for(;null!==
h;)l.push(h),/^[^\n]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,0===k&&g("[^\\n]"));null!==l?a=[a,l]:(a=null,c=t)}else a=null,c=t;n[e]={nextPos:c,result:a};return a}function y(){var e="noNewlineWhitespace@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l;/^[\r\t\f\x0B ]/.test(b.charAt(c))?(l=b.charAt(c),c++):(l=null,0===k&&g("[\\r\\t\\f\\x0B ]"));null===l&&(l=u());if(null!==l)for(a=[];null!==l;)a.push(l),/^[\r\t\f\x0B ]/.test(b.charAt(c))?(l=b.charAt(c),c++):(l=null,0===k&&g("[\\r\\t\\f\\x0B ]")),
null===l&&(l=u());else a=null;n[e]={nextPos:c,result:a};return a}function H(){var e="comment@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d,t,f;k++;t=c;"/*"===b.substr(c,2)?(a="/*",c+=2):(a=null,0===k&&g('"/*"'));if(null!==a){l=[];d=f=c;k++;"*/"===b.substr(c,2)?(h="*/",c+=2):(h=null,0===k&&g('"*/"'));k--;null===h?h="":(h=null,c=d);null!==h?(b.length>c?(d=b.charAt(c),c++):(d=null,0===k&&g("any character")),null!==d?h=[h,d]:(h=null,c=f)):(h=null,c=f);for(;null!==h;)l.push(h),d=f=c,k++,"*/"===
b.substr(c,2)?(h="*/",c+=2):(h=null,0===k&&g('"*/"')),k--,null===h?h="":(h=null,c=d),null!==h?(b.length>c?(d=b.charAt(c),c++):(d=null,0===k&&g("any character")),null!==d?h=[h,d]:(h=null,c=f)):(h=null,c=f);null!==l?("*/"===b.substr(c,2)?(h="*/",c+=2):(h=null,0===k&&g('"*/"')),null!==h?a=[a,l,h]:(a=null,c=t)):(a=null,c=t)}else a=null,c=t;if(null===a)if(t=c,"//"===b.substr(c,2)?(a="//",c+=2):(a=null,0===k&&g('"//"')),null!==a){l=[];/^[^\n]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,0===k&&g("[^\\n]"));
for(;null!==h;)l.push(h),/^[^\n]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,0===k&&g("[^\\n]"));null!==l?(h=m(),null===h&&(h=p()),null!==h?a=[a,l,h]:(a=null,c=t)):(a=null,c=t)}else a=null,c=t;k--;0===k&&null===a&&g("comment");n[e]={nextPos:c,result:a};return a}function B(){var e="semicolon@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d;d=c;a=q();a=null!==a?a:"";null!==a?(59===b.charCodeAt(c)?(l=";",c+=1):(l=null,0===k&&g('";"')),null!==l?(h=q(),h=null!==h?h:"",null!==h?a=[a,l,h]:(a=null,
c=d)):(a=null,c=d)):(a=null,c=d);n[e]={nextPos:c,result:a};return a}function v(){var e="comma@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d;d=c;a=q();a=null!==a?a:"";null!==a?(44===b.charCodeAt(c)?(l=",",c+=1):(l=null,0===k&&g('","')),null!==l?(h=q(),h=null!==h?h:"",null!==h?a=[a,l,h]:(a=null,c=d)):(a=null,c=d)):(a=null,c=d);n[e]={nextPos:c,result:a};return a}function D(){var e="left_bracket@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d;d=c;a=q();a=null!==a?a:"";null!==a?(91===b.charCodeAt(c)?
(l="[",c+=1):(l=null,0===k&&g('"["')),null!==l?(h=q(),h=null!==h?h:"",null!==h?a=[a,l,h]:(a=null,c=d)):(a=null,c=d)):(a=null,c=d);n[e]={nextPos:c,result:a};return a}function I(){var e="right_bracket@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d;d=c;a=q();a=null!==a?a:"";null!==a?(93===b.charCodeAt(c)?(l="]",c+=1):(l=null,0===k&&g('"]"')),null!==l?(h=q(),h=null!==h?h:"",null!==h?a=[a,l,h]:(a=null,c=d)):(a=null,c=d)):(a=null,c=d);n[e]={nextPos:c,result:a};return a}function eb(){var e="equals@"+
c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d;d=c;a=q();a=null!==a?a:"";null!==a?(61===b.charCodeAt(c)?(l="=",c+=1):(l=null,0===k&&g('"="')),null!==l?(h=q(),h=null!==h?h:"",null!==h?a=[a,l,h]:(a=null,c=d)):(a=null,c=d)):(a=null,c=d);n[e]={nextPos:c,result:a};return a}function K(){var e="left_paren@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d;d=c;a=q();a=null!==a?a:"";null!==a?(40===b.charCodeAt(c)?(l="(",c+=1):(l=null,0===k&&g('"("')),null!==l?(h=q(),h=null!==h?h:"",null!==h?a=[a,l,
h]:(a=null,c=d)):(a=null,c=d)):(a=null,c=d);n[e]={nextPos:c,result:a};return a}function F(){var e="right_paren@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d;d=c;a=q();a=null!==a?a:"";null!==a?(41===b.charCodeAt(c)?(l=")",c+=1):(l=null,0===k&&g('")"')),null!==l?(h=q(),h=null!==h?h:"",null!==h?a=[a,l,h]:(a=null,c=d)):(a=null,c=d)):(a=null,c=d);n[e]={nextPos:c,result:a};return a}function wa(){var e="left_brace@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d;d=c;a=q();a=null!==a?a:"";null!==
a?(123===b.charCodeAt(c)?(l="{",c+=1):(l=null,0===k&&g('"{"')),null!==l?(h=q(),h=null!==h?h:"",null!==h?a=[a,l,h]:(a=null,c=d)):(a=null,c=d)):(a=null,c=d);n[e]={nextPos:c,result:a};return a}function xa(){var e="right_brace@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d;d=c;a=q();a=null!==a?a:"";null!==a?(125===b.charCodeAt(c)?(l="}",c+=1):(l=null,0===k&&g('"}"')),null!==l?(h=q(),h=null!==h?h:"",null!==h?a=[a,l,h]:(a=null,c=d)):(a=null,c=d)):(a=null,c=d);n[e]={nextPos:c,result:a};return a}function L(){var b=
"external_statement_list@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var l,h,a=c;l=[];for(h=ya();null!==h;)l.push(h),h=ya();if(null!==l){h=new w({type:"root",statements:[]});for(var e=0;e<l.length;e++)l[e]&&(h.statements=h.statements.concat(l[e]));l=h}null===l&&(c=a);n[b]={nextPos:c,result:l};return l}function ya(){var b="external_statement@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var l;l=c;a=fb();null===a&&(a=gb());null===a&&(c=l);null===a&&(l=c,a=q(),null!==a&&(a=""),null===a&&(c=l));n[b]={nextPos:c,
result:a};return a}function gb(){var b="external_declaration@"+c,a=n[b];if(a)return c=a.nextPos,a.result;a=hb();null===a&&(a=ib(),null===a&&(a=Aa(),null===a&&(a=Ba(),null===a&&(a=jb(),null===a&&(a=ba())))));n[b]={nextPos:c,result:a};return a}function Ba(){var e="preprocessor_operator@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d,t,f,z,A;z=f=c;35===b.charCodeAt(c)?(a="#",c+=1):(a=null,0===k&&g('"#"'));if(null!==a)if("undef"===b.substr(c,5)?(l="undef",c+=5):(l=null,0===k&&g('"undef"')),null===
l&&("pragma"===b.substr(c,6)?(l="pragma",c+=6):(l=null,0===k&&g('"pragma"')),null===l&&("version"===b.substr(c,7)?(l="version",c+=7):(l=null,0===k&&g('"version"')),null===l&&("error"===b.substr(c,5)?(l="error",c+=5):(l=null,0===k&&g('"error"')),null===l&&("extension"===b.substr(c,9)?(l="extension",c+=9):(l=null,0===k&&g('"extension"')),null===l&&("line"===b.substr(c,4)?(l="line",c+=4):(l=null,0===k&&g('"line"'))))))),null!==l)if(h=q(),null!==h){A=c;d=[];/^[^\n]/.test(b.charAt(c))?(t=b.charAt(c),c++):
(t=null,0===k&&g("[^\\n]"));for(;null!==t;)d.push(t),/^[^\n]/.test(b.charAt(c))?(t=b.charAt(c),c++):(t=null,0===k&&g("[^\\n]"));null!==d&&(d=d.join(""));null===d&&(c=A);null!==d?(t=m(),null===t&&(t=p()),null!==t?a=[a,l,h,d,t]:(a=null,c=z)):(a=null,c=z)}else a=null,c=z;else a=null,c=z;else a=null,c=z;null!==a&&(a=new w({type:"preprocessor",directive:"#"+a[1],value:a[3]}));null===a&&(c=f);n[e]={nextPos:c,result:a};return a}function M(){var e="macro_identifier@"+c,a=n[e];if(a)return c=a.nextPos,a.result;
var l,h,d,t;t=d=c;/^[A-Za-z_]/.test(b.charAt(c))?(a=b.charAt(c),c++):(a=null,0===k&&g("[A-Za-z_]"));if(null!==a){l=[];/^[A-Za-z_0-9]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,0===k&&g("[A-Za-z_0-9]"));for(;null!==h;)l.push(h),/^[A-Za-z_0-9]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,0===k&&g("[A-Za-z_0-9]"));null!==l?a=[a,l]:(a=null,c=t)}else a=null,c=t;null!==a&&(a=new w({type:"identifier",name:a[0]+a[1].join("")}));null===a&&(c=d);n[e]={nextPos:c,result:a};return a}function kb(){var e=
"preprocessor_parameter_list@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d,t,f,z,m;z=f=c;40===b.charCodeAt(c)?(a="(",c+=1):(a=null,0===k&&g('"("'));if(null!==a)if(l=M(),l=null!==l?l:"",null!==l){h=[];m=c;d=v();null!==d?(t=M(),null!==t?d=[d,t]:(d=null,c=m)):(d=null,c=m);for(;null!==d;)h.push(d),m=c,d=v(),null!==d?(t=M(),null!==t?d=[d,t]:(d=null,c=m)):(d=null,c=m);null!==h?(d=F(),null!==d?a=[a,l,h,d]:(a=null,c=z)):(a=null,c=z)}else a=null,c=z;else a=null,c=z;null!==a&&(a=function(a,c){return a?
[a].concat(c.map(function(a){return a[1]})):[]}(a[1],a[2]));null===a&&(c=f);n[e]={nextPos:c,result:a};return a}function Ca(){var e="macro_paren_parameter@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d,t,f,z,m,r;z=f=c;a=K();if(null!==a){r=m=c;l=[];/^[^()]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,0===k&&g("[^()]"));for(;null!==h;)l.push(h),/^[^()]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,0===k&&g("[^()]"));if(null!==l)if(h=Ca(),h=null!==h?h:"",null!==h){d=[];/^[^()]/.test(b.charAt(c))?
(t=b.charAt(c),c++):(t=null,0===k&&g("[^()]"));for(;null!==t;)d.push(t),/^[^()]/.test(b.charAt(c))?(t=b.charAt(c),c++):(t=null,0===k&&g("[^()]"));null!==d?l=[l,h,d]:(l=null,c=r)}else l=null,c=r;else l=null,c=r;null!==l&&(h=l[1],d=l[2],l=l[0].join("")+h+d.join(""));null===l&&(c=m);null!==l?(h=F(),null!==h?a=[a,l,h]:(a=null,c=z)):(a=null,c=z)}else a=null,c=z;null!==a&&(a="("+a[1]+")");null===a&&(c=f);n[e]={nextPos:c,result:a};return a}function ca(){var e="macro_call_parameter@"+c,a=n[e];if(a)return c=
a.nextPos,a.result;var l,h,a=Ca();if(null===a){h=c;a=[];/^[^,)]/.test(b.charAt(c))?(l=b.charAt(c),c++):(l=null,0===k&&g("[^,)]"));for(;null!==l;)a.push(l),/^[^,)]/.test(b.charAt(c))?(l=b.charAt(c),c++):(l=null,0===k&&g("[^,)]"));null!==a&&(a=a.join(""));null===a&&(c=h)}n[e]={nextPos:c,result:a};return a}function ba(){var e="macro_call@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d,t,f,z;z=a=c;l=M();null!==l?(h=q(),h=null!==h?h:"",null!==h?(d=K(),null!==d?(t=Da(),t=null!==t?t:"",null!==t?(41===
b.charCodeAt(c)?(f=")",c+=1):(f=null,0===k&&g('")"')),null!==f?l=[l,h,d,t,f]:(l=null,c=z)):(l=null,c=z)):(l=null,c=z)):(l=null,c=z)):(l=null,c=z);null!==l&&(h=l[3],l=new w({type:"macro_call",macro_name:l[0],parameters:h}),h||(l.parameters=[]));null===l&&(c=a);n[e]={nextPos:c,result:l};return l}function Aa(){var e="preprocessor_define@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d,t,f,z,A,r,v,u,y;u=v=c;35===b.charCodeAt(c)?(a="#",c+=1):(a=null,0===k&&g('"#"'));if(null!==a)if(l=q(),l=null!==
l?l:"",null!==l)if("define"===b.substr(c,6)?(h="define",c+=6):(h=null,0===k&&g('"define"')),null!==h)if(d=q(),null!==d)if(t=M(),null!==t)if(f=kb(),f=null!==f?f:"",null!==f){z=[];/^[ \t]/.test(b.charAt(c))?(A=b.charAt(c),c++):(A=null,0===k&&g("[ \\t]"));for(;null!==A;)z.push(A),/^[ \t]/.test(b.charAt(c))?(A=b.charAt(c),c++):(A=null,0===k&&g("[ \\t]"));if(null!==z){y=c;A=[];/^[^\n]/.test(b.charAt(c))?(r=b.charAt(c),c++):(r=null,0===k&&g("[^\\n]"));for(;null!==r;)A.push(r),/^[^\n]/.test(b.charAt(c))?
(r=b.charAt(c),c++):(r=null,0===k&&g("[^\\n]"));null!==A&&(A=A.join(""));null===A&&(c=y);null!==A?(r=m(),null===r&&(r=p()),null!==r?a=[a,l,h,d,t,f,z,A,r]:(a=null,c=u)):(a=null,c=u)}else a=null,c=u}else a=null,c=u;else a=null,c=u;else a=null,c=u;else a=null,c=u;else a=null,c=u;else a=null,c=u;null!==a&&(a=new w({type:"preprocessor",directive:"#define",identifier:a[4].name,token_string:a[7],parameters:a[5]||null}));null===a&&(c=v);n[e]={nextPos:c,result:a};return a}function Ea(){var e="preprocessor_if@"+
c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d,t,f,z,A,r;A=z=c;35===b.charCodeAt(c)?(a="#",c+=1):(a=null,0===k&&g('"#"'));if(null!==a)if(l=q(),l=null!==l?l:"",null!==l)if("ifdef"===b.substr(c,5)?(h="ifdef",c+=5):(h=null,0===k&&g('"ifdef"')),null===h&&("ifndef"===b.substr(c,6)?(h="ifndef",c+=6):(h=null,0===k&&g('"ifndef"')),null===h&&("if"===b.substr(c,2)?(h="if",c+=2):(h=null,0===k&&g('"if"')))),null!==h)if(d=q(),null!==d){r=c;t=[];/^[^\n]/.test(b.charAt(c))?(f=b.charAt(c),c++):(f=null,0===k&&
g("[^\\n]"));for(;null!==f;)t.push(f),/^[^\n]/.test(b.charAt(c))?(f=b.charAt(c),c++):(f=null,0===k&&g("[^\\n]"));null!==t&&(t=t.join(""));null===t&&(c=r);null!==t?(f=m(),null===f&&(f=p()),null!==f?a=[a,l,h,d,t,f]:(a=null,c=A)):(a=null,c=A)}else a=null,c=A;else a=null,c=A;else a=null,c=A;else a=null,c=A;null!==a&&(a=new w({type:"preprocessor",directive:"#"+a[2],value:a[4]}));null===a&&(c=z);n[e]={nextPos:c,result:a};return a}function Q(){var e="preprocessor_else_if@"+c,a=n[e];if(a)return c=a.nextPos,
a.result;var l,h,d,t,f,z,A,r;A=z=c;35===b.charCodeAt(c)?(a="#",c+=1):(a=null,0===k&&g('"#"'));if(null!==a)if(l=q(),l=null!==l?l:"",null!==l)if("elif"===b.substr(c,4)?(h="elif",c+=4):(h=null,0===k&&g('"elif"')),null!==h)if(d=q(),null!==d){r=c;t=[];/^[^\n]/.test(b.charAt(c))?(f=b.charAt(c),c++):(f=null,0===k&&g("[^\\n]"));for(;null!==f;)t.push(f),/^[^\n]/.test(b.charAt(c))?(f=b.charAt(c),c++):(f=null,0===k&&g("[^\\n]"));null!==t&&(t=t.join(""));null===t&&(c=r);null!==t?(f=m(),null===f&&(f=p()),null!==
f?a=[a,l,h,d,t,f]:(a=null,c=A)):(a=null,c=A)}else a=null,c=A;else a=null,c=A;else a=null,c=A;else a=null,c=A;null!==a&&(a=new w({type:"preprocessor",directive:"#elif",value:a[4]}));null===a&&(c=z);n[e]={nextPos:c,result:a};return a}function Fa(){var e="preprocessor_else@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d,t,f,z;z=f=c;35===b.charCodeAt(c)?(a="#",c+=1):(a=null,0===k&&g('"#"'));null!==a?(l=q(),l=null!==l?l:"",null!==l?("else"===b.substr(c,4)?(h="else",c+=4):(h=null,0===k&&g('"else"')),
null!==h?(d=y(),d=null!==d?d:"",null!==d?(t=m(),null!==t?a=[a,l,h,d,t]:(a=null,c=z)):(a=null,c=z)):(a=null,c=z)):(a=null,c=z)):(a=null,c=z);null!==a&&(a=new w({type:"preprocessor",directive:"#else"}));null===a&&(c=f);n[e]={nextPos:c,result:a};return a}function Ga(){var e="preprocessor_end@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d,t,f,z;z=c;35===b.charCodeAt(c)?(a="#",c+=1):(a=null,0===k&&g('"#"'));null!==a?(l=q(),l=null!==l?l:"",null!==l?("endif"===b.substr(c,5)?(h="endif",c+=5):(h=null,
0===k&&g('"endif"')),null!==h?(d=y(),d=null!==d?d:"",null!==d?(t=m(),null===t&&(t=p()),null!==t?(f=q(),f=null!==f?f:"",null!==f?a=[a,l,h,d,t,f]:(a=null,c=z)):(a=null,c=z)):(a=null,c=z)):(a=null,c=z)):(a=null,c=z)):(a=null,c=z);n[e]={nextPos:c,result:a};return a}function fb(){var b="preprocessor_external_branch@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var l,h,e,d,g,f;f=g=d=c;a=Ea();null!==a?(l=L(),null!==l?a=[a,l]:(a=null,c=f)):(a=null,c=f);if(null!==a){l=[];f=c;h=Q();null!==h?(e=L(),null!==e?h=
[h,e]:(h=null,c=f)):(h=null,c=f);for(;null!==h;)l.push(h),f=c,h=Q(),null!==h?(e=L(),null!==e?h=[h,e]:(h=null,c=f)):(h=null,c=f);null!==l?(f=c,h=Fa(),null!==h?(e=L(),null!==e?h=[h,e]:(h=null,c=f)):(h=null,c=f),h=null!==h?h:"",null!==h?(e=Ga(),null!==e?a=[a,l,h,e]:(a=null,c=g)):(a=null,c=g)):(a=null,c=g)}else a=null,c=g;null!==a&&(a=lb(a[0],a[1],a[2]));null===a&&(c=d);n[b]={nextPos:c,result:a};return a}function Ha(){var b="preprocessor_statement_branch@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var l,
h,e,d,g,f;f=g=d=c;a=Ea();null!==a?(l=N(),null!==l?a=[a,l]:(a=null,c=f)):(a=null,c=f);if(null!==a){l=[];f=c;h=Q();null!==h?(e=N(),null!==e?h=[h,e]:(h=null,c=f)):(h=null,c=f);for(;null!==h;)l.push(h),f=c,h=Q(),null!==h?(e=N(),null!==e?h=[h,e]:(h=null,c=f)):(h=null,c=f);null!==l?(f=c,h=Fa(),null!==h?(e=N(),null!==e?h=[h,e]:(h=null,c=f)):(h=null,c=f),h=null!==h?h:"",null!==h?(e=Ga(),null!==e?a=[a,l,h,e]:(a=null,c=g)):(a=null,c=g)):(a=null,c=g)}else a=null,c=g;null!==a&&(a=lb(a[0],a[1],a[2]));null===a&&
(c=d);n[b]={nextPos:c,result:a};return a}function hb(){var b="function_definition@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var l,h,e;e=h=c;a=Ia();null!==a?(l=da(),null!==l?a=[a,l]:(a=null,c=e)):(a=null,c=e);null!==a&&(l=a[0],a=C=new w({type:"function_declaration",name:l.name,returnType:l.returnType,parameters:l.parameters,body:a[1]}));null===a&&(c=h);n[b]={nextPos:c,result:a};return a}function da(){var b="compound_statement@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var l,h,e,d;d=a=c;l=wa();null!==
l?(h=N(),h=null!==h?h:"",null!==h?(e=xa(),null!==e?l=[l,h,e]:(l=null,c=d)):(l=null,c=d)):(l=null,c=d);null!==l&&(l=l[1],C=new w({type:"scope",statements:[]}),l&&l.statements&&(C.statements=l.statements),l=C);null===l&&(c=a);n[b]={nextPos:c,result:l};return l}function N(){var b="statement_list@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var l,h,e,d;d=e=c;a=q();a=null!==a?a:"";if(null!==a){l=[];for(h=R();null!==h;)l.push(h),h=R();null!==l?(h=q(),h=null!==h?h:"",null!==h?a=[a,l,h]:(a=null,c=d)):(a=null,
c=d)}else a=null,c=d;null!==a&&(a={statements:a[1]});null===a&&(c=e);n[b]={nextPos:c,result:a};return a}function R(){var b="statement_no_new_scope@"+c,a=n[b];if(a)return c=a.nextPos,a.result;a=da();null===a&&(a=Ja(),null===a&&(a=Ha()));n[b]={nextPos:c,result:a};return a}function ea(){var b="statement_with_scope@"+c,a=n[b];if(a)return c=a.nextPos,a.result;a=da();null===a&&(a=Ja(),null===a&&(a=Ha()));n[b]={nextPos:c,result:a};return a}function Ja(){var b="simple_statement@"+c,a=n[b];if(a)return c=a.nextPos,
a.result;var l;l=c;a=fa();null===a&&(a=Ka(),null===a&&(a=mb(),null===a&&(a=nb(),null===a&&(a=ob(),null===a&&(a=Aa(),null===a&&(a=Ba(),null===a&&(a=ba())))))));null===a&&(c=l);n[b]={nextPos:c,result:a};return a}function mb(){var e="selection_statement@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d,f,x,m,A,r,p,u;p=r=c;"if"===b.substr(c,2)?(a="if",c+=2):(a=null,0===k&&g('"if"'));null!==a?(l=K(),null!==l?(h=G(),null!==h?(d=F(),null!==d?(f=ea(),null!==f?(u=c,"else"===b.substr(c,4)?(x="else",c+=
4):(x=null,0===k&&g('"else"')),null!==x?(m=q(),m=null!==m?m:"",null!==m?(A=ea(),null!==A?x=[x,m,A]:(x=null,c=u)):(x=null,c=u)):(x=null,c=u),x=null!==x?x:"",null!==x?a=[a,l,h,d,f,x]:(a=null,c=p)):(a=null,c=p)):(a=null,c=p)):(a=null,c=p)):(a=null,c=p)):(a=null,c=p);null!==a&&(l=a[5],C=new w({type:"if_statement",condition:a[2],body:a[4]}),l&&(C.elseBody=l[2]),a=C);null===a&&(c=r);n[e]={nextPos:c,result:a};return a}function pb(){var e="for_loop@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d,f,
x,m,q,r,p;p=r=c;"for"===b.substr(c,3)?(a="for",c+=3):(a=null,0===k&&g('"for"'));null!==a?(l=K(),null!==l?(h=Ka(),null===h&&(h=fa()),null!==h?(d=La(),d=null!==d?d:"",null!==d?(f=B(),null!==f?(x=G(),x=null!==x?x:"",null!==x?(m=F(),null!==m?(q=R(),null!==q?a=[a,l,h,d,f,x,m,q]:(a=null,c=p)):(a=null,c=p)):(a=null,c=p)):(a=null,c=p)):(a=null,c=p)):(a=null,c=p)):(a=null,c=p)):(a=null,c=p);null!==a&&(a=new w({type:"for_statement",initializer:a[2],condition:a[3],increment:a[5],body:a[7]}));null===a&&(c=r);
n[e]={nextPos:c,result:a};return a}function Ma(){var e="while_statement@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d,f,x;x=f=c;"while"===b.substr(c,5)?(a="while",c+=5):(a=null,0===k&&g('"while"'));null!==a?(l=K(),null!==l?(h=La(),null!==h?(d=F(),null!==d?a=[a,l,h,d]:(a=null,c=x)):(a=null,c=x)):(a=null,c=x)):(a=null,c=x);null!==a&&(a={condition:a[2]});null===a&&(c=f);n[e]={nextPos:c,result:a};return a}function qb(){var b="while_loop@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var l,h,e;e=
h=c;a=Ma();null!==a?(l=R(),null!==l?a=[a,l]:(a=null,c=e)):(a=null,c=e);null!==a&&(a=new w({type:"while_statement",condition:a[0].condition,body:a[1]}));null===a&&(c=h);n[b]={nextPos:c,result:a};return a}function rb(){var e="do_while@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d,f;f=d=c;"do"===b.substr(c,2)?(a="do",c+=2):(a=null,0===k&&g('"do"'));null!==a?(l=ea(),null!==l?(h=Ma(),null!==h?a=[a,l,h]:(a=null,c=f)):(a=null,c=f)):(a=null,c=f);null!==a&&(a=new w({type:"do_statement",condition:a[2].condition,
body:a[1]}));null===a&&(c=d);n[e]={nextPos:c,result:a};return a}function nb(){var b="iteration_statement@"+c,a=n[b];if(a)return c=a.nextPos,a.result;a=qb();null===a&&(a=rb(),null===a&&(a=pb()));n[b]={nextPos:c,result:a};return a}function ob(){var e="jump_statement@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d,f,x;x=f=c;"return"===b.substr(c,6)?(a="return",c+=6):(a=null,0===k&&g('"return"'));null!==a?(l=q(),l=null!==l?l:"",null!==l?(h=G(),null!==h?(d=B(),null!==d?a=[a,l,h,d]:(a=null,c=x)):
(a=null,c=x)):(a=null,c=x)):(a=null,c=x);null!==a&&(a=new w({type:"return",value:a[2]}));null===a&&(c=f);null===a&&(x=f=c,"continue"===b.substr(c,8)?(a="continue",c+=8):(a=null,0===k&&g('"continue"')),null!==a?(l=B(),null!==l?a=[a,l]:(a=null,c=x)):(a=null,c=x),null===a&&(x=c,"break"===b.substr(c,5)?(a="break",c+=5):(a=null,0===k&&g('"break"')),null!==a?(l=B(),null!==l?a=[a,l]:(a=null,c=x)):(a=null,c=x),null===a&&(x=c,"return"===b.substr(c,6)?(a="return",c+=6):(a=null,0===k&&g('"return"')),null!==
a?(l=B(),null!==l?a=[a,l]:(a=null,c=x)):(a=null,c=x),null===a&&(d=h=x=c,a="fs"==S?"":null,null!==a?("discard"===b.substr(c,7)?(l="discard",c+=7):(l=null,0===k&&g('"discard"')),null!==l?a=[a,l]:(a=null,c=d)):(a=null,c=d),null!==a&&(a="discard"),null===a&&(c=h),null!==a?(l=B(),null!==l?a=[a,l]:(a=null,c=x)):(a=null,c=x)))),null!==a&&(a=new w({type:a[0]})),null===a&&(c=f));n[e]={nextPos:c,result:a};return a}function Ka(){var b="expression_statement@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var l,h,
e;e=h=c;a=G();a=null!==a?a:"";null!==a?(l=B(),null!==l?a=[a,l]:(a=null,c=e)):(a=null,c=e);null!==a&&(a=new w({type:"expression",expression:a[0]}));null===a&&(c=h);n[b]={nextPos:c,result:a};return a}function fa(){var e="declaration@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d,f,x,m,p,r,u;k++;r=p=c;a=Ia();null!==a?(l=B(),null!==l?a=[a,l]:(a=null,c=r)):(a=null,c=r);null!==a&&(a=a[0]);null===a&&(c=p);if(null===a&&(r=p=c,a=T(),null!==a?(l=q(),null!==l?(h=Na(),null!==h?(d=B(),null!==d?a=[a,l,h,
d]:(a=null,c=r)):(a=null,c=r)):(a=null,c=r)):(a=null,c=r),null!==a&&(a=new w({type:"declarator",typeAttribute:a[0],declarators:a[2]})),null===a&&(c=p),null===a)){r=p=c;a="vs"==S?"":null;if(null!==a)if("invariant"===b.substr(c,9)?(l="invariant",c+=9):(l=null,0===k&&g('"invariant"')),null!==l)if(h=q(),null!==h)if(d=E(),null!==d){f=[];u=c;x=v();null!==x?(m=E(),null!==m?x=[x,m]:(x=null,c=u)):(x=null,c=u);for(;null!==x;)f.push(x),u=c,x=v(),null!==x?(m=E(),null!==m?x=[x,m]:(x=null,c=u)):(x=null,c=u);null!==
f?(x=B(),null!==x?a=[a,l,h,d,f,x]:(a=null,c=r)):(a=null,c=r)}else a=null,c=r;else a=null,c=r;else a=null,c=r;else a=null,c=r;null!==a&&(a=function(a,c){var b=[a].concat(c.map(function(a){return a[1]}));return new w({type:"invariant",identifiers:b})}(a[3],a[4]));null===a&&(c=p);null===a&&(r=p=c,"precision"===b.substr(c,9)?(a="precision",c+=9):(a=null,0===k&&g('"precision"')),null!==a?(l=q(),null!==l?(h=ga(),null!==h?(d=q(),null!==d?(f=U(),null!==f?(x=B(),null!==x?a=[a,l,h,d,f,x]:(a=null,c=r)):(a=null,
c=r)):(a=null,c=r)):(a=null,c=r)):(a=null,c=r)):(a=null,c=r),null!==a&&(a=new w({type:"precision",precision:a[2],typeName:a[4]})),null===a&&(c=p))}k--;0===k&&null===a&&g("declaration");n[e]={nextPos:c,result:a};return a}function ib(){var b="global_declaration@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var l,h,e,d,f,a=fa();null===a&&(f=d=c,a=sb(),null!==a?(l=q(),null!==l?(h=Na(),null!==h?(e=B(),null!==e?a=[a,l,h,e]:(a=null,c=f)):(a=null,c=f)):(a=null,c=f)):(a=null,c=f),null!==a&&(a=new w({type:"declarator",
typeAttribute:a[0],declarators:a[2]})),null===a&&(c=d),null===a&&(f=d=c,a=tb(),null!==a?(l=q(),null!==l?(h=ub(),null!==h?(e=B(),null!==e?a=[a,l,h,e]:(a=null,c=f)):(a=null,c=f)):(a=null,c=f)):(a=null,c=f),null!==a&&(a=new w({type:"declarator",typeAttribute:a[0],declarators:a[2]})),null===a&&(c=d)));n[b]={nextPos:c,result:a};return a}function vb(){var e="function_prototype_parameter_list@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d,f,x,m;"void"===b.substr(c,4)?(a="void",c+=4):(a=null,0===k&&
g('"void"'));if(null===a){x=f=c;a=ha();if(null!==a){l=[];m=c;h=v();null!==h?(d=ha(),null!==d?h=[h,d]:(h=null,c=m)):(h=null,c=m);for(;null!==h;)l.push(h),m=c,h=v(),null!==h?(d=ha(),null!==d?h=[h,d]:(h=null,c=m)):(h=null,c=m);null!==l?a=[a,l]:(a=null,c=x)}else a=null,c=x;null!==a&&(a=function(a,c){return[a].concat(c.map(function(a){return a[1]}))}(a[0],a[1]));null===a&&(c=f)}n[e]={nextPos:c,result:a};return a}function Ia(){var b="function_prototype@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var l,
h,e,d,f,g,k;k=g=c;a=wb();null===a&&(a=V());null!==a?(l=q(),null!==l?(h=E(),null!==h?(e=K(),null!==e?(d=vb(),d=null!==d?d:"",null!==d?(f=F(),null!==f?a=[a,l,h,e,d,f]:(a=null,c=k)):(a=null,c=k)):(a=null,c=k)):(a=null,c=k)):(a=null,c=k)):(a=null,c=k);null!==a&&(l=a[4],C=new w({type:"function_prototype",name:a[2].name,returnType:a[0],parameters:l}),"void"!=l&&l||(C.parameters=[]),a=C);null===a&&(c=g);n[b]={nextPos:c,result:a};return a}function xb(){var e="parameter_qualifier@"+c,a=n[e];if(a)return c=
a.nextPos,a.result;"inout"===b.substr(c,5)?(a="inout",c+=5):(a=null,0===k&&g('"inout"'));null===a&&("in"===b.substr(c,2)?(a="in",c+=2):(a=null,0===k&&g('"in"')),null===a&&("out"===b.substr(c,3)?(a="out",c+=3):(a=null,0===k&&g('"out"'))));n[e]={nextPos:c,result:a};return a}function ha(){var b="parameter_declaration@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var l,h,e,d,f,g,k,m,p,u,v;v=u=a=c;l=ia();null!==l?(h=q(),null!==h?l=[l,h]:(l=null,c=v)):(l=null,c=v);l=null!==l?l:"";null!==l?(v=c,h=xb(),null!==
h?(e=q(),null!==e?h=[h,e]:(h=null,c=v)):(h=null,c=v),h=null!==h?h:"",null!==h?(v=c,e=ga(),null!==e?(d=q(),null!==d?e=[e,d]:(e=null,c=v)):(e=null,c=v),e=null!==e?e:"",null!==e?(d=U(),null!==d?(f=q(),null!==f?(g=E(),null!==g?(v=c,k=D(),null!==k?(m=O(),null!==m?(p=I(),null!==p?k=[k,m,p]:(k=null,c=v)):(k=null,c=v)):(k=null,c=v),k=null!==k?k:"",null!==k?l=[l,h,e,d,f,g,k]:(l=null,c=u)):(l=null,c=u)):(l=null,c=u)):(l=null,c=u)):(l=null,c=u)):(l=null,c=u)):(l=null,c=u);null!==l&&(h=l[0],e=l[1],d=l[2],f=l[6],
l=new w({type:"parameter",type_name:l[3],name:l[5].name}),h&&(l.typeQualifier=h[0]),e&&(l.parameterQualifier=e[0]),d&&(l.precision=d[0]),f&&(l.arraySize=f[1]),l=l.typeQualifier&&l.parameterQualifier&&"in"!=l.parameterQualifier?null:l);null===l&&(c=a);n[b]={nextPos:c,result:l};return l}function Na(){var b="init_declarator_list@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,h,d,f,g,k;g=f=c;a=ja();if(null!==a){e=[];k=c;h=v();null!==h?(d=ja(),null!==d?h=[h,d]:(h=null,c=k)):(h=null,c=k);for(;null!==
h;)e.push(h),k=c,h=v(),null!==h?(d=ja(),null!==d?h=[h,d]:(h=null,c=k)):(h=null,c=k);null!==e?a=[a,e]:(a=null,c=g)}else a=null,c=g;null!==a&&(a=function(a,c){return[a].concat(c.map(function(a){return a[1]}))}(a[0],a[1]));null===a&&(c=f);n[b]={nextPos:c,result:a};return a}function yb(){var b="declarator_list@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,h,d,f,g,k;g=f=c;a=W();if(null!==a){e=[];k=c;h=v();null!==h?(d=W(),null!==d?h=[h,d]:(h=null,c=k)):(h=null,c=k);for(;null!==h;)e.push(h),k=c,h=v(),
null!==h?(d=W(),null!==d?h=[h,d]:(h=null,c=k)):(h=null,c=k);null!==e?a=[a,e]:(a=null,c=g)}else a=null,c=g;null!==a&&(a=function(a,c){return[a].concat(c.map(function(a){return a[1]}))}(a[0],a[1]));null===a&&(c=f);n[b]={nextPos:c,result:a};return a}function ub(){var b="declarator_list_no_array@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,h,d,f,g,k;g=f=c;a=X();if(null!==a){e=[];k=c;h=v();null!==h?(d=X(),null!==d?h=[h,d]:(h=null,c=k)):(h=null,c=k);for(;null!==h;)e.push(h),k=c,h=v(),null!==h?(d=X(),
null!==d?h=[h,d]:(h=null,c=k)):(h=null,c=k);null!==e?a=[a,e]:(a=null,c=g)}else a=null,c=g;null!==a&&(a=function(a,c){return[a].concat(c.map(function(a){return a[1]}))}(a[0],a[1]));null===a&&(c=f);n[b]={nextPos:c,result:a};return a}function Oa(){var b="declarator_list_arrays_have_size@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,h,d,f,g,k;g=f=c;a=Y();if(null!==a){e=[];k=c;h=v();null!==h?(d=Y(),null!==d?h=[h,d]:(h=null,c=k)):(h=null,c=k);for(;null!==h;)e.push(h),k=c,h=v(),null!==h?(d=Y(),null!==
d?h=[h,d]:(h=null,c=k)):(h=null,c=k);null!==e?a=[a,e]:(a=null,c=g)}else a=null,c=g;null!==a&&(a=function(a,c){return[a].concat(c.map(function(a){return a[1]}))}(a[0],a[1]));null===a&&(c=f);n[b]={nextPos:c,result:a};return a}function X(){var b="declarator_no_array@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e;e=c;a=E();null!==a&&(a=new w({type:"declarator_item",name:a}));null===a&&(c=e);n[b]={nextPos:c,result:a};return a}function Y(){var b="declarator_array_with_size@"+c,a=n[b];if(a)return c=a.nextPos,
a.result;var e,h,d,f,g;g=f=c;a=E();null!==a?(e=D(),null!==e?(h=O(),null!==h?(d=I(),null!==d?a=[a,e,h,d]:(a=null,c=g)):(a=null,c=g)):(a=null,c=g)):(a=null,c=g);null!==a&&(a=new w({type:"declarator_item",name:a[0],arraySize:a[2],isArray:!0}));null===a&&(c=f);null===a&&(a=X());n[b]={nextPos:c,result:a};return a}function W(){var b="declarator@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,h,d,f;f=d=c;a=E();null!==a?(e=D(),null!==e?(h=I(),null!==h?a=[a,e,h]:(a=null,c=f)):(a=null,c=f)):(a=null,c=f);
null!==a&&(a=new w({type:"declarator_item",name:a[0],isArray:!0}));null===a&&(c=d);null===a&&(a=Y());n[b]={nextPos:c,result:a};return a}function ja(){var b="init_declarator@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,h,d,f;f=d=c;a=E();null!==a?(e=eb(),null!==e?(h=O(),null!==h?a=[a,e,h]:(a=null,c=f)):(a=null,c=f)):(a=null,c=f);null!==a&&(a=new w({type:"declarator_item",name:a[0],initializer:a[2]}));null===a&&(c=d);null===a&&(a=W());n[b]={nextPos:c,result:a};return a}function zb(){var b="member_list@"+
c,a=n[b];if(a)return c=a.nextPos,a.result;var e,h,d,f,g,k;k=g=c;e=T();null!==e?(h=q(),null!==h?(d=Oa(),null!==d?(f=B(),null!==f?e=[e,h,d,f]:(e=null,c=k)):(e=null,c=k)):(e=null,c=k)):(e=null,c=k);if(null!==e)for(a=[];null!==e;)a.push(e),k=c,e=T(),null!==e?(h=q(),null!==h?(d=Oa(),null!==d?(f=B(),null!==f?e=[e,h,d,f]:(e=null,c=k)):(e=null,c=k)):(e=null,c=k)):(e=null,c=k);else a=null;null!==a&&(a=function(a){return a.map(function(a){return new w({type:"declarator",typeAttribute:a[0],declarators:a[2]})})}(a));
null===a&&(c=g);n[b]={nextPos:c,result:a};return a}function jb(){var e="struct_definition@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var l,h,d,f,m,p,A,r,u;m=u=a=c;l=Pa();null===l&&(l=Qa());null!==l?(h=q(),null!==h?l=[l,h]:(l=null,c=m)):(l=null,c=m);l=null!==l?l:"";null!==l?("struct"===b.substr(c,6)?(h="struct",c+=6):(h=null,0===k&&g('"struct"')),null!==h?(m=c,d=q(),null!==d?(f=E(),null!==f?d=[d,f]:(d=null,c=m)):(d=null,c=m),d=null!==d?d:"",null!==d?(f=wa(),null!==f?(m=zb(),null!==m?(p=xa(),null!==
p?(A=yb(),A=null!==A?A:"",null!==A?(r=B(),null!==r?l=[l,h,d,f,m,p,A,r]:(l=null,c=u)):(l=null,c=u)):(l=null,c=u)):(l=null,c=u)):(l=null,c=u)):(l=null,c=u)):(l=null,c=u)):(l=null,c=u);null!==l&&(h=l[0],d=l[2],f=l[6],l=new w({type:"struct_definition",members:l[4]}),h&&(l.qualifier=h[0]),d&&(l.name=d[1].name,Ab[l.name]=l),f&&(l.declarators=f));null===l&&(c=a);n[e]={nextPos:c,result:l};return l}function V(){var b="precision_type@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,h,d,f;f=d=a=c;e=ga();null!==
e?(h=q(),null!==h?e=[e,h]:(e=null,c=f)):(e=null,c=f);e=null!==e?e:"";null!==e?(h=U(),null!==h?e=[e,h]:(e=null,c=d)):(e=null,c=d);null!==e&&(h=e[0],e=new w({type:"type",name:e[1]}),h&&(e.precision=h[0]));null===e&&(c=a);n[b]={nextPos:c,result:e};return e}function T(){var b="locally_specified_type@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,h,d,f;k++;f=d=a=c;e=ia();null!==e?(h=q(),null!==h?e=[e,h]:(e=null,c=f)):(e=null,c=f);e=null!==e?e:"";null!==e?(h=V(),null!==h?e=[e,h]:(e=null,c=d)):(e=null,
c=d);null!==e&&(h=e[0],e=e[1],h&&(e.qualifier=h[0]));null===e&&(c=a);k--;0===k&&null===e&&g("locally specified type");n[b]={nextPos:c,result:e};return e}function Qa(){var e="attribute_qualifier@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d,h,f;f=h=c;a="vs"==S?"":null;null!==a?("attribute"===b.substr(c,9)?(d="attribute",c+=9):(d=null,0===k&&g('"attribute"')),null!==d?a=[a,d]:(a=null,c=f)):(a=null,c=f);null!==a&&(a="attribute");null===a&&(c=h);n[e]={nextPos:c,result:a};return a}function tb(){var b=
"attribute_type@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,h,d,f;k++;f=d=c;a=Qa();null!==a?(e=q(),null!==e?(h=V(),null!==h?a=[a,e,h]:(a=null,c=f)):(a=null,c=f)):(a=null,c=f);null!==a&&(e=a[2],e.qualifier=a[0],a=e);null===a&&(c=d);k--;0===k&&null===a&&g("locally specified type");n[b]={nextPos:c,result:a};return a}function sb(){var b="fully_specified_type@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,h,d,f;k++;f=d=a=c;e=Pa();null!==e?(h=q(),null!==h?e=[e,h]:(e=null,c=f)):(e=null,c=f);e=null!==
e?e:"";null!==e?(h=V(),null!==h?e=[e,h]:(e=null,c=d)):(e=null,c=d);null!==e&&(h=e[0],e=e[1],h&&(e.qualifier=h[0]));null===e&&(c=a);k--;0===k&&null===e&&g("fully specified type");n[b]={nextPos:c,result:e};return e}function ga(){var e="precision_qualifier@"+c,a=n[e];if(a)return c=a.nextPos,a.result;k++;"highp"===b.substr(c,5)?(a="highp",c+=5):(a=null,0===k&&g('"highp"'));null===a&&("mediump"===b.substr(c,7)?(a="mediump",c+=7):(a=null,0===k&&g('"mediump"')),null===a&&("lowp"===b.substr(c,4)?(a="lowp",
c+=4):(a=null,0===k&&g('"lowp"'))));k--;0===k&&null===a&&g("precision qualifier");n[e]={nextPos:c,result:a};return a}function ia(){var e="const_qualifier@"+c,a=n[e];if(a)return c=a.nextPos,a.result;"const"===b.substr(c,5)?(a="const",c+=5):(a=null,0===k&&g('"const"'));n[e]={nextPos:c,result:a};return a}function Pa(){var e="type_qualifier@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d,h,f,t;k++;a=ia();null===a&&("varying"===b.substr(c,7)?(a="varying",c+=7):(a=null,0===k&&g('"varying"')),null===a&&
(t=f=c,"invariant"===b.substr(c,9)?(a="invariant",c+=9):(a=null,0===k&&g('"invariant"')),null!==a?(d=q(),null!==d?("varying"===b.substr(c,7)?(h="varying",c+=7):(h=null,0===k&&g('"varying"')),null!==h?a=[a,d,h]:(a=null,c=t)):(a=null,c=t)):(a=null,c=t),null!==a&&(a="invariant varying"),null===a&&(c=f),null===a&&("uniform"===b.substr(c,7)?(a="uniform",c+=7):(a=null,0===k&&g('"uniform"')))));k--;0===k&&null===a&&g("type qualifier");n[e]={nextPos:c,result:a};return a}function wb(){var e="void_type@"+c,
a=n[e];if(a)return c=a.nextPos,a.result;var d;k++;d=c;"void"===b.substr(c,4)?(a="void",c+=4):(a=null,0===k&&g('"void"'));null!==a&&(a=new w({type:"type",name:"void"}));null===a&&(c=d);k--;0===k&&null===a&&g("void");n[e]={nextPos:c,result:a};return a}function U(){var e="type_name@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d;k++;"float"===b.substr(c,5)?(a="float",c+=5):(a=null,0===k&&g('"float"'));null===a&&("int"===b.substr(c,3)?(a="int",c+=3):(a=null,0===k&&g('"int"')),null===a&&("bool"===b.substr(c,
4)?(a="bool",c+=4):(a=null,0===k&&g('"bool"')),null===a&&("sampler2D"===b.substr(c,9)?(a="sampler2D",c+=9):(a=null,0===k&&g('"sampler2D"')),null===a&&("samplerCube"===b.substr(c,11)?(a="samplerCube",c+=11):(a=null,0===k&&g('"samplerCube"')),null===a&&(a=Ra(),null===a&&(a=Sa(),null===a&&(d=c,a=E(),null!==a&&(a=a.name in Ab?a.name:null),null===a&&(c=d))))))));k--;0===k&&null===a&&g("type name");n[e]={nextPos:c,result:a};return a}function E(){var e="identifier@"+c,a=n[e];if(a)return c=a.nextPos,a.result;
var d,h,f,t,m;k++;h=m=t=c;k++;f=c;a=Bb();null!==a?(/^[^A-Za-z_0-9]/.test(b.charAt(c))?(d=b.charAt(c),c++):(d=null,0===k&&g("[^A-Za-z_0-9]")),null!==d?a=[a,d]:(a=null,c=f)):(a=null,c=f);k--;null===a?a="":(a=null,c=h);if(null!==a)if(/^[A-Za-z_]/.test(b.charAt(c))?(d=b.charAt(c),c++):(d=null,0===k&&g("[A-Za-z_]")),null!==d){h=[];/^[A-Za-z_0-9]/.test(b.charAt(c))?(f=b.charAt(c),c++):(f=null,0===k&&g("[A-Za-z_0-9]"));for(;null!==f;)h.push(f),/^[A-Za-z_0-9]/.test(b.charAt(c))?(f=b.charAt(c),c++):(f=null,
0===k&&g("[A-Za-z_0-9]"));null!==h?a=[a,d,h]:(a=null,c=m)}else a=null,c=m;else a=null,c=m;null!==a&&(a=new w({type:"identifier",name:a[1]+a[2].join("")}));null===a&&(c=t);k--;0===k&&null===a&&g("identifier");n[e]={nextPos:c,result:a};return a}function Bb(){var e="keyword@"+c,a=n[e];if(a)return c=a.nextPos,a.result;k++;"attribute"===b.substr(c,9)?(a="attribute",c+=9):(a=null,0===k&&g('"attribute"'));null===a&&("const"===b.substr(c,5)?(a="const",c+=5):(a=null,0===k&&g('"const"')),null===a&&("bool"===
b.substr(c,4)?(a="bool",c+=4):(a=null,0===k&&g('"bool"')),null===a&&("float"===b.substr(c,5)?(a="float",c+=5):(a=null,0===k&&g('"float"')),null===a&&("int"===b.substr(c,3)?(a="int",c+=3):(a=null,0===k&&g('"int"')),null===a&&("break"===b.substr(c,5)?(a="break",c+=5):(a=null,0===k&&g('"break"')),null===a&&("continue"===b.substr(c,8)?(a="continue",c+=8):(a=null,0===k&&g('"continue"')),null===a&&("do"===b.substr(c,2)?(a="do",c+=2):(a=null,0===k&&g('"do"')),null===a&&("else"===b.substr(c,4)?(a="else",
c+=4):(a=null,0===k&&g('"else"')),null===a&&("for"===b.substr(c,3)?(a="for",c+=3):(a=null,0===k&&g('"for"')),null===a&&("if"===b.substr(c,2)?(a="if",c+=2):(a=null,0===k&&g('"if"')),null===a&&("discard"===b.substr(c,7)?(a="discard",c+=7):(a=null,0===k&&g('"discard"')),null===a&&("return"===b.substr(c,6)?(a="return",c+=6):(a=null,0===k&&g('"return"')),null===a&&(a=Ra(),null===a&&(a=Sa(),null===a&&("in"===b.substr(c,2)?(a="in",c+=2):(a=null,0===k&&g('"in"')),null===a&&("out"===b.substr(c,3)?(a="out",
c+=3):(a=null,0===k&&g('"out"')),null===a&&("inout"===b.substr(c,5)?(a="inout",c+=5):(a=null,0===k&&g('"inout"')),null===a&&("uniform"===b.substr(c,7)?(a="uniform",c+=7):(a=null,0===k&&g('"uniform"')),null===a&&("varying"===b.substr(c,7)?(a="varying",c+=7):(a=null,0===k&&g('"varying"')),null===a&&("sampler2D"===b.substr(c,9)?(a="sampler2D",c+=9):(a=null,0===k&&g('"sampler2D"')),null===a&&("samplerCube"===b.substr(c,11)?(a="samplerCube",c+=11):(a=null,0===k&&g('"samplerCube"')),null===a&&("struct"===
b.substr(c,6)?(a="struct",c+=6):(a=null,0===k&&g('"struct"')),null===a&&("void"===b.substr(c,4)?(a="void",c+=4):(a=null,0===k&&g('"void"')),null===a&&("while"===b.substr(c,5)?(a="while",c+=5):(a=null,0===k&&g('"while"')),null===a&&("highp"===b.substr(c,5)?(a="highp",c+=5):(a=null,0===k&&g('"highp"')),null===a&&("mediump"===b.substr(c,7)?(a="mediump",c+=7):(a=null,0===k&&g('"mediump"')),null===a&&("lowp"===b.substr(c,4)?(a="lowp",c+=4):(a=null,0===k&&g('"lowp"')),null===a&&("true"===b.substr(c,4)?
(a="true",c+=4):(a=null,0===k&&g('"true"')),null===a&&("false"===b.substr(c,5)?(a="false",c+=5):(a=null,0===k&&g('"false"')))))))))))))))))))))))))))))));k--;0===k&&null===a&&g("keyword");n[e]={nextPos:c,result:a};return a}function Ra(){var e="vector@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d,h,f,t;t=f=c;/^[bi]/.test(b.charAt(c))?(a=b.charAt(c),c++):(a=null,0===k&&g("[bi]"));a=null!==a?a:"";null!==a?("vec"===b.substr(c,3)?(d="vec",c+=3):(d=null,0===k&&g('"vec"')),null!==d?(/^[234]/.test(b.charAt(c))?
(h=b.charAt(c),c++):(h=null,0===k&&g("[234]")),null!==h?a=[a,d,h]:(a=null,c=t)):(a=null,c=t)):(a=null,c=t);null!==a&&(a=a.join(""));null===a&&(c=f);n[e]={nextPos:c,result:a};return a}function Sa(){var e="matrix@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d,h,f;f=h=c;"mat"===b.substr(c,3)?(a="mat",c+=3):(a=null,0===k&&g('"mat"'));null!==a?(/^[234]/.test(b.charAt(c))?(d=b.charAt(c),c++):(d=null,0===k&&g("[234]")),null!==d?a=[a,d]:(a=null,c=f)):(a=null,c=f);null!==a&&(a=a.join(""));null===a&&(c=
h);n[e]={nextPos:c,result:a};return a}function Ta(){var e="single_underscore_identifier@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d,h,f,t;t=c;a=[];/^[A-Za-z0-9]/.test(b.charAt(c))?(d=b.charAt(c),c++):(d=null,0===k&&g("[A-Za-z0-9]"));for(;null!==d;)a.push(d),/^[A-Za-z0-9]/.test(b.charAt(c))?(d=b.charAt(c),c++):(d=null,0===k&&g("[A-Za-z0-9]"));if(null!==a)if(95===b.charCodeAt(c)?(d="_",c+=1):(d=null,0===k&&g('"_"')),null!==d){/^[A-Za-z0-9]/.test(b.charAt(c))?(f=b.charAt(c),c++):(f=null,0===k&&
g("[A-Za-z0-9]"));if(null!==f)for(h=[];null!==f;)h.push(f),/^[A-Za-z0-9]/.test(b.charAt(c))?(f=b.charAt(c),c++):(f=null,0===k&&g("[A-Za-z0-9]"));else h=null;null!==h?a=[a,d,h]:(a=null,c=t)}else a=null,c=t;else a=null,c=t;n[e]={nextPos:c,result:a};return a}function Cb(){var e="int_constant@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d,h,f,t,m;m=t=c;/^[1-9]/.test(b.charAt(c))?(a=b.charAt(c),c++):(a=null,0===k&&g("[1-9]"));if(null!==a){d=[];/^[0-9]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,
0===k&&g("[0-9]"));for(;null!==h;)d.push(h),/^[0-9]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,0===k&&g("[0-9]"));null!==d?a=[a,d]:(a=null,c=m)}else a=null,c=m;null!==a&&(a=new w({type:"int",value:parseInt([a[0]].concat(a[1]).join(""),10)}));null===a&&(c=t);if(null===a){m=t=c;48===b.charCodeAt(c)?(a="0",c+=1):(a=null,0===k&&g('"0"'));if(null!==a)if(/^[Xx]/.test(b.charAt(c))?(d=b.charAt(c),c++):(d=null,0===k&&g("[Xx]")),null!==d){/^[0-9A-Fa-f]/.test(b.charAt(c))?(f=b.charAt(c),c++):(f=null,0===
k&&g("[0-9A-Fa-f]"));if(null!==f)for(h=[];null!==f;)h.push(f),/^[0-9A-Fa-f]/.test(b.charAt(c))?(f=b.charAt(c),c++):(f=null,0===k&&g("[0-9A-Fa-f]"));else h=null;null!==h?a=[a,d,h]:(a=null,c=m)}else a=null,c=m;else a=null,c=m;null!==a&&(a=new w({type:"int",value:parseInt(a[2].join(""),16)}));null===a&&(c=t);if(null===a){m=t=c;48===b.charCodeAt(c)?(a="0",c+=1):(a=null,0===k&&g('"0"'));if(null!==a){/^[0-7]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,0===k&&g("[0-7]"));if(null!==h)for(d=[];null!==h;)d.push(h),
/^[0-7]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,0===k&&g("[0-7]"));else d=null;null!==d?a=[a,d]:(a=null,c=m)}else a=null,c=m;null!==a&&(a=new w({type:"int",value:parseInt(a[1].join(""),8)}));null===a&&(c=t);null===a&&(t=c,48===b.charCodeAt(c)?(a="0",c+=1):(a=null,0===k&&g('"0"')),null!==a&&(a=new w({type:"int",value:0})),null===a&&(c=t))}}n[e]={nextPos:c,result:a};return a}function Db(){var e="float_constant@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d,h,f,t,m;m=t=c;a=[];/^[0-9]/.test(b.charAt(c))?
(d=b.charAt(c),c++):(d=null,0===k&&g("[0-9]"));for(;null!==d;)a.push(d),/^[0-9]/.test(b.charAt(c))?(d=b.charAt(c),c++):(d=null,0===k&&g("[0-9]"));if(null!==a)if(46===b.charCodeAt(c)?(d=".",c+=1):(d=null,0===k&&g('"."')),null!==d){/^[0-9]/.test(b.charAt(c))?(f=b.charAt(c),c++):(f=null,0===k&&g("[0-9]"));if(null!==f)for(h=[];null!==f;)h.push(f),/^[0-9]/.test(b.charAt(c))?(f=b.charAt(c),c++):(f=null,0===k&&g("[0-9]"));else h=null;null!==h?(f=ka(),f=null!==f?f:"",null!==f?a=[a,d,h,f]:(a=null,c=m)):(a=
null,c=m)}else a=null,c=m;else a=null,c=m;if(null===a){m=c;/^[0-9]/.test(b.charAt(c))?(d=b.charAt(c),c++):(d=null,0===k&&g("[0-9]"));if(null!==d)for(a=[];null!==d;)a.push(d),/^[0-9]/.test(b.charAt(c))?(d=b.charAt(c),c++):(d=null,0===k&&g("[0-9]"));else a=null;if(null!==a)if(46===b.charCodeAt(c)?(d=".",c+=1):(d=null,0===k&&g('"."')),null!==d){h=[];/^[0-9]/.test(b.charAt(c))?(f=b.charAt(c),c++):(f=null,0===k&&g("[0-9]"));for(;null!==f;)h.push(f),/^[0-9]/.test(b.charAt(c))?(f=b.charAt(c),c++):(f=null,
0===k&&g("[0-9]"));null!==h?(f=ka(),f=null!==f?f:"",null!==f?a=[a,d,h,f]:(a=null,c=m)):(a=null,c=m)}else a=null,c=m;else a=null,c=m}null!==a&&(a=function(a){a[0]=a[0].join("");a[2]=a[2].join("");return new w({type:"float",value:parseFloat(a.join(""))})}(a));null===a&&(c=t);if(null===a){m=t=c;/^[0-9]/.test(b.charAt(c))?(d=b.charAt(c),c++):(d=null,0===k&&g("[0-9]"));if(null!==d)for(a=[];null!==d;)a.push(d),/^[0-9]/.test(b.charAt(c))?(d=b.charAt(c),c++):(d=null,0===k&&g("[0-9]"));else a=null;null!==
a?(d=ka(),null!==d?a=[a,d]:(a=null,c=m)):(a=null,c=m);null!==a&&(a=function(a){return new w({type:"float",value:parseFloat(a[0].join("")+a[1])})}(a));null===a&&(c=t)}n[e]={nextPos:c,result:a};return a}function ka(){var e="float_exponent@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d,h,f,t,m;m=t=c;/^[Ee]/.test(b.charAt(c))?(a=b.charAt(c),c++):(a=null,0===k&&g("[Ee]"));if(null!==a)if(/^[+\-]/.test(b.charAt(c))?(d=b.charAt(c),c++):(d=null,0===k&&g("[+\\-]")),d=null!==d?d:"",null!==d){/^[0-9]/.test(b.charAt(c))?
(f=b.charAt(c),c++):(f=null,0===k&&g("[0-9]"));if(null!==f)for(h=[];null!==f;)h.push(f),/^[0-9]/.test(b.charAt(c))?(f=b.charAt(c),c++):(f=null,0===k&&g("[0-9]"));else h=null;null!==h?a=[a,d,h]:(a=null,c=m)}else a=null,c=m;else a=null,c=m;null!==a&&(a=["e",a[1]].concat(a[2]).join(""));null===a&&(c=t);n[e]={nextPos:c,result:a};return a}function Eb(){var b="paren_expression@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,h,d,f;f=d=c;a=K();null!==a?(e=G(),null!==e?(h=F(),null!==h?a=[a,e,h]:(a=null,
c=f)):(a=null,c=f)):(a=null,c=f);null!==a&&(a=a[1]);null===a&&(c=d);n[b]={nextPos:c,result:a};return a}function Fb(){var e="bool_constant@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d;d=c;"true"===b.substr(c,4)?(a="true",c+=4):(a=null,0===k&&g('"true"'));null===a&&("false"===b.substr(c,5)?(a="false",c+=5):(a=null,0===k&&g('"false"')));null!==a&&(a=new w({type:"bool",value:"true"==a}));null===a&&(c=d);n[e]={nextPos:c,result:a};return a}function Gb(){var b="primary_expression@"+c,a=n[b];if(a)return c=
a.nextPos,a.result;a=Hb();null===a&&(a=E(),null===a&&(a=Db(),null===a&&(a=Cb(),null===a&&(a=Fb(),null===a&&(a=Eb())))));n[b]={nextPos:c,result:a};return a}function Z(){var b="index_accessor@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,h,d,f;f=d=c;a=D();null!==a?(e=G(),null!==e?(h=I(),null!==h?a=[a,e,h]:(a=null,c=f)):(a=null,c=f)):(a=null,c=f);null!==a&&(a=new w({type:"accessor",index:a[1]}));null===a&&(c=d);n[b]={nextPos:c,result:a};return a}function aa(){var e="field_selector@"+c,a=n[e];if(a)return c=
a.nextPos,a.result;var d,h,f;f=h=c;46===b.charCodeAt(c)?(a=".",c+=1):(a=null,0===k&&g('"."'));null!==a?(d=E(),null!==d?a=[a,d]:(a=null,c=f)):(a=null,c=f);null!==a&&(a=new w({type:"field_selector",selection:a[1].name}));null===a&&(c=h);n[e]={nextPos:c,result:a};return a}function Ib(){var b="postfix_expression@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,h,d,f;f=a=c;e=Gb();if(null!==e){h=[];d=aa();for(null===d&&(d=Z());null!==d;)h.push(d),d=aa(),null===d&&(d=Z());null!==h?e=[e,h]:(e=null,c=f)}else e=
null,c=f;if(null!==e)for(h=e[1],e=e[0],d=0;d<h.length;d++)e=new w({type:"postfix",operator:h[d],expression:e});null===e&&(c=a);n[b]={nextPos:c,result:e};return e}function Jb(){var e="postfix_expression_no_repeat@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d,h,f,t,m,p;p=a=c;d=Ib();if(null!==d)if(h=q(),h=null!==h?h:"",null!==h)if("++"===b.substr(c,2)?(f="++",c+=2):(f=null,0===k&&g('"++"')),null===f&&("--"===b.substr(c,2)?(f="--",c+=2):(f=null,0===k&&g('"--"'))),f=null!==f?f:"",null!==f){t=[];m=
aa();for(null===m&&(m=Z());null!==m;)t.push(m),m=aa(),null===m&&(m=Z());null!==t?d=[d,h,f,t]:(d=null,c=p)}else d=null,c=p;else d=null,c=p;else d=null,c=p;if(null!==d)for(f=d[2],h=d[3],d=d[0],f&&(d=new w({type:"postfix",operator:new w({id:Kb++,type:"operator",operator:f}),expression:d})),f=0;f<h.length;f++)d=new w({type:"postfix",operator:h[f],expression:d});null===d&&(c=a);n[e]={nextPos:c,result:d};return d}function Da(){var e="parameter_list@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d,h,f,
t,m,q;t=c;"void"===b.substr(c,4)?(a="void",c+=4):(a=null,0===k&&g('"void"'));null!==a&&(a=[]);null===a&&(c=t);if(null===a){m=t=c;a=G();if(null!==a){d=[];q=c;h=v();null!==h?(f=G(),null!==f?h=[h,f]:(h=null,c=q)):(h=null,c=q);for(;null!==h;)d.push(h),q=c,h=v(),null!==h?(f=G(),null!==f?h=[h,f]:(h=null,c=q)):(h=null,c=q);null!==d?a=[a,d]:(a=null,c=m)}else a=null,c=m;null!==a&&(a=function(a,c){return[a].concat(c.map(function(a){return a[1]}))}(a[0],a[1]));null===a&&(c=t)}n[e]={nextPos:c,result:a};return a}
function Hb(){var b="function_call@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,d,f,g,k;k=a=c;e=Lb();null!==e?(d=K(),null!==d?(f=Da(),f=null!==f?f:"",null!==f?(g=F(),null!==g?e=[e,d,f,g]:(e=null,c=k)):(e=null,c=k)):(e=null,c=k)):(e=null,c=k);null!==e&&(d=e[2],e=new w({type:"function_call",function_name:e[0],parameters:d}),d||(e.parameters=[]));null===e&&(c=a);n[b]={nextPos:c,result:e};return e}function Lb(){var b="function_identifier@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e;e=c;a=E();
null!==a&&(a=a.name);null===a&&(c=e);null===a&&(a=U());n[b]={nextPos:c,result:a};return a}function la(){var e="unary_expression@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d,h,f,t;t=f=c;"++"===b.substr(c,2)?(a="++",c+=2):(a=null,0===k&&g('"++"'));null===a&&("--"===b.substr(c,2)?(a="--",c+=2):(a=null,0===k&&g('"--"')),null===a&&(33===b.charCodeAt(c)?(a="!",c+=1):(a=null,0===k&&g('"!"')),null===a&&(126===b.charCodeAt(c)?(a="~",c+=1):(a=null,0===k&&g('"~"')),null===a&&(43===b.charCodeAt(c)?(a="+",
c+=1):(a=null,0===k&&g('"+"')),null===a&&(45===b.charCodeAt(c)?(a="-",c+=1):(a=null,0===k&&g('"-"')))))));a=null!==a?a:"";null!==a?(d=q(),d=null!==d?d:"",null!==d?(h=Jb(),null!==h?a=[a,d,h]:(a=null,c=t)):(a=null,c=t)):(a=null,c=t);null!==a&&(d=a[0],C=a[2],d&&(C=new w({type:"unary",expression:C,operator:new w({type:"operator",operator:d})})),a=C);null===a&&(c=f);n[e]={nextPos:c,result:a};return a}function Ua(){var e="multiplicative_operator@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d,h,f,t;f=
h=c;42===b.charCodeAt(c)?(a="*",c+=1):(a=null,0===k&&g('"*"'));null===a&&(47===b.charCodeAt(c)?(a="/",c+=1):(a=null,0===k&&g('"/"')),null===a&&(37===b.charCodeAt(c)?(a="%",c+=1):(a=null,0===k&&g('"%"'))));null!==a?(t=c,k++,61===b.charCodeAt(c)?(d="=",c+=1):(d=null,0===k&&g('"="')),k--,null===d?d="":(d=null,c=t),null!==d?a=[a,d]:(a=null,c=f)):(a=null,c=f);null!==a&&(a=new w({type:"operator",operator:a[0]}));null===a&&(c=h);n[e]={nextPos:c,result:a};return a}function ma(){var b="multiplicative_expression@"+
c,a=n[b];if(a)return c=a.nextPos,a.result;var e,d,f,g,k,m,p,r;p=m=c;a=la();if(null!==a){e=[];r=c;d=q();d=null!==d?d:"";null!==d?(f=Ua(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=la(),null!==k?d=[d,f,g,k]:(d=null,c=r)):(d=null,c=r)):(d=null,c=r)):(d=null,c=r);for(;null!==d;)e.push(d),r=c,d=q(),d=null!==d?d:"",null!==d?(f=Ua(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=la(),null!==k?d=[d,f,g,k]:(d=null,c=r)):(d=null,c=r)):(d=null,c=r)):(d=null,c=r);null!==e?a=[a,e]:(a=null,c=p)}else a=null,c=p;null!==
a&&(a=J(a[0],a[1]));null===a&&(c=m);n[b]={nextPos:c,result:a};return a}function Va(){var e="additive_operator@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d,h,f,t;f=h=c;43===b.charCodeAt(c)?(a="+",c+=1):(a=null,0===k&&g('"+"'));null!==a?(t=c,k++,43===b.charCodeAt(c)?(d="+",c+=1):(d=null,0===k&&g('"+"')),null===d&&(61===b.charCodeAt(c)?(d="=",c+=1):(d=null,0===k&&g('"="'))),k--,null===d?d="":(d=null,c=t),null!==d?a=[a,d]:(a=null,c=f)):(a=null,c=f);null!==a&&(a=new w({type:"operator",operator:"+"}));
null===a&&(c=h);null===a&&(f=h=c,45===b.charCodeAt(c)?(a="-",c+=1):(a=null,0===k&&g('"-"')),null!==a?(t=c,k++,45===b.charCodeAt(c)?(d="-",c+=1):(d=null,0===k&&g('"-"')),null===d&&(61===b.charCodeAt(c)?(d="=",c+=1):(d=null,0===k&&g('"="'))),k--,null===d?d="":(d=null,c=t),null!==d?a=[a,d]:(a=null,c=f)):(a=null,c=f),null!==a&&(a=new w({type:"operator",operator:"-"})),null===a&&(c=h));n[e]={nextPos:c,result:a};return a}function na(){var b="additive_expression@"+c,a=n[b];if(a)return c=a.nextPos,a.result;
var e,d,f,g,k,m,p,r;p=m=c;a=ma();if(null!==a){e=[];r=c;d=q();d=null!==d?d:"";null!==d?(f=Va(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=ma(),null!==k?d=[d,f,g,k]:(d=null,c=r)):(d=null,c=r)):(d=null,c=r)):(d=null,c=r);for(;null!==d;)e.push(d),r=c,d=q(),d=null!==d?d:"",null!==d?(f=Va(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=ma(),null!==k?d=[d,f,g,k]:(d=null,c=r)):(d=null,c=r)):(d=null,c=r)):(d=null,c=r);null!==e?a=[a,e]:(a=null,c=p)}else a=null,c=p;null!==a&&(a=J(a[0],a[1]));null===a&&(c=m);
n[b]={nextPos:c,result:a};return a}function Wa(){var e="shift_operator@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d,h,f,t;f=h=c;"<<"===b.substr(c,2)?(a="<<",c+=2):(a=null,0===k&&g('"<<"'));null===a&&(">>"===b.substr(c,2)?(a=">>",c+=2):(a=null,0===k&&g('">>"')));null!==a?(t=c,k++,61===b.charCodeAt(c)?(d="=",c+=1):(d=null,0===k&&g('"="')),k--,null===d?d="":(d=null,c=t),null!==d?a=[a,d]:(a=null,c=f)):(a=null,c=f);null!==a&&(a=new w({type:"operator",operator:a[0]}));null===a&&(c=h);n[e]={nextPos:c,
result:a};return a}function oa(){var b="shift_expression@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,d,f,g,k,m,p,r;p=m=c;a=na();if(null!==a){e=[];r=c;d=q();d=null!==d?d:"";null!==d?(f=Wa(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=na(),null!==k?d=[d,f,g,k]:(d=null,c=r)):(d=null,c=r)):(d=null,c=r)):(d=null,c=r);for(;null!==d;)e.push(d),r=c,d=q(),d=null!==d?d:"",null!==d?(f=Wa(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=na(),null!==k?d=[d,f,g,k]:(d=null,c=r)):(d=null,c=r)):(d=null,c=r)):(d=
null,c=r);null!==e?a=[a,e]:(a=null,c=p)}else a=null,c=p;null!==a&&(a=J(a[0],a[1]));null===a&&(c=m);n[b]={nextPos:c,result:a};return a}function Xa(){var e="relational_operator@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d,h,f,m;m=f=c;60===b.charCodeAt(c)?(a="<",c+=1):(a=null,0===k&&g('"<"'));null!==a?(h=c,k++,60===b.charCodeAt(c)?(d="<",c+=1):(d=null,0===k&&g('"<"')),k--,null===d?d="":(d=null,c=h),null!==d?(61===b.charCodeAt(c)?(h="=",c+=1):(h=null,0===k&&g('"="')),h=null!==h?h:"",null!==h?a=[a,
d,h]:(a=null,c=m)):(a=null,c=m)):(a=null,c=m);null!==a&&(a=new w({type:"operator",operator:"<"+a[2]}));null===a&&(c=f);null===a&&(m=f=c,62===b.charCodeAt(c)?(a=">",c+=1):(a=null,0===k&&g('">"')),null!==a?(h=c,k++,62===b.charCodeAt(c)?(d=">",c+=1):(d=null,0===k&&g('">"')),k--,null===d?d="":(d=null,c=h),null!==d?(61===b.charCodeAt(c)?(h="=",c+=1):(h=null,0===k&&g('"="')),h=null!==h?h:"",null!==h?a=[a,d,h]:(a=null,c=m)):(a=null,c=m)):(a=null,c=m),null!==a&&(a=new w({type:"operator",operator:">"+a[2]})),
null===a&&(c=f));n[e]={nextPos:c,result:a};return a}function pa(){var b="relational_expression@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,d,f,g,k,m,p,r;p=m=c;a=oa();if(null!==a){e=[];r=c;d=q();d=null!==d?d:"";null!==d?(f=Xa(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=oa(),null!==k?d=[d,f,g,k]:(d=null,c=r)):(d=null,c=r)):(d=null,c=r)):(d=null,c=r);for(;null!==d;)e.push(d),r=c,d=q(),d=null!==d?d:"",null!==d?(f=Xa(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=oa(),null!==k?d=[d,f,g,k]:(d=null,
c=r)):(d=null,c=r)):(d=null,c=r)):(d=null,c=r);null!==e?a=[a,e]:(a=null,c=p)}else a=null,c=p;null!==a&&(a=J(a[0],a[1]));null===a&&(c=m);n[b]={nextPos:c,result:a};return a}function Ya(){var e="equality_operator@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d;d=c;"=="===b.substr(c,2)?(a="==",c+=2):(a=null,0===k&&g('"=="'));null===a&&("!="===b.substr(c,2)?(a="!=",c+=2):(a=null,0===k&&g('"!="')));null!==a&&(a=new w({type:"operator",operator:a}));null===a&&(c=d);n[e]={nextPos:c,result:a};return a}function qa(){var b=
"equality_expression@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,d,f,g,k,m,p,r;p=m=c;a=pa();if(null!==a){e=[];r=c;d=q();d=null!==d?d:"";null!==d?(f=Ya(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=pa(),null!==k?d=[d,f,g,k]:(d=null,c=r)):(d=null,c=r)):(d=null,c=r)):(d=null,c=r);for(;null!==d;)e.push(d),r=c,d=q(),d=null!==d?d:"",null!==d?(f=Ya(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=pa(),null!==k?d=[d,f,g,k]:(d=null,c=r)):(d=null,c=r)):(d=null,c=r)):(d=null,c=r);null!==e?a=[a,e]:(a=null,
c=p)}else a=null,c=p;null!==a&&(a=J(a[0],a[1]));null===a&&(c=m);n[b]={nextPos:c,result:a};return a}function Za(){var d="bitwise_and_operator@"+c,a=n[d];if(a)return c=a.nextPos,a.result;var e,h,f,m;f=h=c;38===b.charCodeAt(c)?(a="&",c+=1):(a=null,0===k&&g('"&"'));null!==a?(m=c,k++,61===b.charCodeAt(c)?(e="=",c+=1):(e=null,0===k&&g('"="')),null===e&&(38===b.charCodeAt(c)?(e="&",c+=1):(e=null,0===k&&g('"&"'))),k--,null===e?e="":(e=null,c=m),null!==e?a=[a,e]:(a=null,c=f)):(a=null,c=f);null!==a&&(a=new w({type:"operator",
operator:"&"}));null===a&&(c=h);n[d]={nextPos:c,result:a};return a}function ra(){var b="bitwise_and_expression@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,d,f,g,k,m,p,r;p=m=c;a=qa();if(null!==a){e=[];r=c;d=q();d=null!==d?d:"";null!==d?(f=Za(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=qa(),null!==k?d=[d,f,g,k]:(d=null,c=r)):(d=null,c=r)):(d=null,c=r)):(d=null,c=r);for(;null!==d;)e.push(d),r=c,d=q(),d=null!==d?d:"",null!==d?(f=Za(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=qa(),null!==k?d=
[d,f,g,k]:(d=null,c=r)):(d=null,c=r)):(d=null,c=r)):(d=null,c=r);null!==e?a=[a,e]:(a=null,c=p)}else a=null,c=p;null!==a&&(a=J(a[0],a[1]));null===a&&(c=m);n[b]={nextPos:c,result:a};return a}function $a(){var d="bitwise_xor_operator@"+c,a=n[d];if(a)return c=a.nextPos,a.result;var e,h,f,m;f=h=c;94===b.charCodeAt(c)?(a="^",c+=1):(a=null,0===k&&g('"^"'));null!==a?(m=c,k++,61===b.charCodeAt(c)?(e="=",c+=1):(e=null,0===k&&g('"="')),null===e&&(94===b.charCodeAt(c)?(e="^",c+=1):(e=null,0===k&&g('"^"'))),k--,
null===e?e="":(e=null,c=m),null!==e?a=[a,e]:(a=null,c=f)):(a=null,c=f);null!==a&&(a=new w({type:"operator",operator:"^"}));null===a&&(c=h);n[d]={nextPos:c,result:a};return a}function sa(){var b="bitwise_xor_expression@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var d,e,f,g,k,m,p,r;p=m=c;a=ra();if(null!==a){d=[];r=c;e=q();e=null!==e?e:"";null!==e?(f=$a(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=ra(),null!==k?e=[e,f,g,k]:(e=null,c=r)):(e=null,c=r)):(e=null,c=r)):(e=null,c=r);for(;null!==e;)d.push(e),
r=c,e=q(),e=null!==e?e:"",null!==e?(f=$a(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=ra(),null!==k?e=[e,f,g,k]:(e=null,c=r)):(e=null,c=r)):(e=null,c=r)):(e=null,c=r);null!==d?a=[a,d]:(a=null,c=p)}else a=null,c=p;null!==a&&(a=J(a[0],a[1]));null===a&&(c=m);n[b]={nextPos:c,result:a};return a}function ab(){var e="bitwise_or_operator@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d,h,f,m;f=h=c;124===b.charCodeAt(c)?(a="|",c+=1):(a=null,0===k&&g('"|"'));null!==a?(m=c,k++,61===b.charCodeAt(c)?(d="=",
c+=1):(d=null,0===k&&g('"="')),null===d&&(124===b.charCodeAt(c)?(d="|",c+=1):(d=null,0===k&&g('"|"'))),k--,null===d?d="":(d=null,c=m),null!==d?a=[a,d]:(a=null,c=f)):(a=null,c=f);null!==a&&(a=new w({type:"operator",operator:"|"}));null===a&&(c=h);n[e]={nextPos:c,result:a};return a}function ta(){var b="bitwise_or_expression@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,d,f,g,k,m,p,r;p=m=c;a=sa();if(null!==a){e=[];r=c;d=q();d=null!==d?d:"";null!==d?(f=ab(),null!==f?(g=q(),g=null!==g?g:"",null!==
g?(k=sa(),null!==k?d=[d,f,g,k]:(d=null,c=r)):(d=null,c=r)):(d=null,c=r)):(d=null,c=r);for(;null!==d;)e.push(d),r=c,d=q(),d=null!==d?d:"",null!==d?(f=ab(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=sa(),null!==k?d=[d,f,g,k]:(d=null,c=r)):(d=null,c=r)):(d=null,c=r)):(d=null,c=r);null!==e?a=[a,e]:(a=null,c=p)}else a=null,c=p;null!==a&&(a=J(a[0],a[1]));null===a&&(c=m);n[b]={nextPos:c,result:a};return a}function bb(){var d="logical_and_operator@"+c,a=n[d];if(a)return c=a.nextPos,a.result;var e;e=c;"&&"===
b.substr(c,2)?(a="&&",c+=2):(a=null,0===k&&g('"&&"'));null!==a&&(a=new w({type:"operator",operator:"&&"}));null===a&&(c=e);n[d]={nextPos:c,result:a};return a}function ua(){var b="logical_and_expression@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var d,e,f,g,k,m,p,r;p=m=c;a=ta();if(null!==a){d=[];r=c;e=q();e=null!==e?e:"";null!==e?(f=bb(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=ta(),null!==k?e=[e,f,g,k]:(e=null,c=r)):(e=null,c=r)):(e=null,c=r)):(e=null,c=r);for(;null!==e;)d.push(e),r=c,e=q(),e=
null!==e?e:"",null!==e?(f=bb(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=ta(),null!==k?e=[e,f,g,k]:(e=null,c=r)):(e=null,c=r)):(e=null,c=r)):(e=null,c=r);null!==d?a=[a,d]:(a=null,c=p)}else a=null,c=p;null!==a&&(a=J(a[0],a[1]));null===a&&(c=m);n[b]={nextPos:c,result:a};return a}function cb(){var e="logical_xor_operator@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d;d=c;"^^"===b.substr(c,2)?(a="^^",c+=2):(a=null,0===k&&g('"^^"'));null!==a&&(a=new w({type:"operator",operator:"^^"}));null===a&&(c=
d);n[e]={nextPos:c,result:a};return a}function va(){var b="logical_xor_expression@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var e,d,f,g,k,m,p,r;p=m=c;a=ua();if(null!==a){e=[];r=c;d=q();d=null!==d?d:"";null!==d?(f=cb(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=ua(),null!==k?d=[d,f,g,k]:(d=null,c=r)):(d=null,c=r)):(d=null,c=r)):(d=null,c=r);for(;null!==d;)e.push(d),r=c,d=q(),d=null!==d?d:"",null!==d?(f=cb(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=ua(),null!==k?d=[d,f,g,k]:(d=null,c=r)):(d=null,
c=r)):(d=null,c=r)):(d=null,c=r);null!==e?a=[a,e]:(a=null,c=p)}else a=null,c=p;null!==a&&(a=J(a[0],a[1]));null===a&&(c=m);n[b]={nextPos:c,result:a};return a}function db(){var d="logical_or_operator@"+c,a=n[d];if(a)return c=a.nextPos,a.result;var e;e=c;"||"===b.substr(c,2)?(a="||",c+=2):(a=null,0===k&&g('"||"'));null!==a&&(a=new w({type:"operator",operator:"||"}));null===a&&(c=e);n[d]={nextPos:c,result:a};return a}function Mb(){var b="logical_or_expression@"+c,a=n[b];if(a)return c=a.nextPos,a.result;
var d,e,f,g,k,m,p,r;p=m=c;a=va();if(null!==a){d=[];r=c;e=q();e=null!==e?e:"";null!==e?(f=db(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=va(),null!==k?e=[e,f,g,k]:(e=null,c=r)):(e=null,c=r)):(e=null,c=r)):(e=null,c=r);for(;null!==e;)d.push(e),r=c,e=q(),e=null!==e?e:"",null!==e?(f=db(),null!==f?(g=q(),g=null!==g?g:"",null!==g?(k=va(),null!==k?e=[e,f,g,k]:(e=null,c=r)):(e=null,c=r)):(e=null,c=r)):(e=null,c=r);null!==d?a=[a,d]:(a=null,c=p)}else a=null,c=p;null!==a&&(a=J(a[0],a[1]));null===a&&(c=m);
n[b]={nextPos:c,result:a};return a}function O(){var e="conditional_expression@"+c,a=n[e];if(a)return c=a.nextPos,a.result;var d,f,m,p,u,v,A,r,y,H,B;H=a=c;d=Mb();null!==d?(B=c,f=q(),f=null!==f?f:"",null!==f?(63===b.charCodeAt(c)?(m="?",c+=1):(m=null,0===k&&g('"?"')),null!==m?(p=q(),p=null!==p?p:"",null!==p?(u=G(),null!==u?(v=q(),v=null!==v?v:"",null!==v?(58===b.charCodeAt(c)?(A=":",c+=1):(A=null,0===k&&g('":"')),null!==A?(r=q(),r=null!==r?r:"",null!==r?(y=G(),null!==y?f=[f,m,p,u,v,A,r,y]:(f=null,c=
B)):(f=null,c=B)):(f=null,c=B)):(f=null,c=B)):(f=null,c=B)):(f=null,c=B)):(f=null,c=B)):(f=null,c=B),f=null!==f?f:"",null!==f?d=[d,f]:(d=null,c=H)):(d=null,c=H);null!==d&&(f=d[0],d=d[1],C=f,d&&(C=new w({type:"ternary",condition:f,is_true:d[3],is_false:d[7]})),d=C);null===d&&(c=a);n[e]={nextPos:c,result:d};return d}function G(){var d="assignment_expression@"+c,a=n[d];if(a)return c=a.nextPos,a.result;var e,f,m,p,u,v;v=u=c;a=O();null!==a?(e=q(),e=null!==e?e:"",null!==e?(61===b.charCodeAt(c)?(f="=",c+=
1):(f=null,0===k&&g('"="')),null===f&&("*="===b.substr(c,2)?(f="*=",c+=2):(f=null,0===k&&g('"*="')),null===f&&("/="===b.substr(c,2)?(f="/=",c+=2):(f=null,0===k&&g('"/="')),null===f&&("%="===b.substr(c,2)?(f="%=",c+=2):(f=null,0===k&&g('"%="')),null===f&&("+="===b.substr(c,2)?(f="+=",c+=2):(f=null,0===k&&g('"+="')),null===f&&("-="===b.substr(c,2)?(f="-=",c+=2):(f=null,0===k&&g('"-="')),null===f&&("<<="===b.substr(c,3)?(f="<<=",c+=3):(f=null,0===k&&g('"<<="')),null===f&&(">>="===b.substr(c,3)?(f=">>=",
c+=3):(f=null,0===k&&g('">>="')),null===f&&("&="===b.substr(c,2)?(f="&=",c+=2):(f=null,0===k&&g('"&="')),null===f&&("^="===b.substr(c,2)?(f="^=",c+=2):(f=null,0===k&&g('"^="')),null===f&&("|="===b.substr(c,2)?(f="|=",c+=2):(f=null,0===k&&g('"|="')))))))))))),null!==f?(m=q(),m=null!==m?m:"",null!==m?(p=G(),null!==p?a=[a,e,f,m,p]:(a=null,c=v)):(a=null,c=v)):(a=null,c=v)):(a=null,c=v)):(a=null,c=v);null!==a&&(e=a[0],f=a[4],a=new w({type:"binary",operator:new w({type:"operator",operator:a[2]}),left:e,
right:f}));null===a&&(c=u);null===a&&(a=O());n[d]={nextPos:c,result:a};return a}function La(){var d="condition@"+c,a=n[d];if(a)return c=a.nextPos,a.result;var e,f,m,p,u,v,w;w=c;a=T();null!==a?(e=q(),null!==e?(f=E(),null!==f?(m=q(),m=null!==m?m:"",null!==m?(61===b.charCodeAt(c)?(p="=",c+=1):(p=null,0===k&&g('"="')),null!==p?(u=q(),u=null!==u?u:"",null!==u?(v=G(),null!==v?a=[a,e,f,m,p,u,v]:(a=null,c=w)):(a=null,c=w)):(a=null,c=w)):(a=null,c=w)):(a=null,c=w)):(a=null,c=w)):(a=null,c=w);null===a&&(a=
G());n[d]={nextPos:c,result:a};return a}function Qb(){var d;a:{d=za;d.sort();for(var a=null,e=[],g=0;g<d.length;g++)d[g]!==a&&(e.push(d[g]),a=d[g]);switch(e.length){case 0:d="end of input";break a;case 1:d=e[0];break a;default:d=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}}a=Math.max(c,P);a=a<b.length?f(b.charAt(a)):"end of input";return"Expected "+d+" but "+a+" found."}function Nb(){for(var d=1,a=1,e=!1,f=0;f<Math.max(c,P);f++){var g=b.charAt(f);"\n"===g?(e||d++,a=1,e=!1):"\r"===g||"\u2028"===
g||"\u2029"===g?(d++,a=1,e=!0):(a++,e=!1)}return{line:d,column:a}}function w(c){this.id=Kb++;this.line=Nb().line;for(var a in c)c.hasOwnProperty(a)&&(this[a]=c[a])}function J(c,a){for(var b=c,d=0;d<a.length;d++)b=new w({type:"binary",operator:a[d][1],left:b,right:a[d][3]});return b}function lb(c,a,b){b&&(a=a.concat([b]));b=c[0];b.guarded_statements=c[1].statements;c=b;for(var d=0;d<a.length;d++)c.elseBody=a[d][0],c.elseBody.guarded_statements=a[d][1].statements,c=c.elseBody;return b}var Ob={EOF:p,
_:q,additive_expression:na,additive_operator:Va,assignment_expression:G,attribute_qualifier:Qa,attribute_type:tb,bitwise_and_expression:ra,bitwise_and_operator:Za,bitwise_or_expression:ta,bitwise_or_operator:ab,bitwise_xor_expression:sa,bitwise_xor_operator:$a,bool_constant:Fb,comma:v,comment:H,compound_statement:da,condition:La,conditional_expression:O,const_qualifier:ia,declaration:fa,declarator:W,declarator_array_with_size:Y,declarator_list:yb,declarator_list_arrays_have_size:Oa,declarator_list_no_array:ub,
declarator_no_array:X,do_while:rb,equality_expression:qa,equality_operator:Ya,equals:eb,expression_statement:Ka,external_declaration:gb,external_statement:ya,external_statement_list:L,field_selector:aa,float_constant:Db,float_exponent:ka,for_loop:pb,fragment_start:function(){var b="fragment_start@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var d,e,f;f=e=c;S="fs";a="";null!==a?(d=L(),null!==d?a=[a,d]:(a=null,c=f)):(a=null,c=f);null!==a&&(a=a[1]);null===a&&(c=e);n[b]={nextPos:c,result:a};return a},
fully_specified_type:sb,function_call:Hb,function_definition:hb,function_identifier:Lb,function_prototype:Ia,function_prototype_parameter_list:vb,global_declaration:ib,identifier:E,index_accessor:Z,init_declarator:ja,init_declarator_list:Na,int_constant:Cb,iteration_statement:nb,jump_statement:ob,keyword:Bb,left_brace:wa,left_bracket:D,left_paren:K,locally_specified_type:T,logical_and_expression:ua,logical_and_operator:bb,logical_or_expression:Mb,logical_or_operator:db,logical_xor_expression:va,logical_xor_operator:cb,
macro_call:ba,macro_call_line:function(){var d="macro_call_line@"+c,a=n[d];if(a)return c=a.nextPos,a.result;var e,f,m,p;p=m=c;a=ba();a=null!==a?a:"";if(null!==a){e=[];/^[^\n]/.test(b.charAt(c))?(f=b.charAt(c),c++):(f=null,0===k&&g("[^\\n]"));for(;null!==f;)e.push(f),/^[^\n]/.test(b.charAt(c))?(f=b.charAt(c),c++):(f=null,0===k&&g("[^\\n]"));null!==e?a=[a,e]:(a=null,c=p)}else a=null,c=p;null!==a&&(a={macro_call:a[0],rest_of_line:a[1].join("")});null===a&&(c=m);n[d]={nextPos:c,result:a};return a},macro_call_parameter:ca,
macro_call_parameter_list:function(){var b="macro_call_parameter_list@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var d,e,f,g,k,m;k=g=c;a=ca();if(null!==a){d=[];m=c;e=v();null!==e?(f=ca(),null!==f?e=[e,f]:(e=null,c=m)):(e=null,c=m);for(;null!==e;)d.push(e),m=c,e=v(),null!==e?(f=ca(),null!==f?e=[e,f]:(e=null,c=m)):(e=null,c=m);null!==d?a=[a,d]:(a=null,c=k)}else a=null,c=k;null!==a&&(a=function(a,c){return[a].concat(c.map(function(a){return a[1]}))}(a[0],a[1]));null===a&&(c=g);n[b]={nextPos:c,result:a};
return a},macro_identifier:M,macro_paren_parameter:Ca,matrix:Sa,member_list:zb,multiplicative_expression:ma,multiplicative_operator:Ua,newLine:m,noNewlineComment:u,noNewlineWhitespace:y,parameter_declaration:ha,parameter_list:Da,parameter_qualifier:xb,paren_expression:Eb,postfix_expression:Ib,postfix_expression_no_repeat:Jb,precision_qualifier:ga,precision_type:V,preprocessor_define:Aa,preprocessor_else:Fa,preprocessor_else_if:Q,preprocessor_end:Ga,preprocessor_external_branch:fb,preprocessor_if:Ea,
preprocessor_operator:Ba,preprocessor_parameter_list:kb,preprocessor_statement_branch:Ha,primary_expression:Gb,relational_expression:pa,relational_operator:Xa,reserved:function(){var d="reserved@"+c,a=n[d];if(a)return c=a.nextPos,a.result;var e,f,m,p;k++;p=c;a=[];for(e=Ta();null!==e;)a.push(e),e=Ta();if(null!==a)if("__"===b.substr(c,2)?(e="__",c+=2):(e=null,0===k&&g('"__"')),null!==e){f=[];/^[A-Za-z_0-9]/.test(b.charAt(c))?(m=b.charAt(c),c++):(m=null,0===k&&g("[A-Za-z_0-9]"));for(;null!==m;)f.push(m),
/^[A-Za-z_0-9]/.test(b.charAt(c))?(m=b.charAt(c),c++):(m=null,0===k&&g("[A-Za-z_0-9]"));null!==f?a=[a,e,f]:(a=null,c=p)}else a=null,c=p;else a=null,c=p;k--;0===k&&null===a&&g("reserved name");n[d]={nextPos:c,result:a};return a},right_brace:xa,right_bracket:I,right_paren:F,selection_statement:mb,semicolon:B,shift_expression:oa,shift_operator:Wa,simple_statement:Ja,single_underscore_identifier:Ta,statement_list:N,statement_no_new_scope:R,statement_with_scope:ea,struct_definition:jb,type_name:U,type_qualifier:Pa,
unary_expression:la,vector:Ra,vertex_start:function(){var b="vertex_start@"+c,a=n[b];if(a)return c=a.nextPos,a.result;var d,e,f;f=e=c;S="vs";a="";null!==a?(d=L(),null!==d?a=[a,d]:(a=null,c=f)):(a=null,c=f);null!==a&&(a=a[1]);null===a&&(c=e);n[b]={nextPos:c,result:a};return a},void_type:wb,while_loop:qb,while_statement:Ma};if(void 0!==e){if(void 0===Ob[e])throw Error("Invalid rule name: "+f(e)+".");}else e="external_statement_list";var c=0,k=0,P=0,za=[],n={},Ab={},Kb=0,S="vs",C=Ob[e]();if(null===C||
c!==b.length){var Pb=Nb();throw new glslunit.glsl.parser.SyntaxError(Qb(),Pb.line,Pb.column);}return C};glslunit.glsl.parser.SyntaxError=function(b,e,d){this.name="SyntaxError";this.message=b;this.line=e;this.column=d};glslunit.glsl.parser.SyntaxError.prototype=Error.prototype;glslunit.utils={};glslunit.utils.getFunctionSuffix=function(b){return glslunit.utils.toTitleOrCamelCase(b,!0)};glslunit.utils.toTitleOrCamelCase=function(b,e,d){b=b.split(d||/_/g).map(function(b){return b.slice(0,1).toUpperCase()+b.slice(1).toLowerCase()}).join("");e||(b=b.slice(0,1).toLowerCase()+b.slice(1));return b};
glslunit.utils.BUILT_IN_GLOBALS=["varying mediump vec4 gl_FragCoord;","varying bool gl_FrontFacing;","varying mediump vec2 gl_PointCoord;"].map(function(b){return glslunit.glsl.parser.parse(b,"global_declaration")});glslunit.ASTVisitor=function(){};glslunit.ASTVisitor.prototype.getBeforeVisitFunction=function(b){return this["beforeVisit"+glslunit.utils.getFunctionSuffix(b.type)]};glslunit.ASTVisitor.prototype.getAfterVisitFunction=function(b){return this["afterVisit"+glslunit.utils.getFunctionSuffix(b.type)]};glslunit.ASTVisitor.prototype.getVisitFunction=function(b){return this["visit"+glslunit.utils.getFunctionSuffix(b.type)]};
glslunit.ASTVisitor.prototype.visitNode=function(b){if(b&&b.type){var e=this.getBeforeVisitFunction(b);e&&e.apply(this,[b]);(e=this.getVisitFunction(b))?e.apply(this,[b]):this.genericVisitor(b);(e=this.getAfterVisitFunction(b))&&e.apply(this,[b])}};glslunit.ASTVisitor.prototype.visitList=function(b){goog.array.forEach(b,function(b){this.visitNode(b)},this)};
glslunit.ASTVisitor.prototype.genericVisitor=function(b){for(var e in b){var d=b[e];goog.isArray(d)?this.visitList(d):goog.isObject(d)&&d.type&&this.visitNode(d)}};glslunit.Generator=function(b,e){glslunit.ASTVisitor.call(this);this.newline_str_=b||"\n";this.debug_=!!e;this.sourceCode_="";this.currentIndent_=0};goog.inherits(glslunit.Generator,glslunit.ASTVisitor);goog.exportSymbol("glslunit.Generator",glslunit.Generator);glslunit.Generator.INDENT_STR_="  ";glslunit.Generator.EvaluationOrder_={LTR:0,RTL:1,NA:2};
glslunit.Generator.OperationEvaluation_=function(b,e,d,f){this.precedence=b;this.evaluationOrder=e||glslunit.Generator.EvaluationOrder_.LTR;this.associative=!!d;this.maxOperands=f||2};
glslunit.Generator.ORDER_OF_OPERATIONS_={function_call:new glslunit.Generator.OperationEvaluation_(0,glslunit.Generator.EvaluationOrder_.NA),identifier:new glslunit.Generator.OperationEvaluation_(0,glslunit.Generator.EvaluationOrder_.NA),"float":new glslunit.Generator.OperationEvaluation_(0,glslunit.Generator.EvaluationOrder_.NA),"int":new glslunit.Generator.OperationEvaluation_(0,glslunit.Generator.EvaluationOrder_.NA),bool:new glslunit.Generator.OperationEvaluation_(0,glslunit.Generator.EvaluationOrder_.NA),
postfix:new glslunit.Generator.OperationEvaluation_(1,glslunit.Generator.EvaluationOrder_.LTR,!1,1),unary:new glslunit.Generator.OperationEvaluation_(2,glslunit.Generator.EvaluationOrder_.RTL,!1,1),"*":new glslunit.Generator.OperationEvaluation_(3,glslunit.Generator.EvaluationOrder_.LTR,!0),"/":new glslunit.Generator.OperationEvaluation_(3),"%":new glslunit.Generator.OperationEvaluation_(3),"+":new glslunit.Generator.OperationEvaluation_(4,glslunit.Generator.EvaluationOrder_.LTR,!0),"-":new glslunit.Generator.OperationEvaluation_(4),
"<<":new glslunit.Generator.OperationEvaluation_(5),">>":new glslunit.Generator.OperationEvaluation_(5),"<":new glslunit.Generator.OperationEvaluation_(6),">":new glslunit.Generator.OperationEvaluation_(6),"<=":new glslunit.Generator.OperationEvaluation_(6),">=":new glslunit.Generator.OperationEvaluation_(6),"==":new glslunit.Generator.OperationEvaluation_(7),"!=":new glslunit.Generator.OperationEvaluation_(7),"&":new glslunit.Generator.OperationEvaluation_(8,glslunit.Generator.EvaluationOrder_.LTR,
!0),"^":new glslunit.Generator.OperationEvaluation_(9,glslunit.Generator.EvaluationOrder_.LTR,!0),"|":new glslunit.Generator.OperationEvaluation_(10,glslunit.Generator.EvaluationOrder_.LTR,!0),"&&":new glslunit.Generator.OperationEvaluation_(11,glslunit.Generator.EvaluationOrder_.LTR,!0),"^^":new glslunit.Generator.OperationEvaluation_(12,glslunit.Generator.EvaluationOrder_.LTR,!0),"||":new glslunit.Generator.OperationEvaluation_(13,glslunit.Generator.EvaluationOrder_.LTR,!0),ternary:new glslunit.Generator.OperationEvaluation_(14,
glslunit.Generator.EvaluationOrder_.RTL,!1,3),"=":new glslunit.Generator.OperationEvaluation_(15),"-=":new glslunit.Generator.OperationEvaluation_(15),"+=":new glslunit.Generator.OperationEvaluation_(15),"*=":new glslunit.Generator.OperationEvaluation_(15),"/=":new glslunit.Generator.OperationEvaluation_(15),"%=":new glslunit.Generator.OperationEvaluation_(15),"<<=":new glslunit.Generator.OperationEvaluation_(15),">>=":new glslunit.Generator.OperationEvaluation_(15),"&=":new glslunit.Generator.OperationEvaluation_(15),
"^=":new glslunit.Generator.OperationEvaluation_(15),"|=":new glslunit.Generator.OperationEvaluation_(15)};glslunit.Generator.getNodePrecedence_=function(b){return glslunit.Generator.ORDER_OF_OPERATIONS_[glslunit.Generator.getNodeOperator_(b)]};glslunit.Generator.getNodeOperator_=function(b){return"binary"==b.type?b.operator.operator:b.type};glslunit.Generator.getSourceCode=function(b,e,d){e=new glslunit.Generator(e,d);e.visitNode(b);return e.sourceCode_};
glslunit.Generator.prototype.checkAndAdd=function(b,e,d){return e?b+e+d:""};glslunit.Generator.prototype.addNodesWithJoin_=function(b,e){for(var d=0;d<b.length;d++)0!=d&&(this.sourceCode_+=e),this.visitNode(b[d])};glslunit.Generator.prototype.maybePrintNewline_=function(){this.debug_&&(this.sourceCode_+=this.newline_str_+Array(this.currentIndent_+1).join(glslunit.Generator.INDENT_STR_))};
glslunit.Generator.prototype.maybeUnindent_=function(){this.debug_&&this.sourceCode_.slice(-1*glslunit.Generator.INDENT_STR_.length)==glslunit.Generator.INDENT_STR_&&(this.sourceCode_=this.sourceCode_.slice(0,-1*glslunit.Generator.INDENT_STR_.length))};
glslunit.Generator.prototype.visitStructDefinition=function(b){this.sourceCode_+=this.checkAndAdd("",b.qualifier," ");this.sourceCode_+="struct";this.sourceCode_+=this.checkAndAdd(" ",b.name,"");this.sourceCode_+="{";this.currentIndent_++;this.addNodesWithJoin_(b.members,"");this.currentIndent_--;this.maybeUnindent_();this.sourceCode_+="}";b.declarators&&this.addNodesWithJoin_(b.declarators,",");this.sourceCode_+=";";this.maybePrintNewline_()};
goog.exportProperty(glslunit.Generator.prototype,"visitStructDefinition",glslunit.Generator.prototype.visitStructDefinition);glslunit.Generator.prototype.visitScope=function(b){this.sourceCode_+="{";this.currentIndent_++;this.maybePrintNewline_();this.addNodesWithJoin_(b.statements,"");this.currentIndent_--;this.maybeUnindent_();this.sourceCode_+="}";this.maybePrintNewline_()};goog.exportProperty(glslunit.Generator.prototype,"visitScope",glslunit.Generator.prototype.visitScope);
glslunit.Generator.prototype.visitPrecision=function(b){this.sourceCode_+="precision "+b.precision+" "+b.typeName+";";this.maybePrintNewline_()};goog.exportProperty(glslunit.Generator.prototype,"visitPrecision",glslunit.Generator.prototype.visitPrecision);glslunit.Generator.prototype.visitInvariant=function(b){this.sourceCode_+="invariant ";this.addNodesWithJoin_(b.identifiers,",");this.sourceCode_+=";";this.maybePrintNewline_()};goog.exportProperty(glslunit.Generator.prototype,"visitInvariant",glslunit.Generator.prototype.visitInvariant);
glslunit.Generator.prototype.visitParameter=function(b){this.sourceCode_+=this.checkAndAdd("",b.typeQualifier," ");this.sourceCode_+=this.checkAndAdd("",b.parameterQualifier," ");this.sourceCode_+=this.checkAndAdd("",b.precision," ");this.sourceCode_+=b.type_name+" "+b.name;b.arraySize&&(this.sourceCode_+="[",this.visitNode(b.arraySize),this.sourceCode_+="]")};goog.exportProperty(glslunit.Generator.prototype,"visitParameter",glslunit.Generator.prototype.visitParameter);
glslunit.Generator.prototype.generateFunctionPrototype_=function(b){this.visitNode(b.returnType);this.sourceCode_+=" "+b.name+"(";this.addNodesWithJoin_(b.parameters,",");this.sourceCode_+=")"};glslunit.Generator.prototype.visitFunctionPrototype=function(b){this.generateFunctionPrototype_(b);this.sourceCode_+=";";this.maybePrintNewline_()};goog.exportProperty(glslunit.Generator.prototype,"visitFunctionPrototype",glslunit.Generator.prototype.visitFunctionPrototype);
glslunit.Generator.prototype.visitFunctionDeclaration=function(b){this.generateFunctionPrototype_(b);this.visitNode(b.body)};goog.exportProperty(glslunit.Generator.prototype,"visitFunctionDeclaration",glslunit.Generator.prototype.visitFunctionDeclaration);
glslunit.Generator.prototype.visitPreprocessor=function(b){var e=this.sourceCode_.slice(-1*this.newline_str_.length);e&&e!=this.newline_str_&&(this.sourceCode_+=this.newline_str_);this.sourceCode_+=b.directive;"#define"==b.directive?(this.sourceCode_+=" "+b.identifier,b.parameters&&(this.sourceCode_+="(",this.addNodesWithJoin_(b.parameters,","),this.sourceCode_+=")"),this.sourceCode_+=this.checkAndAdd(" ",b.token_string,"")):this.sourceCode_+=this.checkAndAdd(" ",b.value,"");this.sourceCode_+=this.newline_str_;
b.guarded_statements&&(this.addNodesWithJoin_(b.guarded_statements,""),b.elseBody&&this.visitNode(b.elseBody),"#if"==b.directive.slice(0,3)&&(e=this.sourceCode_.slice(-1*this.newline_str_.length),e!=this.newline_str_&&(this.sourceCode_+=this.newline_str_),this.sourceCode_+="#endif"+this.newline_str_))};goog.exportProperty(glslunit.Generator.prototype,"visitPreprocessor",glslunit.Generator.prototype.visitPreprocessor);
glslunit.Generator.prototype.generateWhile_=function(b){this.sourceCode_+="while(";this.visitNode(b.condition);this.sourceCode_+=")"};glslunit.Generator.prototype.visitDoStatement=function(b){this.sourceCode_+="do";"scope"!=b.body.type&&(this.sourceCode_+=" ");this.visitNode(b.body);this.generateWhile_(b)};goog.exportProperty(glslunit.Generator.prototype,"visitDoStatement",glslunit.Generator.prototype.visitDoStatement);
glslunit.Generator.prototype.visitWhileStatement=function(b){this.generateWhile_(b);this.visitNode(b.body)};goog.exportProperty(glslunit.Generator.prototype,"visitWhileStatement",glslunit.Generator.prototype.visitWhileStatement);glslunit.Generator.prototype.visitForStatement=function(b){this.sourceCode_+="for(";this.visitNode(b.initializer);this.visitNode(b.condition);this.sourceCode_+=";";this.visitNode(b.increment);this.sourceCode_+=")";this.visitNode(b.body)};
goog.exportProperty(glslunit.Generator.prototype,"visitForStatement",glslunit.Generator.prototype.visitForStatement);glslunit.Generator.prototype.visitIfStatement=function(b){this.sourceCode_+="if(";this.visitNode(b.condition);this.sourceCode_+=")";this.visitNode(b.body);b.elseBody&&(this.sourceCode_+="else","scope"!=b.elseBody.type&&(this.sourceCode_+=" "),this.visitNode(b.elseBody))};goog.exportProperty(glslunit.Generator.prototype,"visitIfStatement",glslunit.Generator.prototype.visitIfStatement);
glslunit.Generator.prototype.visitDeclaratorItem=function(b){this.visitNode(b.name);b.isArray&&(this.sourceCode_+="[",b.arraySize&&this.visitNode(b.arraySize),this.sourceCode_+="]");b.initializer&&(this.sourceCode_+="=",this.visitNode(b.initializer))};goog.exportProperty(glslunit.Generator.prototype,"visitDeclaratorItem",glslunit.Generator.prototype.visitDeclaratorItem);
glslunit.Generator.prototype.visitDeclarator=function(b){this.visitNode(b.typeAttribute);this.sourceCode_+=" ";this.addNodesWithJoin_(b.declarators,",");this.sourceCode_+=";";this.maybePrintNewline_()};goog.exportProperty(glslunit.Generator.prototype,"visitDeclarator",glslunit.Generator.prototype.visitDeclarator);glslunit.Generator.prototype.visitType=function(b){this.sourceCode_+=this.checkAndAdd("",b.qualifier," ");this.sourceCode_+=this.checkAndAdd("",b.precision," ");this.sourceCode_+=b.name};
goog.exportProperty(glslunit.Generator.prototype,"visitType",glslunit.Generator.prototype.visitType);glslunit.Generator.prototype.visitExpression=function(b){this.visitNode(b.expression);this.sourceCode_+=";";this.maybePrintNewline_()};goog.exportProperty(glslunit.Generator.prototype,"visitExpression",glslunit.Generator.prototype.visitExpression);
glslunit.Generator.prototype.visitJump=function(b){this.sourceCode_+=b.type;b.value&&(this.sourceCode_+=" ",this.visitNode(b.value));this.sourceCode_+=";";this.maybePrintNewline_()};goog.exportProperty(glslunit.Generator.prototype,"visitJump",glslunit.Generator.prototype.visitJump);glslunit.Generator.prototype.visitReturn=glslunit.Generator.prototype.visitJump;goog.exportProperty(glslunit.Generator.prototype,"visitReturn",glslunit.Generator.prototype.visitReturn);
glslunit.Generator.prototype.visitBreak=glslunit.Generator.prototype.visitJump;goog.exportProperty(glslunit.Generator.prototype,"visitBreak",glslunit.Generator.prototype.visitBreak);glslunit.Generator.prototype.visitDiscard=glslunit.Generator.prototype.visitJump;goog.exportProperty(glslunit.Generator.prototype,"visitDiscard",glslunit.Generator.prototype.visitDiscard);glslunit.Generator.prototype.visitContinue=glslunit.Generator.prototype.visitJump;
goog.exportProperty(glslunit.Generator.prototype,"visitContinue",glslunit.Generator.prototype.visitContinue);glslunit.Generator.prototype.visitUnary=function(b){this.sourceCode_.slice(-1)==b.operator.operator&&(this.sourceCode_+=" ");this.visitNode(b.operator);this.maybeParenthizeNode_(b.expression,b,0)};goog.exportProperty(glslunit.Generator.prototype,"visitUnary",glslunit.Generator.prototype.visitUnary);
glslunit.Generator.prototype.visitPostfix=function(b){this.maybeParenthizeNode_(b.expression,b,0);this.visitNode(b.operator)};goog.exportProperty(glslunit.Generator.prototype,"visitPostfix",glslunit.Generator.prototype.visitPostfix);glslunit.Generator.prototype.visitOperator=function(b){this.sourceCode_+=b.operator};goog.exportProperty(glslunit.Generator.prototype,"visitOperator",glslunit.Generator.prototype.visitOperator);
glslunit.Generator.prototype.visitFieldSelector=function(b){this.sourceCode_+="."+b.selection};goog.exportProperty(glslunit.Generator.prototype,"visitFieldSelector",glslunit.Generator.prototype.visitFieldSelector);glslunit.Generator.prototype.visitAccessor=function(b){this.sourceCode_+="[";this.visitNode(b.index);this.sourceCode_+="]"};goog.exportProperty(glslunit.Generator.prototype,"visitAccessor",glslunit.Generator.prototype.visitAccessor);
glslunit.Generator.prototype.visitFunctionCall=function(b){this.sourceCode_+=b.function_name+"(";this.addNodesWithJoin_(b.parameters,",");this.sourceCode_+=")"};goog.exportProperty(glslunit.Generator.prototype,"visitFunctionCall",glslunit.Generator.prototype.visitFunctionCall);glslunit.Generator.prototype.visitIdentifier=function(b){this.sourceCode_+=b.name};goog.exportProperty(glslunit.Generator.prototype,"visitIdentifier",glslunit.Generator.prototype.visitIdentifier);
glslunit.Generator.formatFloat=function(b){if(0==b)return"0.";var e=function(b){return b.toLowerCase().replace(/^0*|\+/g,"").replace(/(?:(\.[1-9]+)|\.)0*e/g,"$1e")},d=e(""+b);b=e(b.toExponential());-1==d.indexOf(".")&&-1==d.indexOf("e")&&(d+=".");return d.length<=b.length?d:b};glslunit.Generator.formatInt=function(b){var e=b.toString(10);b=(0>b?"-":"")+"0x"+Math.abs(b).toString(16).toLowerCase();return e.length<=b.length?e:b};glslunit.Generator.prototype.visitFloat=function(b){this.sourceCode_+=glslunit.Generator.formatFloat(b.value)};
goog.exportProperty(glslunit.Generator.prototype,"visitFloat",glslunit.Generator.prototype.visitFloat);glslunit.Generator.prototype.visitValue=function(b){this.sourceCode_+=b.value};goog.exportProperty(glslunit.Generator.prototype,"visitValue",glslunit.Generator.prototype.visitValue);glslunit.Generator.prototype.visitInt=function(b){this.sourceCode_+=glslunit.Generator.formatInt(b.value)};goog.exportProperty(glslunit.Generator.prototype,"visitInt",glslunit.Generator.prototype.visitInt);
glslunit.Generator.prototype.visitBool=glslunit.Generator.prototype.visitValue;goog.exportProperty(glslunit.Generator.prototype,"visitBool",glslunit.Generator.prototype.visitBool);glslunit.Generator.prototype.visitBinary=function(b){this.maybeParenthizeNode_(b.left,b,0);this.visitNode(b.operator);this.maybeParenthizeNode_(b.right,b,1)};goog.exportProperty(glslunit.Generator.prototype,"visitBinary",glslunit.Generator.prototype.visitBinary);
glslunit.Generator.prototype.visitTernary=function(b){this.maybeParenthizeNode_(b.condition,b,0);this.sourceCode_+="?";this.maybeParenthizeNode_(b.is_true,b,1);this.sourceCode_+=":";this.maybeParenthizeNode_(b.is_false,b,2)};goog.exportProperty(glslunit.Generator.prototype,"visitTernary",glslunit.Generator.prototype.visitTernary);
glslunit.Generator.prototype.maybeParenthizeNode_=function(b,e,d){var f=glslunit.Generator.getNodePrecedence_(b),g=glslunit.Generator.getNodePrecedence_(e),m=!1;f.precedence>g.precedence?m=!0:f.precedence==g.precedence?(glslunit.Generator.getNodeOperator_(b),glslunit.Generator.getNodeOperator_(e),m=g.evaluationOrder==glslunit.Generator.EvaluationOrder_.LTR&&0==d||g.evaluationOrder==glslunit.Generator.EvaluationOrder_.RTL&&d==g.maxOperands-1?!1:!0):m=!1;m&&(this.sourceCode_+="(");this.visitNode(b);
m&&(this.sourceCode_+=")")};glslunit.compiler.ShaderJsConst=function(){this.expression=this.shortName=this.originalName=""};glslunit.compiler.ShaderMode=function(){this.shortName=this.preprocessorName="";this.options=[]};glslunit.compiler.ShaderMode.prototype.clone=function(){var b=goog.object.clone(this);b.options=goog.array.clone(this.options);return b};
glslunit.compiler.ShaderAttributeEntry=function(){this.originalName=this.shortName="";this.debugSourceSize=this.debugSourceOffset=this.compiledSourceSize=this.compiledSourceOffset=this.variableSize=0};glslunit.compiler.ShaderUniformEntry=function(){this.type=this.originalName=this.shortName=""};
glslunit.compiler.ShaderProgram=function(){this.namespace=this.superClass=this.template=this.className="";this.licenses=[];this.jsRequires=[];this.jsConsts=[];this.templateProperties={};this.prettyPrint=!1;this.originalFragmentSource=this.originalVertexSource="";this.attributeMap={};this.uniformMap={};this.shaderModes=[];this.fragmentAst={};this.vertexAst={};this.includedFiles={}};
glslunit.compiler.ShaderProgram.prototype.clone=function(){var b=goog.object.clone(this);b.attributeMap=goog.object.clone(this.attributeMap);b.uniformMap=goog.object.clone(this.uniformMap);b.templateProperties=goog.object.clone(this.templateProperties);b.jsRequires=goog.array.clone(this.jsRequires);b.includedFiles=goog.object.clone(this.includedFiles);b.jsConsts=this.jsConsts.map(function(b){return goog.object.clone(b)});b.shaderModes=this.shaderModes.map(function(b){return b.clone()});return b};
glslunit.compiler.ShaderProgram.prototype.getVertexSource=function(b){return glslunit.Generator.getSourceCode(this.vertexAst,b||"\\n",this.prettyPrint)};goog.exportProperty(glslunit.compiler.ShaderProgram.prototype,"getVertexSource",glslunit.compiler.ShaderProgram.prototype.getVertexSource);glslunit.compiler.ShaderProgram.prototype.getFragmentSource=function(b){return glslunit.Generator.getSourceCode(this.fragmentAst,b||"\\n",this.prettyPrint)};
goog.exportProperty(glslunit.compiler.ShaderProgram.prototype,"getFragmentSource",glslunit.compiler.ShaderProgram.prototype.getFragmentSource);glslunit.compiler.ShaderProgram.escapeString=function(b,e){return b.replace(/\n/g,e||"\\n").replace(/'/g,"\\'")};glslunit.compiler.ShaderProgram.prototype.getOriginalFragmentSource=function(b){return glslunit.compiler.ShaderProgram.escapeString(this.originalFragmentSource,b)};
goog.exportProperty(glslunit.compiler.ShaderProgram.prototype,"getOriginalFragmentSource",glslunit.compiler.ShaderProgram.prototype.getOriginalFragmentSource);glslunit.compiler.ShaderProgram.prototype.getOriginalVertexSource=function(b){return glslunit.compiler.ShaderProgram.escapeString(this.originalVertexSource,b)};goog.exportProperty(glslunit.compiler.ShaderProgram.prototype,"getOriginalVertexSource",glslunit.compiler.ShaderProgram.prototype.getOriginalVertexSource);
glslunit.compiler.ShaderProgram.prototype.getAttributes=function(){var b=[],e;for(e in this.attributeMap)b.push(this.attributeMap[e]);0<b.length&&(b[b.length-1].last=!0);return b};goog.exportProperty(glslunit.compiler.ShaderProgram.prototype,"getAttributes",glslunit.compiler.ShaderProgram.prototype.getAttributes);glslunit.compiler.ShaderProgram.prototype.getUniforms=function(){var b=[],e;for(e in this.uniformMap)b.push(this.uniformMap[e]);0<b.length&&(b[b.length-1].last=!0);return b};
goog.exportProperty(glslunit.compiler.ShaderProgram.prototype,"getUniforms",glslunit.compiler.ShaderProgram.prototype.getUniforms);
glslunit.compiler.ShaderProgram.prototype.defaultProgramShortNames=function(){goog.array.forEach(this.jsConsts,function(b){""==b.shortName&&(b.shortName=b.originalName)});var b={},e;for(e in this.attributeMap){var d=this.attributeMap[e];b[d.shortName]=d}e={};for(var f in this.uniformMap)d=this.uniformMap[f],e[d.shortName]=d;this.defaultProgramVariables_(this.vertexAst,b,e);this.defaultProgramVariables_(this.fragmentAst,b,e)};
glslunit.compiler.ShaderProgram.prototype.defaultProgramVariables_=function(b,e,d){b=glslunit.NodeCollector.collectNodes(b,function(b){return"declarator"==b.type&&("attribute"==b.typeAttribute.qualifier||"uniform"==b.typeAttribute.qualifier)});goog.array.forEach(b,function(b){goog.array.forEach(b.declarators,function(g){g=g.name.name;var m=b.typeAttribute.name;if("attribute"==b.typeAttribute.qualifier){var p=e[g];if(!p){p=new glslunit.compiler.ShaderAttributeEntry;p.shortName=g;p.originalName=g;var q=
glslunit.Generator.getSourceCode(b),u=this.originalVertexSource.search(q),m=parseInt(m.slice(3,4),10);p.variableSize=isNaN(m)?1:m;p.debugSourceOffset=u;p.debugSourceSize=q.length;this.attributeMap[g]=p}}else p=d[g],p||(p=new glslunit.compiler.ShaderUniformEntry,p.shortName=g,p.originalName=g,p.type=m,this.uniformMap[g]=p)},this)},this)};glslunit.compiler.CompilerStep=function(){};glslunit.compiler.CompilerStep.prototype.getName=function(){};glslunit.compiler.CompilerStep.prototype.getDependencies=function(){};glslunit.compiler.CompilerStep.prototype.performStep=function(b,e){};glslunit.compiler.Compiler=function(b){this.phaseToSteps_={};this.shaderProgram_=b;this.stepOutputs_={};this.registeredSteps_={};goog.array.forEach(glslunit.compiler.Compiler.CompilerPhase.PHASE_ORDER_,function(b){this.phaseToSteps_[b]=[]},this)};glslunit.compiler.Compiler.CompilerPhase={OPTIMIZATION:0,MINIFICATION:1};glslunit.compiler.Compiler.CompilerPhase.PHASE_ORDER_=[glslunit.compiler.Compiler.CompilerPhase.OPTIMIZATION,glslunit.compiler.Compiler.CompilerPhase.MINIFICATION];
glslunit.compiler.Compiler.prototype.registerStep=function(b,e){this.registeredSteps_[e.getName()]=e;this.phaseToSteps_[b].push(e)};glslunit.compiler.Compiler.prototype.compileProgram=function(){goog.array.forEach(glslunit.compiler.Compiler.CompilerPhase.PHASE_ORDER_,function(b){goog.array.forEach(this.phaseToSteps_[b],function(b){this.runStep_(b,[])},this)},this);return this.shaderProgram_};
glslunit.compiler.Compiler.prototype.runStep_=function(b,e){var d=b.getName(),f=e.concat(d);if(-1!=e.indexOf(d))throw"Circular dependcy in compiler steps.  "+f.join("->");d in this.stepOutputs_||(goog.array.forEach(b.getDependencies(),function(b){b in this.registeredSteps_&&this.runStep_(this.registeredSteps_[b],f)},this),this.stepOutputs_[d]=b.performStep(this.stepOutputs_,this.shaderProgram_))};glslunit.VariableScopeVisitor=function(b,e){glslunit.ASTVisitor.call(this);this.targetScope_=b||null;this.promoteIfdefVars_=!!e;this.variablesInScope_={};this.stackFrames_=[];this.currentFrame_=[];this.scopeIdToFrame_={};this.scopeParameters_=[]};goog.inherits(glslunit.VariableScopeVisitor,glslunit.ASTVisitor);goog.exportSymbol("glslunit.VariableScopeVisitor",glslunit.VariableScopeVisitor);
glslunit.VariableScopeVisitor.prototype.getCurrentScopeVariables=function(){var b=this.stackFrames_.concat([this.currentFrame_]),e={};goog.array.forEachRight(b,function(b){goog.array.forEach(b,function(b){"declarator"==b.type?goog.array.forEach(b.declarators,function(d){goog.isDef(e[d.name.name])||(e[d.name.name]=b)},this):"parameter"==b.type&&(e[b.name]=b)},this)},this);return e};
glslunit.VariableScopeVisitor.prototype.beforeVisitScope=function(b){this.stackFrames_.push(this.currentFrame_);this.currentFrame_=[];[].push.apply(this.currentFrame_,this.scopeParameters_);this.scopeParameters_=[]};goog.exportProperty(glslunit.VariableScopeVisitor.prototype,"beforeVisitScope",glslunit.VariableScopeVisitor.prototype.beforeVisitScope);
glslunit.VariableScopeVisitor.prototype.afterVisitScope=function(b){this.scopeIdToFrame_[b.id]=this.currentFrame_;b==this.targetScope_&&(this.variablesInScope_=this.getCurrentScopeVariables());this.currentFrame_=this.stackFrames_.pop()};goog.exportProperty(glslunit.VariableScopeVisitor.prototype,"afterVisitScope",glslunit.VariableScopeVisitor.prototype.afterVisitScope);glslunit.VariableScopeVisitor.prototype.beforeVisitRoot=glslunit.VariableScopeVisitor.prototype.beforeVisitScope;
goog.exportProperty(glslunit.VariableScopeVisitor.prototype,"beforeVisitRoot",glslunit.VariableScopeVisitor.prototype.beforeVisitRoot);glslunit.VariableScopeVisitor.prototype.afterVisitPreprocessor=function(b){this.promoteIfdefVars_||this.afterVisitScope(b)};goog.exportProperty(glslunit.VariableScopeVisitor.prototype,"afterVisitPreprocessor",glslunit.VariableScopeVisitor.prototype.afterVisitPreprocessor);
glslunit.VariableScopeVisitor.prototype.beforeVisitPreprocessor=function(b){this.promoteIfdefVars_||this.beforeVisitScope(b)};goog.exportProperty(glslunit.VariableScopeVisitor.prototype,"beforeVisitPreprocessor",glslunit.VariableScopeVisitor.prototype.beforeVisitPreprocessor);glslunit.VariableScopeVisitor.prototype.afterVisitRoot=glslunit.VariableScopeVisitor.prototype.afterVisitScope;goog.exportProperty(glslunit.VariableScopeVisitor.prototype,"afterVisitRoot",glslunit.VariableScopeVisitor.prototype.afterVisitRoot);
glslunit.VariableScopeVisitor.prototype.beforeVisitDeclarator=function(b){this.currentFrame_.push(b)};goog.exportProperty(glslunit.VariableScopeVisitor.prototype,"beforeVisitDeclarator",glslunit.VariableScopeVisitor.prototype.beforeVisitDeclarator);glslunit.VariableScopeVisitor.prototype.beforeVisitFunctionDeclaration=function(b){this.scopeParameters_=b.parameters};goog.exportProperty(glslunit.VariableScopeVisitor.prototype,"beforeVisitFunctionDeclaration",glslunit.VariableScopeVisitor.prototype.beforeVisitFunctionDeclaration);
glslunit.VariableScopeVisitor.prototype.afterVisitFunctionDeclaration=function(b){this.scopeParameters_=[]};goog.exportProperty(glslunit.VariableScopeVisitor.prototype,"afterVisitFunctionDeclaration",glslunit.VariableScopeVisitor.prototype.afterVisitFunctionDeclaration);glslunit.VariableScopeVisitor.getScopeToDeclarationMap=function(b){var e=new glslunit.VariableScopeVisitor;e.visitNode(b);return e.scopeIdToFrame_};goog.exportProperty(glslunit.VariableScopeVisitor,"getScopeToDeclarationMap",glslunit.VariableScopeVisitor.getScopeToDeclarationMap);
glslunit.VariableScopeVisitor.getVariablesInScope=function(b,e,d){e=new glslunit.VariableScopeVisitor(e,d);e.visitNode(b);return e.variablesInScope_};glslunit.NodeCollector=function(b){glslunit.ASTVisitor.call(this);this.collectedNodes_=[];this.nodeStack_=[];this.filterFunction_=b};goog.inherits(glslunit.NodeCollector,glslunit.ASTVisitor);glslunit.NodeCollector.prototype.maybeCollectNode_=function(b){this.filterFunction_(b,this.nodeStack_.slice(0,-1))&&this.collectedNodes_.push(b);this.genericVisitor(b)};glslunit.NodeCollector.prototype.getCollectedNodes=function(){return this.collectedNodes_};
glslunit.NodeCollector.prototype.getBeforeVisitFunction=function(b){return goog.bind(Array.prototype.push,this.nodeStack_)};glslunit.NodeCollector.prototype.getAfterVisitFunction=function(b){return goog.bind(Array.prototype.pop,this.nodeStack_)};glslunit.NodeCollector.prototype.getVisitFunction=function(b){return this.maybeCollectNode_};glslunit.NodeCollector.collectNodes=function(b,e){var d=new glslunit.NodeCollector(e);d.visitNode(b);return d.getCollectedNodes()};glslunit.compiler.Preprocessor=function(){};glslunit.compiler.Preprocessor.RE_LICENSE_=/\/\*\*\n \* @license[\s\S]*?\*\//g;glslunit.compiler.Preprocessor.RE_CLASS_=/\/\/!\s*CLASS=(\S*)/;glslunit.compiler.Preprocessor.RE_SUPERCLASS_=/\/\/!\s*SUPERCLASS=(\S*)/;glslunit.compiler.Preprocessor.RE_NAMESPACE_=/\/\/!\s*NAMESPACE=(\S*)/;glslunit.compiler.Preprocessor.RE_FRAGMENT_=/\/\/!\s*FRAGMENT/;glslunit.compiler.Preprocessor.RE_VERTEX_=/\/\/!\s*VERTEX/;glslunit.compiler.Preprocessor.RE_COMMON_=/\/\/!\s*COMMON/;
glslunit.compiler.Preprocessor.RE_INCLUDE_=/\/\/!\s*INCLUDE\s+(.*)/;glslunit.compiler.Preprocessor.RE_REQUIRE_=/\/\/!\s*REQUIRE\s+(.*)/;glslunit.compiler.Preprocessor.RE_PROVIDE_=/\/\/!\s*PROVIDE\s+(.*)/;glslunit.compiler.Preprocessor.RE_TEMPLATE_=/\/\/!\s*TEMPLATE\s+(.*)/;glslunit.compiler.Preprocessor.RE_DEFAULT_MODE_=/\/\/!\s*MODE\s+(\S+)/;glslunit.compiler.Preprocessor.RE_MODE_=/\/\/!\s*MODE\s+(\S+)\s+(.*)/;glslunit.compiler.Preprocessor.RE_JSREQUIRE_=/\/\/!\s*JSREQUIRE\s+(\S+)/;
glslunit.compiler.Preprocessor.RE_JSCONST_=/\/\/!\s*JSCONST\s+(\S+)\s+(.*)/;glslunit.compiler.Preprocessor.RE_OVERRIDE_=/\/\/!\s*OVERRIDE\s+(\S+)\s+(\S+)/;glslunit.compiler.Preprocessor.RE_GLSL_DIAGNOSTICS_=/^(Error|Warning):(\d+):(?:\d+): (.*)$/gm;
glslunit.compiler.Preprocessor.ParseFile=function(b,e,d){function f(b,d){return b.replace(glslunit.compiler.Preprocessor.RE_GLSL_DIAGNOSTICS_,function(b,e,f,g,m,p){"Error"===e&&(B=!0);b=d[f-1];console.log(b.fileName+":"+(b.localLine+1)+": "+e+": "+g);return""})}var g=[],m=[],p={},q;for(q in e)goog.array.forEach(e[q].split("\n"),function(b){if(b=glslunit.compiler.Preprocessor.RE_PROVIDE_.exec(b)){b=b[1];if(b in p)throw Error("Symbol "+b+" is provided by two files, "+q+" and "+p[b]);p[b]=q}});var u=
{};b=glslunit.compiler.Preprocessor.ParseFileSource_(b,e,p,u,g,m);b.includedFiles=u;for(var u={},y,H=b.originalVertexSource+b.originalFragmentSource;y=glslunit.compiler.Preprocessor.RE_LICENSE_.exec(H);)y[0]in u||(u[y[0]]=!0,b.licenses.push(y[0]));u=b.originalVertexSource;y=b.originalFragmentSource;var B=!1;if(d){d=require("./glsl-optimizer").cwrap("optimize_glsl","string",["string","number","number"]);u=f(d(u,1,1),g);y=f(d(y,1,0),m);if(B)throw Error("Optimization pass failed.");m=g=null}try{b.vertexAst=
glslunit.glsl.parser.parse(u,"vertex_start")}catch(v){throw glslunit.compiler.Preprocessor.FormatParseError_(v,"vertex",g,y,e);}try{b.fragmentAst=glslunit.glsl.parser.parse(y,"fragment_start")}catch(D){throw glslunit.compiler.Preprocessor.FormatParseError_(D,"fragment",m,y,e);}b.defaultProgramShortNames();return b};glslunit.compiler.Preprocessor.Optimize_=function(b,e,d){};
glslunit.compiler.Preprocessor.FormatParseError_=function(b,e,d,f,g){e="Error while parsing the "+e+" shader code\n";if(d)d=d[b.line-1],e+=d.fileName+" "+(d.localLine+1)+":"+b.message+"\n"+g[d.fileName].split("\n")[d.localLine]+"\n"+Array(b.column).join(" ")+"^";else for(e+="<optimized code>:"+b.line+":"+b.message+"\n\nSource code:\n\n",b=f.split(/\r?\n/g),g=1;g<=b.length;++g)e+=g+": "+b[g-1]+"\n";return Error(e)};
glslunit.compiler.Preprocessor.ParseFileSource_=function(b,e,d,f,g,m){var p=!0,q=!0,u=new glslunit.compiler.ShaderProgram;if(!(b in e))throw Error("Library file "+b+" couldn't be found");var y=e[b].replace(/\\\n/g,"");goog.array.forEach(y.split("\n"),function(y,B){var v;if(v=glslunit.compiler.Preprocessor.RE_CLASS_.exec(y))u.className=v[1];else if(v=glslunit.compiler.Preprocessor.RE_SUPERCLASS_.exec(y))u.superClass=v[1];else if(v=glslunit.compiler.Preprocessor.RE_NAMESPACE_.exec(y))u.namespace=v[1];
else if(v=glslunit.compiler.Preprocessor.RE_FRAGMENT_.exec(y))q=!0,p=!1;else if(v=glslunit.compiler.Preprocessor.RE_VERTEX_.exec(y))q=!1,p=!0;else if(v=glslunit.compiler.Preprocessor.RE_COMMON_.exec(y))p=q=!0;else if(v=glslunit.compiler.Preprocessor.RE_MODE_.exec(y)){var D=new glslunit.compiler.ShaderMode;D.preprocessorName=v[1];v=v[2].split(",");if(2>v.length)throw b+" "+B+":0 Mode with less than two options given!\n\t"+y;goog.array.forEach(v,function(d){d=d.split(":");if(2!=d.length||!d[1].match(/^[0-9]+$/))throw b+
" "+B+":0 Mode option has invalid format!\n\t"+y;D.options.push({name:d[0],value:parseInt(d[1],10)})});u.shaderModes.push(D)}else if(v=glslunit.compiler.Preprocessor.RE_DEFAULT_MODE_.exec(y))D=new glslunit.compiler.ShaderMode,D.preprocessorName=v[1],D.options.push({name:"OFF",value:0}),D.options.push({name:"ON",value:1}),u.shaderModes.push(D);else if(v=glslunit.compiler.Preprocessor.RE_OVERRIDE_.exec(y))q&&(u.originalFragmentSource=glslunit.compiler.Preprocessor.OverrideFunction_(v[1],v[2],u.originalFragmentSource)),
p&&(u.originalVertexSource=glslunit.compiler.Preprocessor.OverrideFunction_(v[1],v[2],u.originalVertexSource));else if(v=glslunit.compiler.Preprocessor.RE_JSREQUIRE_.exec(y))u.jsRequires.push(v[1]);else if(v=glslunit.compiler.Preprocessor.RE_JSCONST_.exec(y)){var I=new glslunit.compiler.ShaderJsConst;I.originalName=v[1];I.expression=v[2];u.jsConsts.push(I)}q&&(u.originalFragmentSource+=y+"\n",m.push({fileName:b,localLine:B}));p&&(u.originalVertexSource+=y+"\n",g.push({fileName:b,localLine:B}));if(v=
glslunit.compiler.Preprocessor.RE_TEMPLATE_.exec(y))u.template=v[1];I=function(b){b in f||(f[b]=!0,b=glslunit.compiler.Preprocessor.ParseFileSource_(b,e,d,f,g,m),u.originalVertexSource+=b.originalVertexSource,u.originalFragmentSource+=b.originalFragmentSource,Array.prototype.push.apply(u.shaderModes,b.shaderModes),Array.prototype.push.apply(u.jsRequires,b.jsRequires),Array.prototype.push.apply(u.jsConsts,b.jsConsts))};if(v=glslunit.compiler.Preprocessor.RE_INCLUDE_.exec(y))I(v[1]);else if(v=glslunit.compiler.Preprocessor.RE_REQUIRE_.exec(y)){v=
v[1];if(!(v in d))throw Error("File "+b+"required symbol "+v+" but it was never provided.");I(d[v])}});return u};glslunit.compiler.Preprocessor.OverrideFunction_=function(b,e,d){for(var f=new RegExp("(void|float|int|bool|vec2|vec3|vec4| ivec2|ivec3|ivec4|bvec2|bvec3|bvec4|mat2|mat3|mat4)\\s+"+b+"(\\([^)]*\\))\\s*\\{","g"),g;g=f.exec(d);){var m=g[1];g=g[2];d=d.replace(f,m+" "+b+g+";"+m+" "+e+g+"{")}return d};glslunit.compiler.Utils=function(){};glslunit.compiler.Utils.getStructDeclarations=function(b){b=glslunit.NodeCollector.collectNodes(b,function(b,e){return"declarator"==b.type&&"struct_definition"==e.slice(-1)[0].type});var e=[];goog.array.forEach(b,function(b){e[b.id]=!0});return e};glslunit.CallGraphVisitor=function(){glslunit.ASTVisitor.call(this);this.callGraph_={};this.callGraph_[glslunit.CallGraphVisitor.ROOT_NAME]=[];this.currentFunctionName_=glslunit.CallGraphVisitor.ROOT_NAME};goog.inherits(glslunit.CallGraphVisitor,glslunit.ASTVisitor);glslunit.CallGraphVisitor.ROOT_NAME="#";glslunit.CallGraphVisitor.prototype.beforeVisitFunctionDeclaration=function(b){b.name in this.callGraph_||(this.callGraph_[b.name]=[]);this.currentFunctionName_=b.name};
goog.exportProperty(glslunit.CallGraphVisitor.prototype,"beforeVisitFunctionDeclaration",glslunit.CallGraphVisitor.prototype.beforeVisitFunctionDeclaration);glslunit.CallGraphVisitor.prototype.afterVisitFunctionDeclaration=function(b){this.currentFunctionName_=glslunit.CallGraphVisitor.ROOT_NAME};goog.exportProperty(glslunit.CallGraphVisitor.prototype,"afterVisitFunctionDeclaration",glslunit.CallGraphVisitor.prototype.afterVisitFunctionDeclaration);
glslunit.CallGraphVisitor.prototype.visitFunctionCall=function(b){this.callGraph_[this.currentFunctionName_].push(b.function_name);this.genericVisitor(b)};goog.exportProperty(glslunit.CallGraphVisitor.prototype,"visitFunctionCall",glslunit.CallGraphVisitor.prototype.visitFunctionCall);glslunit.CallGraphVisitor.getCallGraph=function(b){var e=new glslunit.CallGraphVisitor;e.visitNode(b);return e.callGraph_};glslunit.ASTTransformer=function(){this.mixed_in_visitors_=[]};glslunit.ASTTransformer.nextId_=-1;glslunit.ASTTransformer.getNextId=function(){return glslunit.ASTTransformer.nextId_--};glslunit.ASTTransformer.cloneNode=function(b){b=goog.object.clone(b);b.id=glslunit.ASTTransformer.getNextId();return b};glslunit.ASTTransformer.prototype.mixinVisitor=function(b){this.mixed_in_visitors_.push(b)};glslunit.ASTTransformer.prototype.getTransformFunction=function(b){return this["transform"+glslunit.utils.getFunctionSuffix(b.type)]};
glslunit.ASTTransformer.prototype.mixinVisitFunctions_=function(b,e,d){var f=this[e+glslunit.utils.getFunctionSuffix(b.type)];return goog.bind(function(b){goog.array.forEach(this.mixed_in_visitors_,function(e){var f=d(e).apply(e,[b]);f&&f.apply(e,[b])});f&&f.apply(this,[b])},this)};glslunit.ASTTransformer.prototype.getBeforeTransformFunction=function(b){return this.mixinVisitFunctions_(b,"beforeTransform",function(b){return b.getBeforeVisitFunction})};
glslunit.ASTTransformer.prototype.getAfterTransformFunction=function(b){return this.mixinVisitFunctions_(b,"afterTransform",function(b){return b.getAfterVisitFunction})};
glslunit.ASTTransformer.prototype.transformNode=function(b){var e=!1,d=this.getBeforeTransformFunction(b);d&&d.apply(this,[b]);var d=glslunit.ASTTransformer.cloneNode(b),f;for(f in b){var g=b[f];if(goog.isArray(g)){d[f]=[];for(var m=0;m<g.length;m++){var p=g[m],q=this.transformNode(p);q!=p&&(e=!0);null!=q&&Array.prototype.push.apply(d[f],goog.isArray(q)?q:[q])}}else g&&g.type&&(q=this.transformNode(g),q!=g&&(e=!0,null!=q?d[f]=q:delete d[f]))}f=this.getTransformFunction(b);d=e?d:b;f&&(d=f.apply(this,
[d,b]));(e=this.getAfterTransformFunction(b))&&e.apply(this,[b,d]);return d};glslunit.compiler.VariableMinifier=function(b){glslunit.ASTTransformer.call(this);this.variableStack_=[];this.currentNameGenerator_=new glslunit.compiler.NameGenerator;this.currentDeclaratorNode_=null;this.maxNameId_=0;this.minifyPublicVariables_=b;this.structDeclaratorNodes_=[]};goog.inherits(glslunit.compiler.VariableMinifier,glslunit.ASTTransformer);
glslunit.compiler.VariableMinifier.prototype.shouldRenameNode_=function(b){if(!b)return!1;var e=b.typeAttribute.qualifier;return(this.minifyPublicVariables_||"uniform"!=e&&"attribute"!=e)&&!(b.id in this.structDeclaratorNodes_)};glslunit.compiler.VariableMinifier.prototype.setShaderProgram=function(b){this.shaderProgram_=b};
glslunit.compiler.VariableMinifier.prototype.beforeTransformRoot=function(b){this.structDeclaratorNodes_=glslunit.compiler.Utils.getStructDeclarations(b);var e=[];b=glslunit.VariableScopeVisitor.getVariablesInScope(b,b,!0);for(var d in b){var f=b[d];this.shouldRenameNode_(f)&&(f=f.typeAttribute.qualifier,"varying"==f||"uniform"==f?this.currentNameGenerator_.shortenSymbol(d):e.push(d))}goog.array.forEach(e,function(b){this.currentNameGenerator_.shortenSymbol(b)},this)};
goog.exportProperty(glslunit.compiler.VariableMinifier.prototype,"beforeTransformRoot",glslunit.compiler.VariableMinifier.prototype.beforeTransformRoot);glslunit.compiler.VariableMinifier.prototype.beforeTransformDeclarator=function(b){this.currentDeclaratorNode_=b};goog.exportProperty(glslunit.compiler.VariableMinifier.prototype,"beforeTransformDeclarator",glslunit.compiler.VariableMinifier.prototype.beforeTransformDeclarator);
glslunit.compiler.VariableMinifier.prototype.afterTransformDeclarator=function(b){this.currentDeclaratorNode_=null};goog.exportProperty(glslunit.compiler.VariableMinifier.prototype,"afterTransformDeclarator",glslunit.compiler.VariableMinifier.prototype.afterTransformDeclarator);glslunit.compiler.VariableMinifier.prototype.transformParameter=function(b){var e=glslunit.ASTTransformer.cloneNode(b);e.name=this.currentNameGenerator_.shortenSymbol(b.name);return e};
goog.exportProperty(glslunit.compiler.VariableMinifier.prototype,"transformParameter",glslunit.compiler.VariableMinifier.prototype.transformParameter);glslunit.compiler.VariableMinifier.prototype.pushStack_=function(b){this.variableStack_.push(this.currentNameGenerator_);this.currentNameGenerator_=this.currentNameGenerator_.clone()};
glslunit.compiler.VariableMinifier.prototype.popStack_=function(b){this.maxNameId_=Math.max(this.maxNameId_,this.currentNameGenerator_.getNextNameIndex());this.currentNameGenerator_=this.variableStack_.pop()};glslunit.compiler.VariableMinifier.prototype.beforeTransformScope=glslunit.compiler.VariableMinifier.prototype.pushStack_;goog.exportProperty(glslunit.compiler.VariableMinifier.prototype,"beforeTransformScope",glslunit.compiler.VariableMinifier.prototype.beforeTransformScope);
glslunit.compiler.VariableMinifier.prototype.afterTransformScope=glslunit.compiler.VariableMinifier.prototype.popStack_;goog.exportProperty(glslunit.compiler.VariableMinifier.prototype,"afterTransformScope",glslunit.compiler.VariableMinifier.prototype.afterTransformScope);glslunit.compiler.VariableMinifier.prototype.beforeTransformFunctionDeclaration=glslunit.compiler.VariableMinifier.prototype.pushStack_;
goog.exportProperty(glslunit.compiler.VariableMinifier.prototype,"beforeTransformFunctionDeclaration",glslunit.compiler.VariableMinifier.prototype.beforeTransformFunctionDeclaration);glslunit.compiler.VariableMinifier.prototype.afterTransformFunctionDeclaration=glslunit.compiler.VariableMinifier.prototype.popStack_;goog.exportProperty(glslunit.compiler.VariableMinifier.prototype,"afterTransformFunctionDeclaration",glslunit.compiler.VariableMinifier.prototype.afterTransformFunctionDeclaration);
glslunit.compiler.VariableMinifier.prototype.beforeTransformFunctionPrototype=glslunit.compiler.VariableMinifier.prototype.pushStack_;goog.exportProperty(glslunit.compiler.VariableMinifier.prototype,"beforeTransformFunctionPrototype",glslunit.compiler.VariableMinifier.prototype.beforeTransformFunctionPrototype);glslunit.compiler.VariableMinifier.prototype.afterTransformFunctionPrototype=glslunit.compiler.VariableMinifier.prototype.popStack_;
goog.exportProperty(glslunit.compiler.VariableMinifier.prototype,"afterTransformFunctionPrototype",glslunit.compiler.VariableMinifier.prototype.afterTransformFunctionPrototype);
glslunit.compiler.VariableMinifier.prototype.beforeTransformDeclaratorItem=function(b){var e=b.name.name,d;this.currentDeclaratorNode_&&(d=this.currentDeclaratorNode_.typeAttribute.qualifier);this.shouldRenameNode_(this.currentDeclaratorNode_)&&(e=this.currentNameGenerator_.shortenSymbol(b.name.name));this.shaderProgram_&&this.currentDeclaratorNode_&&("attribute"==d?this.shaderProgram_.attributeMap[b.name.name].shortName=e:"uniform"==d&&(this.shaderProgram_.uniformMap[b.name.name].shortName=e));return b};
goog.exportProperty(glslunit.compiler.VariableMinifier.prototype,"beforeTransformDeclaratorItem",glslunit.compiler.VariableMinifier.prototype.beforeTransformDeclaratorItem);glslunit.compiler.VariableMinifier.prototype.transformIdentifier=function(b){var e=this.currentNameGenerator_.getShortSymbol(b.name);b.name!=e&&(b=glslunit.ASTTransformer.cloneNode(b),b.name=e);return b};goog.exportProperty(glslunit.compiler.VariableMinifier.prototype,"transformIdentifier",glslunit.compiler.VariableMinifier.prototype.transformIdentifier);
glslunit.compiler.VariableMinifier.NAME="VariableMinifier";glslunit.compiler.VariableMinifier.prototype.getName=function(){return glslunit.compiler.VariableMinifier.NAME};glslunit.compiler.VariableMinifier.prototype.getDependencies=function(){return[]};
glslunit.compiler.VariableMinifier.prototype.performStep=function(b,e){var d=new glslunit.compiler.VariableMinifier(this.minifyPublicVariables_);d.setShaderProgram(e);e.vertexAst=d.transformNode(e.vertexAst);var f=new glslunit.compiler.VariableMinifier(this.minifyPublicVariables_);f.setShaderProgram(e);f.currentNameGenerator_=d.currentNameGenerator_;e.fragmentAst=f.transformNode(e.fragmentAst);return{vertexMaxId:d.maxNameId_,fragmentMaxId:f.maxNameId_}};glslunit.compiler.DeclarationConsolidation=function(b){glslunit.ASTTransformer.call(this);this.scopeIdToDeclarators_={};this.currentDeclarator_=null;this.typeMapStack_=[];this.forInitializerNodes_=[];this.structDeclaratorNodes_=[];this.consolidateInterface_=b};goog.inherits(glslunit.compiler.DeclarationConsolidation,glslunit.ASTTransformer);
glslunit.compiler.DeclarationConsolidation.prototype.beforeTransformRoot=function(b){var e=glslunit.NodeCollector.collectNodes(b,function(b){return"for_statement"==b.type});goog.array.forEach(e,function(b){this.forInitializerNodes_[b.initializer.id]=!0},this);this.structDeclaratorNodes_=glslunit.compiler.Utils.getStructDeclarations(b);var e=glslunit.VariableScopeVisitor.getScopeToDeclarationMap(b),d;for(d in e){var f={};goog.array.forEach(e[+d],function(e){if("declarator"==e.type&&this.shouldConsolidateDeclarator_(e,
d==b.id)){var m=glslunit.Generator.getSourceCode(e.typeAttribute);f[m]||(f[m]=[]);goog.array.forEach(e.declarators,function(b){var d=b;d.initializer&&(d=glslunit.ASTTransformer.cloneNode(b),delete d.initializer);f[m].push(d)},this)}},this);this.scopeIdToDeclarators_[+d]=f}this.beforeTransformScope(b)};goog.exportProperty(glslunit.compiler.DeclarationConsolidation.prototype,"beforeTransformRoot",glslunit.compiler.DeclarationConsolidation.prototype.beforeTransformRoot);
glslunit.compiler.DeclarationConsolidation.prototype.beforeTransformDeclarator=function(b){this.currentDeclarator_=b};goog.exportProperty(glslunit.compiler.DeclarationConsolidation.prototype,"beforeTransformDeclarator",glslunit.compiler.DeclarationConsolidation.prototype.beforeTransformDeclarator);glslunit.compiler.DeclarationConsolidation.prototype.afterTransformDeclarator=function(b){this.currentDeclarator_=null};
goog.exportProperty(glslunit.compiler.DeclarationConsolidation.prototype,"afterTransformDeclarator",glslunit.compiler.DeclarationConsolidation.prototype.afterTransformDeclarator);glslunit.compiler.DeclarationConsolidation.prototype.beforeTransformScope=function(b){this.typeMapStack_.push(this.scopeIdToDeclarators_[b.id])};goog.exportProperty(glslunit.compiler.DeclarationConsolidation.prototype,"beforeTransformScope",glslunit.compiler.DeclarationConsolidation.prototype.beforeTransformScope);
glslunit.compiler.DeclarationConsolidation.prototype.beforeTransformPreprocessor=glslunit.compiler.DeclarationConsolidation.prototype.beforeTransformScope;goog.exportProperty(glslunit.compiler.DeclarationConsolidation.prototype,"beforeTransformPreprocessor",glslunit.compiler.DeclarationConsolidation.prototype.beforeTransformPreprocessor);glslunit.compiler.DeclarationConsolidation.prototype.afterTransformScope=function(b){this.typeMapStack_.pop()};
goog.exportProperty(glslunit.compiler.DeclarationConsolidation.prototype,"afterTransformScope",glslunit.compiler.DeclarationConsolidation.prototype.afterTransformScope);glslunit.compiler.DeclarationConsolidation.prototype.afterTransformPreprocessor=glslunit.compiler.DeclarationConsolidation.prototype.afterTransformScope;goog.exportProperty(glslunit.compiler.DeclarationConsolidation.prototype,"afterTransformPreprocessor",glslunit.compiler.DeclarationConsolidation.prototype.afterTransformPreprocessor);
glslunit.compiler.DeclarationConsolidation.prototype.shouldConsolidateDeclarator_=function(b,e){var d=glslunit.Generator.getSourceCode(b.typeAttribute),f=null,g=b.typeAttribute.qualifier;0<this.typeMapStack_.length&&(f=this.typeMapStack_.slice(-1)[0][d]);return null!=b&&(this.consolidateInterface_||"attribute"!=g)&&(this.consolidateInterface_||"uniform"!=g)&&"const"!=b.typeAttribute.qualifier&&(!f||1<f.length)&&!(b.id in this.forInitializerNodes_)&&!(b.id in this.structDeclaratorNodes_)&&!(e&&!goog.array.every(b.declarators,
function(b){return!goog.isDef(b.initializer)}))};glslunit.compiler.DeclarationConsolidation.prototype.transformDeclaratorItem=function(b){return this.shouldConsolidateDeclarator_(this.currentDeclarator_,1==this.typeMapStack_.length)?b.initializer?{id:glslunit.ASTTransformer.getNextId(),type:"expression",expression:{id:glslunit.ASTTransformer.getNextId(),type:"binary",operator:{id:glslunit.ASTTransformer.getNextId(),type:"operator",operator:"="},left:b.name,right:b.initializer}}:null:b};
goog.exportProperty(glslunit.compiler.DeclarationConsolidation.prototype,"transformDeclaratorItem",glslunit.compiler.DeclarationConsolidation.prototype.transformDeclaratorItem);
glslunit.compiler.DeclarationConsolidation.prototype.transformDeclarator=function(b){if(!this.shouldConsolidateDeclarator_(b,1==this.typeMapStack_.length))return b;var e=[],d=glslunit.Generator.getSourceCode(b.typeAttribute),f=this.typeMapStack_.slice(-1)[0],g=f[d];g&&(e=glslunit.ASTTransformer.cloneNode(b),e.declarators=g,e=[e],delete f[d]);b.declarators&&0!=b.declarators.length&&Array.prototype.push.apply(e,b.declarators);return e};
goog.exportProperty(glslunit.compiler.DeclarationConsolidation.prototype,"transformDeclarator",glslunit.compiler.DeclarationConsolidation.prototype.transformDeclarator);glslunit.compiler.DeclarationConsolidation.NAME="DeclarationConsolidation";glslunit.compiler.DeclarationConsolidation.prototype.getName=function(){return glslunit.compiler.DeclarationConsolidation.NAME};glslunit.compiler.DeclarationConsolidation.prototype.getDependencies=function(){return[]};
glslunit.compiler.DeclarationConsolidation.prototype.performStep=function(b,e){var d=new glslunit.compiler.DeclarationConsolidation(this.consolidateInterface_),f=new glslunit.compiler.DeclarationConsolidation(this.consolidateInterface_);e.vertexAst=d.transformNode(e.vertexAst);e.fragmentAst=f.transformNode(e.fragmentAst);return[]};glslunit.compiler.FunctionMinifier=function(){glslunit.ASTTransformer.call(this);this.nameGenerator_=new glslunit.compiler.NameGenerator};goog.inherits(glslunit.compiler.FunctionMinifier,glslunit.ASTTransformer);glslunit.compiler.FunctionMinifier.globalFunctions_={main:!0};glslunit.compiler.FunctionMinifier.prototype.beforeTransformFunctionDeclaration=function(b){b.name in glslunit.compiler.FunctionMinifier.globalFunctions_||this.nameGenerator_.shortenSymbol(b.name)};
goog.exportProperty(glslunit.compiler.FunctionMinifier.prototype,"beforeTransformFunctionDeclaration",glslunit.compiler.FunctionMinifier.prototype.beforeTransformFunctionDeclaration);glslunit.compiler.FunctionMinifier.prototype.transformFunctionDeclaration=function(b){var e=this.nameGenerator_.getShortSymbol(b.name);e!=b.name&&(b=glslunit.ASTTransformer.cloneNode(b),b.name=e);return b};goog.exportProperty(glslunit.compiler.FunctionMinifier.prototype,"transformFunctionDeclaration",glslunit.compiler.FunctionMinifier.prototype.transformFunctionDeclaration);
glslunit.compiler.FunctionMinifier.prototype.transformFunctionCall=function(b){var e=this.nameGenerator_.getShortSymbol(b.function_name);e!=b.function_name&&(b=glslunit.ASTTransformer.cloneNode(b),b.function_name=e);return b};goog.exportProperty(glslunit.compiler.FunctionMinifier.prototype,"transformFunctionCall",glslunit.compiler.FunctionMinifier.prototype.transformFunctionCall);glslunit.compiler.FunctionMinifier.prototype.beforeTransformFunctionPrototype=glslunit.compiler.FunctionMinifier.prototype.beforeTransformFunctionDeclaration;
goog.exportProperty(glslunit.compiler.FunctionMinifier.prototype,"beforeTransformFunctionPrototype",glslunit.compiler.FunctionMinifier.prototype.beforeTransformFunctionPrototype);glslunit.compiler.FunctionMinifier.prototype.transformFunctionPrototype=glslunit.compiler.FunctionMinifier.prototype.transformFunctionDeclaration;goog.exportProperty(glslunit.compiler.FunctionMinifier.prototype,"transformFunctionPrototype",glslunit.compiler.FunctionMinifier.prototype.transformFunctionPrototype);
glslunit.compiler.FunctionMinifier.NAME="Function Minifier";glslunit.compiler.FunctionMinifier.prototype.getName=function(){return glslunit.compiler.FunctionMinifier.NAME};glslunit.compiler.FunctionMinifier.prototype.getDependencies=function(){return[glslunit.compiler.VariableMinifier.NAME]};
glslunit.compiler.FunctionMinifier.prototype.performStep=function(b,e){var d=0,f=0;glslunit.compiler.VariableMinifier.NAME in b&&(d=b[glslunit.compiler.VariableMinifier.NAME].vertexMaxId,f=b[glslunit.compiler.VariableMinifier.NAME].fragmentMaxId);var g=new glslunit.compiler.FunctionMinifier;g.nameGenerator_.nextNameIndex=d;d=new glslunit.compiler.FunctionMinifier;e.vertexAst=g.transformNode(e.vertexAst);d.nameGenerator_.nextNameIndex=f;e.fragmentAst=d.transformNode(e.fragmentAst);return[]};glslunit.compiler.DeadFunctionRemover=function(){glslunit.ASTTransformer.call(this);this.functionAlive_={}};goog.inherits(glslunit.compiler.DeadFunctionRemover,glslunit.ASTTransformer);glslunit.compiler.DeadFunctionRemover.prototype.beforeTransformRoot=function(b){b=glslunit.CallGraphVisitor.getCallGraph(b);this.functionAlive_={};for(var e in b)this.functionAlive_[e]=!1;this.markAlive_("main",b);this.markAlive_(glslunit.CallGraphVisitor.ROOT_NAME,b)};
goog.exportProperty(glslunit.compiler.DeadFunctionRemover.prototype,"beforeTransformRoot",glslunit.compiler.DeadFunctionRemover.prototype.beforeTransformRoot);glslunit.compiler.DeadFunctionRemover.prototype.markAlive_=function(b,e){b in this.functionAlive_&&!this.functionAlive_[b]&&(this.functionAlive_[b]=!0,goog.array.forEach(e[b],function(b){this.markAlive_(b,e)},this))};
glslunit.compiler.DeadFunctionRemover.prototype.transformFunctionDeclaration=function(b){return this.functionAlive_[b.name]?b:null};goog.exportProperty(glslunit.compiler.DeadFunctionRemover.prototype,"transformFunctionDeclaration",glslunit.compiler.DeadFunctionRemover.prototype.transformFunctionDeclaration);glslunit.compiler.DeadFunctionRemover.prototype.transformFunctionPrototype=glslunit.compiler.DeadFunctionRemover.prototype.transformFunctionDeclaration;
goog.exportProperty(glslunit.compiler.DeadFunctionRemover.prototype,"transformFunctionPrototype",glslunit.compiler.DeadFunctionRemover.prototype.transformFunctionPrototype);glslunit.compiler.DeadFunctionRemover.NAME="DeadFunctionRemover";glslunit.compiler.DeadFunctionRemover.prototype.getName=function(){return glslunit.compiler.DeadFunctionRemover.NAME};glslunit.compiler.DeadFunctionRemover.prototype.getDependencies=function(){return[]};
glslunit.compiler.DeadFunctionRemover.prototype.performStep=function(b,e){var d=new glslunit.compiler.DeadFunctionRemover,f=new glslunit.compiler.DeadFunctionRemover;e.vertexAst=d.transformNode(e.vertexAst);e.fragmentAst=f.transformNode(e.fragmentAst);return[]};glslunit.compiler.ConstructorMinifier=function(){glslunit.ASTTransformer.call(this);this.nodeStack_=[]};goog.inherits(glslunit.compiler.ConstructorMinifier,glslunit.ASTTransformer);glslunit.compiler.ConstructorMinifier.CONVERSION_FUNCTIONS_={vec2:2,vec3:3,vec4:4,bvec2:2,bvec3:3,bvec4:4,ivec2:2,ivec3:3,ivec4:4,mat2:4,mat3:9,mat4:16,"float":1,"int":1,bool:1};glslunit.compiler.ConstructorMinifier.prototype.getBeforeTransformFunction=function(b){return goog.bind(Array.prototype.push,this.nodeStack_)};
glslunit.compiler.ConstructorMinifier.prototype.getAfterTransformFunction=function(b){return goog.bind(Array.prototype.pop,this.nodeStack_)};glslunit.compiler.ConstructorMinifier.prototype.parentIsConstructor_=function(){var b=this.nodeStack_.slice(-2)[0];return"function_call"==b.type&&b.function_name in glslunit.compiler.ConstructorMinifier.CONVERSION_FUNCTIONS_};
glslunit.compiler.ConstructorMinifier.prototype.maybeConvertToInt_=function(b){if(this.parentIsConstructor_()&&65536>Math.abs(b.value)&&b.value==Math.round(b.value)){var e=glslunit.ASTTransformer.cloneNode(b);e.type="int";e.value=Number(b.value);return e}return b};glslunit.compiler.ConstructorMinifier.prototype.transformFloat=glslunit.compiler.ConstructorMinifier.prototype.maybeConvertToInt_;goog.exportProperty(glslunit.compiler.ConstructorMinifier.prototype,"transformFloat",glslunit.compiler.ConstructorMinifier.prototype.transformFloat);
glslunit.compiler.ConstructorMinifier.prototype.transformBool=glslunit.compiler.ConstructorMinifier.prototype.maybeConvertToInt_;goog.exportProperty(glslunit.compiler.ConstructorMinifier.prototype,"transformBool",glslunit.compiler.ConstructorMinifier.prototype.transformBool);
glslunit.compiler.ConstructorMinifier.prototype.transformFunctionCall=function(b){var e=glslunit.compiler.ConstructorMinifier.CONVERSION_FUNCTIONS_[b.function_name];if(e){if(this.parentIsConstructor_()&&b.parameters.length==e)return b.parameters;if(b.parameters&&1<b.parameters.length){var d=glslunit.Generator.getSourceCode(b.parameters[0]),f=!1;if("mat"==b.function_name.slice(0,3)){if(b.parameters.length==e){for(var e=!0,g=parseInt(b.function_name.slice(-1),10),m=0;m<g&&e;m++)for(var p=0;p<g&&e;p++)e=
glslunit.Generator.getSourceCode(b.parameters[m*g+p])==(m==p?d:"0");e&&(f=!0)}}else goog.array.every(b.parameters,function(b){return glslunit.Generator.getSourceCode(b)==d})&&(f=!0);if(f)return f=glslunit.ASTTransformer.cloneNode(b),f.parameters=[b.parameters[0]],f}}return b};goog.exportProperty(glslunit.compiler.ConstructorMinifier.prototype,"transformFunctionCall",glslunit.compiler.ConstructorMinifier.prototype.transformFunctionCall);glslunit.compiler.ConstructorMinifier.NAME="ConstructorMinifier";
glslunit.compiler.ConstructorMinifier.prototype.getName=function(){return glslunit.compiler.ConstructorMinifier.NAME};glslunit.compiler.ConstructorMinifier.prototype.getDependencies=function(){return[]};glslunit.compiler.ConstructorMinifier.prototype.performStep=function(b,e){var d=new glslunit.compiler.ConstructorMinifier,f=new glslunit.compiler.ConstructorMinifier;e.vertexAst=d.transformNode(e.vertexAst);e.fragmentAst=f.transformNode(e.fragmentAst);return[]};glslunit.compiler.BraceReducer=function(){glslunit.ASTTransformer.call(this)};goog.inherits(glslunit.compiler.BraceReducer,glslunit.ASTTransformer);glslunit.compiler.BraceReducer.maybeConvertScopeToStatement_=function(b,e){var d=b[e],f=b;d&&"scope"==d.type&&1==d.statements.length&&(f=glslunit.ASTTransformer.cloneNode(b),f[e]=d.statements[0]);return f};
glslunit.compiler.BraceReducer.prototype.transformIfStatement=function(b){b=glslunit.compiler.BraceReducer.maybeConvertScopeToStatement_(b,"body");return glslunit.compiler.BraceReducer.maybeConvertScopeToStatement_(b,"elseBody")};goog.exportProperty(glslunit.compiler.BraceReducer.prototype,"transformIfStatement",glslunit.compiler.BraceReducer.prototype.transformIfStatement);
glslunit.compiler.BraceReducer.prototype.transformWhileStatement=function(b){return glslunit.compiler.BraceReducer.maybeConvertScopeToStatement_(b,"body")};goog.exportProperty(glslunit.compiler.BraceReducer.prototype,"transformWhileStatement",glslunit.compiler.BraceReducer.prototype.transformWhileStatement);glslunit.compiler.BraceReducer.prototype.transformDoStatement=function(b){return glslunit.compiler.BraceReducer.maybeConvertScopeToStatement_(b,"body")};
goog.exportProperty(glslunit.compiler.BraceReducer.prototype,"transformDoStatement",glslunit.compiler.BraceReducer.prototype.transformDoStatement);glslunit.compiler.BraceReducer.prototype.transformForStatement=function(b){return glslunit.compiler.BraceReducer.maybeConvertScopeToStatement_(b,"body")};goog.exportProperty(glslunit.compiler.BraceReducer.prototype,"transformForStatement",glslunit.compiler.BraceReducer.prototype.transformForStatement);glslunit.compiler.BraceReducer.NAME="BraceReducer";
glslunit.compiler.BraceReducer.prototype.getName=function(){return glslunit.compiler.BraceReducer.NAME};glslunit.compiler.BraceReducer.prototype.getDependencies=function(){return[]};glslunit.compiler.BraceReducer.prototype.performStep=function(b,e){var d=new glslunit.compiler.BraceReducer,f=new glslunit.compiler.BraceReducer;e.vertexAst=d.transformNode(e.vertexAst);e.fragmentAst=f.transformNode(e.fragmentAst);return[]};var glslprep={};goog.node.FLAGS.define_string("input",void 0,"The input file in GLSL.");goog.node.FLAGS.define_string("output","","The output js file.");goog.node.FLAGS.define_string("template","","The output shader source code file.");goog.node.FLAGS.define_string("glsl_include_prefix","","Compiler will try prefixing this flag to the path of glsllib files. If not found there use ones in current directory.");goog.node.FLAGS.define_string_array("template_include_prefix",[],"Compiler will try prefixing this flag to the path of template files. If not found there use ones in current directory.");
goog.node.FLAGS.define_bool("remove_dead_functions",!0,"Compiler will remove any functions it determines to be dead.");goog.node.FLAGS.define_string("variable_renaming","ALL","The level at which the compiler will minify variable names.  ALL will minify all variable names, including uniforms and attributes but can also output a map of old names to new names.  INTERNAL will only minifyvariables that aren't exposed to JavaScript.  OFF won't minify any variables.");
goog.node.FLAGS.define_string("consolidate_declarations","ALL","The level at which the compiler will consolidate declarations.  ALL will consolidate all declarations, including attributes (this can change the values returned by getAttribLocation).  INTERNAL will consolidate all variables with the exception of attributes.  OFF won'tconsolidate any attributes.");goog.node.FLAGS.define_bool("run_optimizer",!0,"Run emscripten-compiled glsl-optimizer");
goog.node.FLAGS.define_bool("function_renaming",!0,"Compiler will minify all function names.");goog.node.FLAGS.define_bool("remove_braces",!0,"Remove all braces that aren't required.");goog.node.FLAGS.define_bool("minify_constructors",!0,"Compiler will minify all constructor calls where it can by removing inputs and converting types to int where possible.  For example, vec4(1.0, 1.0, 1.0, 1.0) will become vec4(1).");goog.node.FLAGS.define_bool("pretty_print",!1,"Output pretty-printed GLSL source code.");
goog.node.FLAGS.define_string_array("template_property",[],"Properties to be passed down to template for rendering.");goog.node.FLAGS.parseArgs();var GLSL_EXTENSIONS={".glsl":!0,".glsllib":!0};
function loadFiles(b,e,d){var f=[b];d=d||function(b){return!0};e&&e.forEach(function(d){f.push(path.join(b,d))});var g={};f.forEach(function(b){fs.readdirSync(b).filter(function(e){return!fs.statSync(path.join(b,e)).isDirectory()&&d(e)}).forEach(function(d){g[d]=fs.readFileSync(path.join(b,d),"utf8")})});return g}
function main(){var b=path.dirname(goog.node.FLAGS.input),e=loadFiles(b,goog.node.FLAGS.glsl_include_prefix,function(b){return path.extname(b)in GLSL_EXTENSIONS}),b=loadFiles(b,goog.node.FLAGS.template_include_prefix);(new Date).getTime();try{var d=glslunit.compiler.Preprocessor.ParseFile(path.basename(goog.node.FLAGS.input),e,goog.node.FLAGS.run_optimizer)}catch(f){console.error(f.message),process.exit(1)}(new Date).getTime();(new Date).getTime();d=new glslunit.compiler.Compiler(d);e={ALL:!0,INTERNAL:!1};
goog.node.FLAGS.remove_dead_functions&&d.registerStep(glslunit.compiler.Compiler.CompilerPhase.MINIFICATION,new glslunit.compiler.DeadFunctionRemover);goog.node.FLAGS.remove_braces&&d.registerStep(glslunit.compiler.Compiler.CompilerPhase.MINIFICATION,new glslunit.compiler.BraceReducer);goog.node.FLAGS.variable_renaming in e&&d.registerStep(glslunit.compiler.Compiler.CompilerPhase.MINIFICATION,new glslunit.compiler.VariableMinifier(e[goog.node.FLAGS.variable_renaming]));goog.node.FLAGS.consolidate_declarations in
e&&d.registerStep(glslunit.compiler.Compiler.CompilerPhase.MINIFICATION,new glslunit.compiler.DeclarationConsolidation(e[goog.node.FLAGS.consolidate_declarations]));goog.node.FLAGS.function_renaming&&d.registerStep(glslunit.compiler.Compiler.CompilerPhase.MINIFICATION,new glslunit.compiler.FunctionMinifier);goog.node.FLAGS.minify_constructors&&d.registerStep(glslunit.compiler.Compiler.CompilerPhase.MINIFICATION,new glslunit.compiler.ConstructorMinifier);d=d.compileProgram();d.prettyPrint=goog.node.FLAGS.pretty_print;
(new Date).getTime();var g={};goog.node.FLAGS.template_property.forEach(function(b){var d=b.split("=",2);2!=d.length&&(console.error("Invalid template property: "+b),process.exit(1));g[d[0]]=d[1]});d.templateProperties=g;e="";d.template||goog.node.FLAGS.template?(e="",d.template?(e=b[d.template],e||(console.error("Could not find template "+d.template),process.exit(1))):e=fs.readFileSync(goog.node.FLAGS.template,"utf8"),d.defaultProgramShortNames(),e=Mustache.to_html(e,d)+"\n"):e="\n//! VERTEX\n"+
glslunit.Generator.getSourceCode(d.vertexAst,"\\n")+"\n//! FRAGMENT\n"+glslunit.Generator.getSourceCode(d.fragmentAst,"\\n");goog.node.FLAGS.output?fs.writeFileSync(goog.node.FLAGS.output,e):process.stdout.write(e)}main();

